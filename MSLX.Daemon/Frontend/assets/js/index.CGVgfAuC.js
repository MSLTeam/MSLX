import{D as Me,F as u,R as Ge,K as de,P as ze,aa as Te,b0 as v,aX as k,aY as c,a$ as o,G as e,b2 as a,b6 as b,ak as N,al as W,ao as p,b5 as x,ap as se,bd as al,b1 as O,O as Re,b3 as Be,bb as Pe,be as Xe,V as qe,W as ol}from"./index.BbdIPky0.js";import{u as De,c as ve,f as Ve,i as Ee,g as Ae,h as Ne,_ as Ie,j as sl}from"./index.DUo0lIWi.js";import{S as Oe,g as He,a as Ze}from"./localJava.CMKTVwYR.js";import{u as Qe,a as Le}from"./instance.BPV0cz22.js";import{M as _}from"./tdesign-vue-next.B9R1AJJu.js";import"./core-js-pure.DghWRT_o.js";import"./crelt.C8TCjufn.js";import"./style-mod.Bc2inJdb.js";import"./w3c-keyname.Vcq4gwWv.js";import"./pinia.DE9DXmFR.js";import"./pinia-plugin-persistedstate.n2tMOXAx.js";import"./vue-router.CTuarHf7.js";import"./tvision-color.BU_YHHaJ.js";import"./chroma-js.Cmk4elvR.js";import"./bezier-easing.jp9ayU57.js";import"./lodash.B5_zCkFd.js";import"./axios.R-lXtGyY.js";import"./qs.CnepGyXr.js";import"./side-channel.Bf-JVZLg.js";import"./es-errors.CFxpeikN.js";import"./object-inspect.CD-SYzlK.js";import"./cron-parser.BqMfRICj.js";import"./luxon.BVaPVz1w.js";import"./side-channel-list.CQN2BsdT.js";import"./side-channel-map.BJ69Knz3.js";import"./get-intrinsic.CAdfHqt8.js";import"./es-object-atoms.Ditt1eQ6.js";import"./math-intrinsics.Cv-yPkyD.js";import"./gopd.fcd2-aIC.js";import"./es-define-property.bDCdrV83.js";import"./has-symbols.BaUvM3gb.js";import"./get-proto.Cbri-GHQ.js";import"./dunder-proto.q7lw_6_J.js";import"./call-bind-apply-helpers.BxcZtPLH.js";import"./function-bind.BbkWVFrm.js";import"./hasown.ckq0ukzO.js";import"./call-bound.BO70H6sD.js";import"./side-channel-weakmap.BkoVKe_V.js";import"./nprogress.CMq2Rk2a.js";import"./lodash-es.ClUTdtmA.js";import"./tdesign-icons-vue-next.B3wvPiG1.js";import"./mitt.DJ65BbbF.js";import"./sortablejs.C83syoBY.js";const nl={class:"main-layout-container"},ul={class:"steps-aside"},rl={class:"main-content"},il={key:0,class:"form-step-container"},dl={class:"step-content"},vl={class:"step-content"},cl={style:{width:"100%"}},ml={class:"java-option-panel"},pl={key:0,class:"flex-row"},fl={class:"tip"},_l={key:1,class:"flex-row"},gl={key:2},yl={key:3},hl={class:"step-content"},kl={key:0,class:"online-select-area"},bl={class:"select-core-wrapper"},wl={key:0,class:"selected-core-card"},Vl={class:"core-icon"},Ml={class:"core-info"},Ul={class:"core-filename"},Sl={key:1,class:"online-select-area"},Cl={class:"select-core-wrapper"},$l={key:1,class:"uploading-state"},xl={class:"core-filename"},Fl={key:2,class:"selected-core-card"},Jl={class:"core-icon"},Kl={class:"core-info"},jl={class:"core-filename"},Rl={class:"core-url"},Bl={key:2,class:"online-select-area"},Il={class:"step-content"},Ll={key:1,class:"step-content creation-progress"},Gl={class:"progress-title"},zl={class:"log-time"},Tl={class:"log-message"},Pl={key:2,class:"result-success"},Xl={class:"result-success-title"},ql=Me({__name:"QuickMode",setup(Ue){const I=De(),j=u(null),Y=Qe(),r=u(0),R=u(!1),B=u(!1),T=u(!1),V=u(0),E=u([]),F=u(null),P=u(null),z=u(null),$=u("online"),H=u(!1),L=u(null),J=u(!1),Z=u(0),ee=u(""),X=u(""),q=u("online"),A=u([]),ne=u([]),G=u(""),D=u(""),ue=async(d=!1)=>{try{d&&_.info("æ­£åœ¨åˆ·æ–°Javaç‰ˆæœ¬åˆ—è¡¨(é‡æ–°æ‰«æè€—æ—¶è¾ƒé•¿)...");const t=await He(I.userInfo.systemInfo.osType.toLowerCase().replace("os",""),I.userInfo.systemInfo.osArchitecture.toLowerCase());t&&Array.isArray(t)&&(A.value=t.map(y=>({label:`Java ${y}`,value:y})),A.value.length>0&&!G.value&&(G.value=A.value[1].value)),ne.value=(await Ze(d)).map(y=>({label:`Java ${y.version}${y.is64Bit?"":" (32ä½)"} (${y.vendor} | ${y.path})`,value:y.path})),ne.value.length>0&&(D.value=ne.value[0].value),d&&_.success("å·²åˆ·æ–°Javaç‰ˆæœ¬åˆ—è¡¨")}catch(t){_.warning("è·å–åœ¨çº¿Javaç‰ˆæœ¬å¤±è´¥"+t.message)}};Ge(()=>{ue()});const n=u({name:"æ–°å»ºæœåŠ¡å™¨",path:"",java:"",core:"",coreUrl:"",coreSha256:"",coreFileKey:"",packageFileKey:"",minM:1024,maxM:4096,args:""}),Q=[{label:"GB",value:"GB"},{label:"MB",value:"MB"}],le=u("GB"),i=u("GB"),te=de({get:()=>le.value==="GB"?n.value.minM/1024:n.value.minM,set:d=>{n.value.minM=le.value==="GB"?Math.round(d*1024):d}}),ae=de({get:()=>i.value==="GB"?n.value.maxM/1024:n.value.maxM,set:d=>{n.value.maxM=i.value==="GB"?Math.round(d*1024):d}});ze([q,G,D],([d,t,y])=>{var C;d==="env"?n.value.java="java":d==="custom"||d==="local"?n.value.java=y:d==="online"&&(n.value.java=t?`MSLX://Java/${t}`:""),n.value.java&&((C=j.value)==null||C.validate({fields:["java"]}))},{immediate:!0});const me=de(()=>({name:[{required:!0,message:"å®ä¾‹åç§°ä¸èƒ½ä¸ºç©º",trigger:"blur"}],java:[{required:!0,message:"è¯·é…ç½® Java ç¯å¢ƒ",trigger:"change"}],core:[{required:!0,message:"æ ¸å¿ƒåç§°/æ–‡ä»¶ä¸èƒ½ä¸ºç©º",trigger:"change"}],coreUrl:[{validator:d=>{if($.value==="online"){if(!d)return{result:!1,message:"è¯·é€‰æ‹©ä¸€ä¸ªæœåŠ¡ç«¯æ ¸å¿ƒ",type:"error"};if(d&&!/^https?:\/\/.+/.test(d))return{result:!1,message:"ä¸‹è½½åœ°å€å¿…é¡»ä»¥ http(s) å¼€å¤´",type:"error"}}return!0},trigger:"change"}],coreFileKey:[{validator:d=>$.value==="manual"&&!d?{result:!1,message:"è¯·ä¸Šä¼ æ ¸å¿ƒæ–‡ä»¶",type:"error"}:!0,trigger:"change"}],minM:[{required:!0,min:1,message:"æœ€å°å†…å­˜å¿…é¡»å¤§äº0",trigger:"blur"}],maxM:[{required:!0,min:1,message:"æœ€å¤§å†…å­˜å¿…é¡»å¤§äº0",trigger:"blur"}]})),pe=[["name","path"],["java"],["core","coreUrl","coreSha256","coreFileKey"],["minM","maxM","args"]],fe=()=>{r.value>0&&(r.value-=1)},Se=async()=>{if(r.value===2){if($.value==="online"){if(!n.value.coreUrl||!n.value.core){_.warning("è¯·ç‚¹å‡»æŒ‰é’®é€‰æ‹©ä¸€ä¸ªæœåŠ¡ç«¯æ ¸å¿ƒ");return}}else if($.value==="custom"){if(!n.value.core){_.warning("è¯·è¾“å…¥æ ¸å¿ƒæ–‡ä»¶å");return}}else if(!n.value.coreFileKey){_.warning("è¯·å…ˆä¸Šä¼ æ ¸å¿ƒæ–‡ä»¶");return}}const d=await j.value.validate();if(d===!0){r.value<3&&(r.value+=1);return}const t=new Set(pe[r.value]);Object.keys(d).some(C=>t.has(C))?_.warning("è¯·æ£€æŸ¥å½“å‰æ­¥éª¤çš„è¾“å…¥"):r.value<3&&(r.value+=1)},Ce=d=>{n.value.core=d.filename,n.value.coreUrl=d.url,n.value.coreSha256=d.sha256,n.value.coreFileKey="",_.success(`å·²é€‰æ‹©: ${d.core} (${d.version})`),j.value.validate({fields:["core","coreUrl"]})},_e=()=>{var d;(d=L.value)==null||d.click()},$e=d=>{if(d===0)return"0 B";const t=1024,y=["B","KB","MB","GB"],C=Math.floor(Math.log(d)/Math.log(t));return parseFloat((d/Math.pow(t,C)).toFixed(2))+" "+y[C]},ge=async d=>{const t=d.target;if(!t.files||t.files.length===0)return;if(n.value.coreFileKey)try{await Ve(n.value.coreFileKey),console.log("æ—§ä¸´æ—¶æ–‡ä»¶å·²æ¸…ç†:",n.value.coreFileKey)}catch(s){console.warn("æ¸…ç†æ—§æ–‡ä»¶å¤±è´¥ï¼Œå¯èƒ½æ–‡ä»¶å·²è¿‡æœŸ",s)}const y=t.files[0],C=y.name;n.value.core=C,n.value.coreUrl="",n.value.coreSha256="",n.value.coreFileKey="",ee.value=C,X.value=$e(y.size),await xe(y),t.value=""},xe=async d=>{J.value=!0,Z.value=0;const t=5*1024*1024,y=Math.ceil(d.size/t);try{const s=(await Ee()).uploadId;if(!s)throw new Error("æ— æ³•è·å–ä¸Šä¼ å‡­è¯");for(let f=0;f<y;f++){const M=f*t,U=Math.min(d.size,M+t),w=d.slice(M,U);await Ae(s,f,w),Z.value=Math.floor((f+1)/y*100)}const m=(await Ne(s,y)).uploadId;n.value.coreFileKey=m,_.success("æ ¸å¿ƒæ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼"),j.value.validate({fields:["core","coreFileKey"]})}catch(C){console.error(C),_.error(`ä¸Šä¼ å¤±è´¥: ${C.message||"æœªçŸ¥é”™è¯¯"}`),n.value.core="",ee.value="",Z.value=0}finally{J.value=!1}},Fe=async()=>{n.value.coreFileKey&&(await Ve(n.value.coreFileKey),n.value.coreFileKey="",n.value.core="",ee.value="",_.success("æ–‡ä»¶å·²ç§»é™¤"))},Je=async()=>{if(!(await j.value.validate()===!0)){_.warning("è¯·æ£€æŸ¥è¡¨å•æ‰€æœ‰å†…å®¹");return}R.value=!0,E.value=[];const y={...n.value,path:n.value.path||null,coreUrl:n.value.coreUrl||null,coreSha256:n.value.coreSha256||null,coreFileKey:n.value.coreFileKey||null,args:n.value.args||null};$.value==="manual"?(y.coreUrl=null,y.coreSha256=null):y.coreFileKey=null;try{const s=(await Le(y)).serverId;if(!s)throw new Error("æœåŠ¡å™¨æœªè¿”å› ServerId");P.value=s.toString(),B.value=!0,r.value=4,await Ke(P.value)}catch(C){const s=C.message||"åˆ›å»ºè¯·æ±‚å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–åç«¯æœåŠ¡";_.error(s),R.value=!1}},Ke=async d=>{const{baseUrl:t,token:y}=I;let C=!1;const s=new URL("/api/hubs/creationProgressHub",t||window.location.origin);s.searchParams.append("x-user-token",y),F.value=new Pe().withUrl(s.toString(),{withCredentials:!1}).configureLogging(Xe.Information).build();const l=(m,f=null)=>{E.value.push({time:new Date().toLocaleTimeString(),message:m,progress:f}),qe(()=>{z.value&&(z.value.scrollTop=z.value.scrollHeight)})};F.value.on("StatusUpdate",(m,f,M)=>{var U,w;m.toString()===d&&(l(f,M),M!==null&&M>=0&&(V.value=M),M===100?(C=!0,_.success("æœåŠ¡å™¨åˆ›å»ºæˆåŠŸï¼"),(U=F.value)==null||U.stop(),B.value=!1,T.value=!0,r.value=5,R.value=!1,Y.refreshInstanceList()):M===-1&&(_.error(f||"åˆ›å»ºè¿‡ç¨‹ä¸­å‘ç”ŸæœªçŸ¥é”™è¯¯"),(w=F.value)==null||w.stop(),B.value=!1,R.value=!1,r.value=0))});try{await F.value.start(),l("å·²è¿æ¥åˆ°å®æ—¶è¿›åº¦æœåŠ¡..."),await F.value.invoke("TrackServer",d),l("å·²è®¢é˜…ä»»åŠ¡ï¼Œç­‰å¾…æœåŠ¡å™¨å“åº”...")}catch(m){C||(l(`SignalR è¿æ¥å¤±è´¥: ${m.message}`,-1),_.error("æ— æ³•è¿æ¥åˆ°å®æ—¶è¿›åº¦æœåŠ¡"),B.value=!1,R.value=!1,r.value=0)}};return Te(()=>{var d;(d=F.value)==null||d.stop()}),(d,t)=>{const y=v("t-step-item"),C=v("t-steps"),s=v("t-input"),l=v("t-form-item"),m=v("t-alert"),f=v("t-radio-button"),M=v("t-radio-group"),U=v("t-select"),w=v("t-button"),S=v("t-icon"),K=v("t-progress"),re=v("t-input-number"),ye=v("t-space"),he=v("t-col"),ce=v("t-row"),oe=v("t-textarea"),ie=v("t-form"),ke=v("t-list-item-meta"),be=v("t-list-item"),we=v("t-list");return c(),k("div",null,[o("div",nl,[o("div",ul,[e(C,{layout:"vertical",style:{"margin-top":"16px"},current:r.value,status:"process",readonly:""},{default:a(()=>[e(y,{title:"åŸºæœ¬ä¿¡æ¯",content:"å¡«å†™å®ä¾‹åç§°å’Œè·¯å¾„"}),e(y,{title:"Java ç¯å¢ƒ",content:"é…ç½® Java è¿è¡Œæ—¶"}),e(y,{title:"æ ¸å¿ƒæ–‡ä»¶",content:"æŒ‡å®šæ ¸å¿ƒæ–‡ä»¶åŠä¸‹è½½"}),e(y,{title:"èµ„æºé…ç½®",content:"è®¾ç½®å†…å­˜ä¸ JVM å‚æ•°"}),e(y,{title:"åˆ›å»ºå®ä¾‹",content:"æäº¤å¹¶ç­‰å¾…åˆ›å»º"}),e(y,{title:"å®Œæˆ",content:"æŸ¥çœ‹åˆ›å»ºç»“æœ"})]),_:1},8,["current"])]),o("div",rl,[!B.value&&!T.value?(c(),k("div",il,[e(ie,{ref_key:"formRef",ref:j,data:n.value,rules:me.value,"label-align":"top",class:"step-form",onSubmit:Je},{default:a(()=>[N(o("div",dl,[e(l,{label:"å®ä¾‹åç§°",name:"name"},{default:a(()=>[e(s,{modelValue:n.value.name,"onUpdate:modelValue":t[0]||(t[0]=g=>n.value.name=g),placeholder:"ä¸ºä½ çš„æœåŠ¡å™¨èµ·ä¸ªåå­—"},null,8,["modelValue"])]),_:1}),e(l,{label:"å®ä¾‹è·¯å¾„",name:"path",help:"é€‰å¡«ï¼Œç•™ç©ºå°†ä½¿ç”¨é»˜è®¤è·¯å¾„"},{default:a(()=>[e(s,{modelValue:n.value.path,"onUpdate:modelValue":t[1]||(t[1]=g=>n.value.path=g),placeholder:"ä¾‹å¦‚: D:\\MyServer"},null,8,["modelValue"])]),_:1})],512),[[W,r.value===0]]),N(o("div",vl,[e(m,{theme:"info",title:"å¦‚ä½•é€‰æ‹© Java ç‰ˆæœ¬?",class:"java-alert"},{message:a(()=>[...t[20]||(t[20]=[o("p",null,"ä¸åŒçš„ Minecraft ç‰ˆæœ¬éœ€è¦ä¸åŒçš„ Java ç‰ˆæœ¬ã€‚",-1),o("ul",null,[o("li",null,[p("å»ºè®®ç›´æ¥ä½¿ç”¨ "),o("b",null,"æ¨èç‰ˆæœ¬"),p(" è¶…å‡ºç‰ˆæœ¬å¯èƒ½å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ã€‚")]),o("li",null,"MC 26.1 - æœ€æ–°ç‰ˆ: éœ€è¦ Java 25 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚"),o("li",null,"MC 1.20.5 - 1.21.10: éœ€è¦ Java 21 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚"),o("li",null,"MC 1.18 - 1.20.4: éœ€è¦ Java 17 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚"),o("li",null,"MC 1.17/1.17.1: éœ€è¦ Java 16ã€‚"),o("li",null,"MC 1.13 - 1.16.5: éœ€è¦ Java 8 / 11ã€‚"),o("li",null,"MC 1.12.2 åŠä»¥ä¸‹: éœ€è¦ Java 8ã€‚")],-1)])]),_:1}),e(l,{label:"Java æ¥æº",name:"java"},{default:a(()=>[o("div",cl,[e(M,{modelValue:q.value,"onUpdate:modelValue":t[2]||(t[2]=g=>q.value=g),variant:"default-filled"},{default:a(()=>[e(f,{value:"online"},{default:a(()=>[...t[21]||(t[21]=[p("åœ¨çº¿ä¸‹è½½",-1)])]),_:1}),e(f,{value:"local"},{default:a(()=>[...t[22]||(t[22]=[p("é€‰æ‹©ç”µè„‘ä¸Šçš„ Java",-1)])]),_:1}),e(f,{value:"env"},{default:a(()=>[...t[23]||(t[23]=[p("ç¯å¢ƒå˜é‡",-1)])]),_:1}),e(f,{value:"custom"},{default:a(()=>[...t[24]||(t[24]=[p("è‡ªå®šä¹‰è·¯å¾„",-1)])]),_:1})]),_:1},8,["modelValue"]),o("div",ml,[q.value==="online"?(c(),k("div",pl,[e(U,{modelValue:G.value,"onUpdate:modelValue":t[3]||(t[3]=g=>G.value=g),options:A.value,placeholder:"è¯·é€‰æ‹© Java ç‰ˆæœ¬"},null,8,["modelValue","options"]),o("div",fl," å°†ä¸‹è½½å¹¶ä½¿ç”¨ Java "+x(G.value||"?")+" "+x(se(I).userInfo.systemInfo.osType.toLowerCase().replace("os",""))+" / "+x(se(I).userInfo.systemInfo.osArchitecture.toLowerCase()),1)])):b("",!0),q.value==="local"?(c(),k("div",_l,[e(U,{modelValue:D.value,"onUpdate:modelValue":t[4]||(t[4]=g=>D.value=g),options:ne.value,placeholder:"è¯·é€‰æ‹© Java ç‰ˆæœ¬"},null,8,["modelValue","options"]),e(w,{variant:"outline",theme:"primary",onClick:t[5]||(t[5]=g=>ue(!0))},{default:a(()=>[...t[25]||(t[25]=[p("é‡æ–°æ‰«æ",-1)])]),_:1})])):b("",!0),q.value==="env"?(c(),k("div",gl,[e(s,{"model-value":"java",readonly:"",disabled:""}),t[26]||(t[26]=o("div",{class:"tip"},"å°†ä½¿ç”¨ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­çš„ java å‘½ä»¤",-1))])):b("",!0),q.value==="custom"?(c(),k("div",yl,[e(s,{modelValue:D.value,"onUpdate:modelValue":t[6]||(t[6]=g=>D.value=g),placeholder:"ä¾‹å¦‚: C:\\Program Files\\Java\\jdk-17\\bin\\java.exe"},null,8,["modelValue"])])):b("",!0)])])]),_:1})],512),[[W,r.value===1]]),N(o("div",hl,[e(l,{label:"é€‰æ‹©æ‚¨çš„Minecraftå¼€æœä½¿ç”¨çš„æœåŠ¡ç«¯æ ¸å¿ƒ"},{default:a(()=>[e(M,{modelValue:$.value,"onUpdate:modelValue":t[7]||(t[7]=g=>$.value=g),variant:"default-filled"},{default:a(()=>[e(f,{value:"online"},{default:a(()=>[...t[27]||(t[27]=[p("åœ¨çº¿ä¸‹è½½ (æ¨è)",-1)])]),_:1}),e(f,{value:"manual"},{default:a(()=>[...t[28]||(t[28]=[p("é€‰æ‹©æœ¬åœ°æ–‡ä»¶",-1)])]),_:1}),e(f,{value:"custom"},{default:a(()=>[...t[29]||(t[29]=[p("è‡ªå®šä¹‰æ–‡ä»¶å",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),$.value==="online"?(c(),k("div",kl,[e(l,{label:"é€‰æ‹©æœåŠ¡ç«¯æ ¸å¿ƒ",name:"coreUrl"},{default:a(()=>[o("div",bl,[e(w,{variant:"outline",onClick:t[8]||(t[8]=g=>H.value=!0)},{icon:a(()=>[e(S,{name:"cloud-download"})]),default:a(()=>[t[30]||(t[30]=p(" ç‚¹å‡»æ‰“å¼€æœåŠ¡ç«¯æ ¸å¿ƒé€‰æ‹©åº“ ",-1))]),_:1}),n.value.core?(c(),k("div",wl,[o("div",Vl,[e(S,{name:"check-circle-filled"})]),o("div",Ml,[o("div",Ul,x(n.value.core),1),t[31]||(t[31]=o("div",{class:"core-url",title:"MSLX å°†åœ¨ç¨åå¸®æ‚¨è‡ªåŠ¨ä¸‹è½½æ­¤æ–‡ä»¶..."}," MSLX å°†åœ¨ç¨åå¸®æ‚¨è‡ªåŠ¨ä¸‹è½½æ­¤æ–‡ä»¶... ",-1))]),e(w,{shape:"circle",variant:"text",theme:"danger",onClick:t[9]||(t[9]=g=>{n.value.core="",n.value.coreUrl=""})},{default:a(()=>[e(S,{name:"close"})]),_:1})])):b("",!0)])]),_:1}),N(o("input",{"onUpdate:modelValue":t[10]||(t[10]=g=>n.value.coreSha256=g),type:"hidden"},null,512),[[al,n.value.coreSha256]])])):b("",!0),$.value==="manual"?(c(),k("div",Sl,[e(l,{label:"ä¸Šä¼ æ ¸å¿ƒæ–‡ä»¶",name:"coreFileKey"},{default:a(()=>[o("div",Cl,[o("input",{ref_key:"uploadInputRef",ref:L,accept:".jar",type:"file",style:{display:"none"},onChange:ge},null,544),!J.value&&!n.value.coreFileKey?(c(),O(w,{key:0,variant:"outline",onClick:_e},{icon:a(()=>[e(S,{name:"upload"})]),default:a(()=>[t[32]||(t[32]=p(" ç‚¹å‡»é€‰æ‹©æ–‡ä»¶å¹¶ä¸Šä¼  ",-1))]),_:1})):b("",!0),J.value?(c(),k("div",$l,[o("div",xl,"æ­£åœ¨ä¸Šä¼ : "+x(ee.value)+" ("+x(X.value)+")",1),e(K,{theme:"line",percentage:Z.value},null,8,["percentage"]),t[33]||(t[33]=o("div",{class:"tip"},"åˆ«ç€æ€¥ï¼Œå–æ¯èŒ¶ğŸµ...",-1))])):b("",!0),n.value.coreFileKey&&!J.value?(c(),k("div",Fl,[o("div",Jl,[e(S,{name:"check-circle-filled"})]),o("div",Kl,[o("div",jl,x(ee.value),1),o("div",Rl,x(X.value)+" | å·²ä¸Šä¼ å‡†å¤‡å°±ç»ª",1)]),e(w,{shape:"circle",variant:"text",theme:"primary",onClick:_e},{icon:a(()=>[e(S,{name:"swap"})]),_:1}),e(w,{shape:"circle",variant:"text",theme:"danger",onClick:Fe},{icon:a(()=>[e(S,{name:"delete"})]),_:1})])):b("",!0)])]),_:1})])):b("",!0),$.value==="custom"?(c(),k("div",Bl,[e(m,{theme:"warning",message:"æ­¤æ¨¡å¼é€šå¸¸ç”¨äºæœåŠ¡å™¨ç›®å½•ä¸­å·²ç»å­˜åœ¨æ ¸å¿ƒæ–‡ä»¶ï¼Œæˆ–è€…æ‚¨æ‰“ç®—ç¨åæ‰‹åŠ¨é€šè¿‡æ–‡ä»¶ç®¡ç†ä¸Šä¼ æ ¸å¿ƒã€‚",style:{"margin-bottom":"16px"}}),e(l,{label:"æ ¸å¿ƒæ–‡ä»¶å",name:"core",help:"è¯·ç¡®ä¿æ–‡ä»¶ååŒ…å«åç¼€ï¼Œä¾‹å¦‚: server.jar"},{default:a(()=>[e(s,{modelValue:n.value.core,"onUpdate:modelValue":t[11]||(t[11]=g=>n.value.core=g),placeholder:"è¯·è¾“å…¥æ ¸å¿ƒæ–‡ä»¶å (ä¾‹å¦‚ server.jar)"},null,8,["modelValue"])]),_:1})])):b("",!0)],512),[[W,r.value===2]]),N(o("div",Il,[e(ce,{gutter:[16,24]},{default:a(()=>[e(he,{xs:12,span:6},{default:a(()=>[e(l,{label:"æœ€å°å†…å­˜",name:"minM"},{default:a(()=>[e(ye,{size:8,style:{width:"100%"}},{default:a(()=>[e(re,{modelValue:te.value,"onUpdate:modelValue":t[12]||(t[12]=g=>te.value=g),min:0,"decimal-places":le.value==="GB"?1:0,placeholder:"Xms",theme:"column",style:{width:"100%"}},null,8,["modelValue","decimal-places"]),e(U,{modelValue:le.value,"onUpdate:modelValue":t[13]||(t[13]=g=>le.value=g),options:Q,clearable:!1,style:{width:"80px"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(he,{xs:12,span:6},{default:a(()=>[e(l,{label:"æœ€å¤§å†…å­˜",name:"maxM"},{default:a(()=>[e(ye,{size:8,style:{width:"100%"}},{default:a(()=>[e(re,{modelValue:ae.value,"onUpdate:modelValue":t[14]||(t[14]=g=>ae.value=g),min:0,"decimal-places":i.value==="GB"?1:0,placeholder:"Xmx",theme:"column",style:{width:"100%"}},null,8,["modelValue","decimal-places"]),e(U,{modelValue:i.value,"onUpdate:modelValue":t[15]||(t[15]=g=>i.value=g),options:Q,clearable:!1,style:{width:"80px"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(l,{label:"é¢å¤– JVM å‚æ•° (å¯é€‰)",name:"args",help:"ä¾‹å¦‚: -XX:+UseG1GC",style:{"margin-top":"16px"}},{default:a(()=>[e(oe,{modelValue:n.value.args,"onUpdate:modelValue":t[16]||(t[16]=g=>n.value.args=g),placeholder:"-XX:+UseG1GC"},null,8,["modelValue"])]),_:1})],512),[[W,r.value===3]]),e(l,{class:"step-actions"},{default:a(()=>[r.value>0?(c(),O(w,{key:0,theme:"default",onClick:fe},{default:a(()=>[...t[34]||(t[34]=[p("ä¸Šä¸€æ­¥",-1)])]),_:1})):b("",!0),r.value<3?(c(),O(w,{key:1,type:"button",onClick:Se},{default:a(()=>[...t[35]||(t[35]=[p("ä¸‹ä¸€æ­¥",-1)])]),_:1})):b("",!0),r.value===3?(c(),O(w,{key:2,theme:"primary",type:"submit",loading:R.value},{default:a(()=>[...t[36]||(t[36]=[p(" æäº¤åˆ›å»º ",-1)])]),_:1},8,["loading"])):b("",!0)]),_:1})]),_:1},8,["data","rules"])])):b("",!0),B.value?(c(),k("div",Ll,[o("div",Gl,"æ­£åœ¨åˆ›å»ºå®ä¾‹ ("+x(P.value)+")",1),t[37]||(t[37]=o("p",null,"è¯·å‹¿å…³é—­æ­¤é¡µé¢ï¼Œåˆ›å»ºè¿‡ç¨‹å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿ...",-1)),e(K,{theme:"plump",percentage:V.value,label:`${V.value.toFixed(2)}%`},null,8,["percentage","label"]),o("div",{ref_key:"logContainerRef",ref:z,class:"log-container"},[e(we,{split:!0},{default:a(()=>[(c(!0),k(Re,null,Be(E.value,(g,je)=>(c(),O(be,{key:je},{default:a(()=>[e(ke,null,{description:a(()=>[o("span",zl,"["+x(g.time)+"]",1),o("span",Tl,x(g.message),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})],512)])):b("",!0),T.value?(c(),k("div",Pl,[e(S,{class:"result-success-icon",name:"check-circle"}),o("div",Xl,"æœåŠ¡å™¨ ("+x(P.value)+") å·²åˆ›å»ºæˆåŠŸ",1),t[40]||(t[40]=o("div",{class:"result-success-describe"},"ä½ ç°åœ¨å¯ä»¥å»æœåŠ¡å™¨åˆ—è¡¨å¯åŠ¨å®ƒäº†",-1)),o("div",null,[e(w,{onClick:t[17]||(t[17]=g=>se(ve)("/instance/list"))},{default:a(()=>[...t[38]||(t[38]=[p(" è¿”å›æœåŠ¡ç«¯åˆ—è¡¨ ",-1)])]),_:1}),e(w,{theme:"default",onClick:t[18]||(t[18]=g=>se(ve)(`/instance/console/${P.value}`))},{default:a(()=>[...t[39]||(t[39]=[p(" å‰å¾€æ§åˆ¶å° ",-1)])]),_:1})])])):b("",!0)])]),e(Oe,{visible:H.value,"onUpdate:visible":t[19]||(t[19]=g=>H.value=g),onConfirm:Ce},null,8,["visible"])])}}}),Dl=Ie(ql,[["__scopeId","data-v-7b3b2110"]]),El={key:0},Al={key:1,class:"result-success"},Nl={class:"result-success-title"},Ol=Me({__name:"CustomMode",setup(Ue){const I=u(!1),j=u(0),Y=u(null),r=ol({name:"",path:null,java:"none",core:"none",coreUrl:"",coreSha256:"",coreFileKey:"",packageFileKey:"",minM:1027,maxM:1027,args:""}),R={name:[{required:!0,message:"è¯·è¾“å…¥æœåŠ¡å™¨åç§°",type:"error"}],args:[{required:!0,message:"è¯·è¾“å…¥è‡ªå®šä¹‰å¯åŠ¨å‚æ•°",type:"error"}]},B=async({validateResult:T})=>{if(T===!0)try{const V=await Le(r);j.value=V.serverId,_.success("åˆ›å»ºæˆåŠŸ"),I.value=!0}catch(V){_.error("åˆ›å»ºå¤±è´¥ï¼"+V.message)}else _.warning("è¯·æ£€æŸ¥è¡¨å•å¡«å†™")};return(T,V)=>{const E=v("t-input"),F=v("t-form-item"),P=v("t-textarea"),z=v("t-button"),$=v("t-space"),H=v("t-form"),L=v("t-icon");return c(),k("div",null,[I.value?(c(),k("div",Al,[e(L,{class:"result-success-icon",name:"check-circle"}),o("div",Nl,"æœåŠ¡å™¨ ("+x(j.value)+") å·²åˆ›å»ºæˆåŠŸ",1),V[8]||(V[8]=o("div",{class:"result-success-describe"},"ä½ ç°åœ¨å¯ä»¥å»æœåŠ¡å™¨åˆ—è¡¨å¯åŠ¨å®ƒäº†",-1)),o("div",null,[e(z,{onClick:V[3]||(V[3]=J=>se(ve)("/instance/list"))},{default:a(()=>[...V[6]||(V[6]=[p(" è¿”å›æœåŠ¡ç«¯åˆ—è¡¨ ",-1)])]),_:1}),e(z,{theme:"default",onClick:V[4]||(V[4]=J=>se(ve)(`/instance/console/${j.value}`))},{default:a(()=>[...V[7]||(V[7]=[p(" å‰å¾€æ§åˆ¶å° ",-1)])]),_:1})])])):(c(),k("div",El,[e(H,{ref_key:"formRef",ref:Y,rules:R,data:r,"label-align":"top",onSubmit:B},{default:a(()=>[e(F,{label:"æœåŠ¡å™¨åç§°",name:"name"},{default:a(()=>[e(E,{modelValue:r.name,"onUpdate:modelValue":V[0]||(V[0]=J=>r.name=J),placeholder:"ç»™ä½ çš„æœåŠ¡å™¨èµ·ä¸€ä¸ªåå­—"},null,8,["modelValue"])]),_:1}),e(F,{label:"å­˜å‚¨è·¯å¾„(å¯é€‰)",name:"path",help:"ä¸å¡«å†™å°†ä½¿ç”¨é»˜è®¤çš„ä¿å­˜è·¯å¾„ã€‚"},{default:a(()=>[e(E,{modelValue:r.path,"onUpdate:modelValue":V[1]||(V[1]=J=>r.path=J),placeholder:"è¯·å¡«å†™æœåŠ¡ç«¯ä¿å­˜ä½ç½®"},null,8,["modelValue"])]),_:1}),e(F,{label:"å¯åŠ¨æŒ‡ä»¤",name:"args",help:"æ­¤æ¨¡å¼ä¸ä¼šè‡ªåŠ¨å¸®æ‚¨é…ç½®Javaç¯å¢ƒï¼Œæ‚¨éœ€è¦å¡«å†™å®Œæ•´çš„å¯åŠ¨å‘½ä»¤ã€‚"},{default:a(()=>[e(P,{modelValue:r.args,"onUpdate:modelValue":V[2]||(V[2]=J=>r.args=J),placeholder:"start.bat...",autosize:{minRows:5,maxRows:25},class:"code-font-textarea"},null,8,["modelValue"])]),_:1}),e(F,null,{default:a(()=>[e($,null,{default:a(()=>[e(z,{theme:"primary",type:"submit"},{default:a(()=>[...V[5]||(V[5]=[p("æäº¤åˆ›å»º",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["data"])]))])}}}),Hl=Ie(Ol,[["__scopeId","data-v-e198676d"]]),Zl={class:"main-layout-container"},Ql={class:"steps-aside"},Wl={class:"main-content"},Yl={key:0,class:"form-step-container"},et={class:"step-content"},lt={class:"step-content"},tt={class:"select-core-wrapper"},at={key:1,class:"uploading-state"},ot={class:"core-filename"},st={key:2,class:"uploading-state"},nt={key:3,class:"selected-core-card"},ut={class:"core-icon"},rt={class:"core-info"},it={class:"core-filename"},dt={class:"core-url"},vt={class:"step-content"},ct={key:0},mt={key:1},pt={key:0,class:"online-select-area"},ft={class:"select-core-wrapper"},_t={key:0,class:"selected-core-card"},gt={class:"core-icon"},yt={class:"core-info"},ht={class:"core-filename"},kt={key:1,class:"online-select-area"},bt={class:"step-content"},wt={style:{width:"100%"}},Vt={class:"java-option-panel"},Mt={key:0,class:"flex-row"},Ut={key:1,class:"flex-row"},St={key:2},Ct={key:3},$t={class:"step-content"},xt={key:1,class:"step-content creation-progress"},Ft={class:"progress-title"},Jt={key:2,class:"result-success"},Kt=Me({__name:"PackageMode",setup(Ue){const I=De(),j=u(null),Y=Qe(),r=u(0),R=u(!1),B=u(!1),T=u(!1),V=u(0),E=u([]),F=u(null),P=u(null),z=u(null),$=u("online"),H=u(!1),L=u([]),J=u(!1),Z=u(""),ee=u(null),X=u(!1),q=u(0),A=u(""),ne=u(""),G=u("online"),D=u([]),ue=u([]),n=u(""),Q=u(""),le=async(s=!1)=>{try{s&&_.info("æ­£åœ¨åˆ·æ–°Javaç‰ˆæœ¬åˆ—è¡¨...");const l=await He(I.userInfo.systemInfo.osType.toLowerCase().replace("os",""),I.userInfo.systemInfo.osArchitecture.toLowerCase());l&&Array.isArray(l)&&(D.value=l.map(m=>({label:`Java ${m}`,value:m})),D.value.length>0&&!n.value&&(n.value=D.value[1].value)),ue.value=(await Ze(s)).map(m=>({label:`Java ${m.version}${m.is64Bit?"":" (32ä½)"} (${m.vendor} | ${m.path})`,value:m.path})),ue.value.length>0&&(Q.value=ue.value[0].value),s&&_.success("å·²åˆ·æ–°Javaç‰ˆæœ¬åˆ—è¡¨")}catch(l){_.warning("è·å–åœ¨çº¿Javaç‰ˆæœ¬å¤±è´¥: "+l.message)}};Ge(()=>{le()});const i=u({name:"æ–°å»ºæ•´åˆåŒ…æœåŠ¡å™¨",path:"",java:"",core:"",coreUrl:"",coreSha256:"",coreFileKey:"",packageFileKey:"",minM:2048,maxM:6144,args:""}),te=u("GB"),ae=u("GB"),me=[{label:"MB",value:"MB"},{label:"GB",value:"GB"}],pe=de({get:()=>te.value==="GB"?i.value.minM/1024:i.value.minM,set:s=>{i.value.minM=te.value==="GB"?Math.round(s*1024):s}}),fe=de({get:()=>ae.value==="GB"?i.value.maxM/1024:i.value.maxM,set:s=>{i.value.maxM=ae.value==="GB"?Math.round(s*1024):s}});ze([G,n,Q],([s,l,m])=>{var f;s==="env"?i.value.java="java":s==="custom"||s==="local"?i.value.java=m:s==="online"&&(i.value.java=l?`MSLX://Java/${l}`:""),i.value.java&&((f=j.value)==null||f.validate({fields:["java"]}))},{immediate:!0});const Se=de(()=>({name:[{required:!0,message:"å®ä¾‹åç§°ä¸èƒ½ä¸ºç©º",trigger:"blur"}],packageFileKey:[{required:!0,message:"è¯·ä¸Šä¼ æ•´åˆåŒ…æ–‡ä»¶",trigger:"change"}],core:[{validator:s=>{if(L.value.length>0){if(!s)return{result:!1,message:"è¯·é€‰æ‹©ä¸€ä¸ªå¯åŠ¨Jar",type:"error"}}else{if($.value==="online"&&!i.value.coreUrl)return{result:!1,message:"è¯·é€‰æ‹©æœåŠ¡ç«¯æ ¸å¿ƒ",type:"error"};if($.value==="manual"&&!i.value.coreFileKey)return{result:!1,message:"è¯·ä¸Šä¼ æ ¸å¿ƒæ–‡ä»¶",type:"error"}}return!0},trigger:"change"}],java:[{required:!0,message:"è¯·é…ç½® Java ç¯å¢ƒ",trigger:"change"}],minM:[{required:!0,min:1,message:"å¿…é¡»å¤§äº0",trigger:"blur"}],maxM:[{required:!0,min:1,message:"å¿…é¡»å¤§äº0",trigger:"blur"}]})),Ce=[["name","path"],["packageFileKey"],["core","coreUrl","coreFileKey"],["java"],["minM","maxM","args"]],_e=()=>{r.value>0&&(r.value-=1)},$e=async()=>{if(r.value===1){if(!i.value.packageFileKey){_.warning("è¯·å…ˆä¸Šä¼ æœåŠ¡ç«¯æ•´åˆåŒ…(Zip)");return}if(X.value||J.value){_.warning("è¯·ç­‰å¾…ä¸Šä¼ æˆ–åˆ†æå®Œæˆ");return}}if(r.value===2)if(L.value.length>0){if(!i.value.core){_.warning("è¯·ä»åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªå¯åŠ¨æ ¸å¿ƒ");return}}else{if($.value==="online"&&(!i.value.coreUrl||!i.value.core)){_.warning("è¯·é€‰æ‹©ä¸€ä¸ªæœåŠ¡ç«¯æ ¸å¿ƒ");return}if($.value==="manual"&&!i.value.coreFileKey){_.warning("è¯·ä¸Šä¼ æ ¸å¿ƒæ–‡ä»¶");return}}const s=await j.value.validate();if(s===!0){r.value<4&&(r.value+=1);return}const l=new Set(Ce[r.value]);Object.keys(s).some(f=>l.has(f))?_.warning("è¯·æ£€æŸ¥å½“å‰æ­¥éª¤çš„è¾“å…¥"):r.value<4&&(r.value+=1)},ge=()=>{var s;(s=ee.value)==null||s.click()},xe=s=>{if(s===0)return"0 B";const l=1024,m=["B","KB","MB","GB"],f=Math.floor(Math.log(s)/Math.log(l));return parseFloat((s/Math.pow(l,f)).toFixed(2))+" "+m[f]},Fe=async s=>{const l=s.target;if(!l.files||l.files.length===0)return;if(i.value.packageFileKey)try{await Ve(i.value.packageFileKey)}catch(f){console.error(f)}i.value.core="",L.value=[],Z.value="";const m=l.files[0];A.value=m.name,ne.value=xe(m.size),await Je(m),l.value=""},Je=async s=>{X.value=!0,q.value=0;const l=5*1024*1024,m=Math.ceil(s.size/l);try{const M=(await Ee()).uploadId;if(!M)throw new Error("æ— æ³•è·å–ä¸Šä¼ å‡­è¯");for(let S=0;S<m;S++){const K=S*l,re=Math.min(s.size,K+l);await Ae(M,S,s.slice(K,re)),q.value=Math.floor((S+1)/m*100)}const w=(await Ne(M,m)).uploadId;i.value.packageFileKey=w,_.success("ä¸Šä¼ æˆåŠŸï¼Œæ­£åœ¨åˆ†ææ•´åˆåŒ…å†…å®¹..."),await Ke(w)}catch(f){console.error(f),_.error(`ä¸Šä¼ å¤±è´¥: ${f.message||"æœªçŸ¥é”™è¯¯"}`),A.value="",q.value=0}finally{X.value=!1}},Ke=async s=>{J.value=!0;try{const l=await sl(s);L.value=l.jars||[],Z.value=l.detectedRoot||"",l.count===1&&l.jars.length>0?(i.value.core=l.jars[0],_.success(`è‡ªåŠ¨è¯†åˆ«åˆ°æœåŠ¡ç«¯æ ¸å¿ƒ: ${l.jars[0]}`)):l.count>1?_.info(`æ•´åˆåŒ…å†…æ£€æµ‹åˆ° ${l.count} ä¸ªæœåŠ¡ç«¯æ ¸å¿ƒï¼Œè¯·åœ¨ä¸‹ä¸€æ­¥é€‰æ‹©`):_.warning("æœªæ£€æµ‹åˆ°æ•´åˆåŒ…å†…å­˜åœ¨æœåŠ¡ç«¯æ ¸å¿ƒï¼Œè¯·åœ¨ä¸‹ä¸€æ­¥æ‰‹åŠ¨é…ç½®æ ¸å¿ƒ")}catch(l){_.error("æ•´åˆåŒ…åˆ†æå¤±è´¥: "+l.message)}finally{J.value=!1}},d=async()=>{i.value.packageFileKey&&(await Ve(i.value.packageFileKey),i.value.packageFileKey="",A.value="",L.value=[],i.value.core="",_.success("æ–‡ä»¶å·²ç§»é™¤"))},t=s=>{i.value.core=s.filename,i.value.coreUrl=s.url,i.value.coreSha256=s.sha256,i.value.coreFileKey="",_.success(`å·²é€‰æ‹©: ${s.core} (${s.version})`)},y=async()=>{if(await j.value.validate()!==!0){_.warning("è¯·æ£€æŸ¥è¡¨å•æ‰€æœ‰å†…å®¹");return}R.value=!0,E.value=[];const l={...i.value,path:i.value.path||null,coreUrl:i.value.coreUrl||null,coreSha256:i.value.coreSha256||null,coreFileKey:i.value.coreFileKey||null,args:i.value.args||null};L.value.length>0?(l.coreUrl=null,l.coreSha256=null,l.coreFileKey=null):$.value==="manual"?(l.coreUrl=null,l.coreSha256=null):l.coreFileKey=null;try{const f=(await Le(l)).serverId;if(!f)throw new Error("æœåŠ¡å™¨æœªè¿”å› ServerId");P.value=f.toString(),B.value=!0,r.value=5,await C(P.value)}catch(m){_.error(m.message||"åˆ›å»ºè¯·æ±‚å¤±è´¥"),R.value=!1}},C=async s=>{const{baseUrl:l,token:m}=I;if(!l||!m)return;const f=new URL("/api/hubs/creationProgressHub",l||window.location.origin);f.searchParams.append("x-user-token",m),F.value=new Pe().withUrl(f.toString(),{withCredentials:!1}).configureLogging(Xe.Information).build(),F.value.on("StatusUpdate",(M,U,w)=>{var S,K;M.toString()===s&&(E.value.push({time:new Date().toLocaleTimeString(),message:U,progress:w}),qe(()=>{z.value&&(z.value.scrollTop=z.value.scrollHeight)}),w!==null&&w>=0&&(V.value=w),w===100?(_.success("æœåŠ¡å™¨åˆ›å»ºæˆåŠŸï¼"),(S=F.value)==null||S.stop(),B.value=!1,T.value=!0,r.value=6,R.value=!1,Y.refreshInstanceList()):w===-1&&(_.error(U||"é”™è¯¯"),(K=F.value)==null||K.stop(),B.value=!1,R.value=!1,r.value=0))});try{await F.value.start(),await F.value.invoke("TrackServer",s)}catch(M){console.error("SignalR Error",M)}};return Te(()=>{var s;(s=F.value)==null||s.stop()}),(s,l)=>{const m=v("t-step-item"),f=v("t-steps"),M=v("t-input"),U=v("t-form-item"),w=v("t-alert"),S=v("t-icon"),K=v("t-button"),re=v("t-progress"),ye=v("t-loading"),he=v("t-radio"),ce=v("t-radio-group"),oe=v("t-radio-button"),ie=v("t-select"),ke=v("t-input-number"),be=v("t-space"),we=v("t-col"),g=v("t-row"),je=v("t-textarea"),We=v("t-form"),Ye=v("t-list-item-meta"),el=v("t-list-item"),ll=v("t-list");return c(),k("div",null,[o("div",Zl,[o("div",Ql,[e(f,{layout:"vertical",style:{"margin-top":"16px"},current:r.value,status:"process",readonly:""},{default:a(()=>[e(m,{title:"åŸºæœ¬ä¿¡æ¯",content:"å¡«å†™å®ä¾‹åç§°"}),e(m,{title:"ä¸Šä¼ æ•´åˆåŒ…",content:"ä¸Šä¼ æœåŠ¡ç«¯ Zip åŒ…"}),e(m,{title:"æ ¸å¿ƒé…ç½®",content:"ç¡®è®¤å¯åŠ¨çš„æœåŠ¡ç«¯æ ¸å¿ƒ"}),e(m,{title:"Java ç¯å¢ƒ",content:"é…ç½® Java è¿è¡Œæ—¶"}),e(m,{title:"èµ„æºé…ç½®",content:"è®¾ç½®å†…å­˜å‚æ•°"}),e(m,{title:"åˆ›å»ºå®ä¾‹",content:"æäº¤å¹¶ç­‰å¾…è§£å‹"}),e(m,{title:"å®Œæˆ",content:"æŸ¥çœ‹ç»“æœ"})]),_:1},8,["current"])]),o("div",Wl,[!B.value&&!T.value?(c(),k("div",Yl,[e(We,{ref_key:"formRef",ref:j,data:i.value,rules:Se.value,"label-align":"top",class:"step-form",onSubmit:y},{default:a(()=>[N(o("div",et,[e(U,{label:"å®ä¾‹åç§°",name:"name"},{default:a(()=>[e(M,{modelValue:i.value.name,"onUpdate:modelValue":l[0]||(l[0]=h=>i.value.name=h),placeholder:"ä¸ºä½ çš„æœåŠ¡å™¨èµ·ä¸ªåå­—"},null,8,["modelValue"])]),_:1}),e(U,{label:"å®ä¾‹è·¯å¾„",name:"path",help:"é€‰å¡«ï¼Œç•™ç©ºå°†ä½¿ç”¨é»˜è®¤è·¯å¾„"},{default:a(()=>[e(M,{modelValue:i.value.path,"onUpdate:modelValue":l[1]||(l[1]=h=>i.value.path=h),placeholder:"ä¾‹å¦‚: D:\\MyServer"},null,8,["modelValue"])]),_:1})],512),[[W,r.value===0]]),N(o("div",lt,[e(w,{theme:"info",class:"mb-4"},{message:a(()=>[...l[18]||(l[18]=[p(" è¯·ä¸Šä¼ åŒ…å«æœåŠ¡ç«¯æ–‡ä»¶çš„ ",-1),o("b",null,".zip",-1),p(" å‹ç¼©åŒ…ã€‚ä¸Šä¼ å®Œæˆåç³»ç»Ÿå°†è‡ªåŠ¨åˆ†æåŒ…å†…çš„æœåŠ¡ç«¯æ ¸å¿ƒæ–‡ä»¶ã€‚ ",-1)])]),_:1}),e(U,{label:"ä¸Šä¼ æœåŠ¡ç«¯æ•´åˆåŒ… (Zip)",name:"packageFileKey"},{default:a(()=>[o("div",tt,[o("input",{ref_key:"uploadInputRef",ref:ee,accept:".zip",type:"file",style:{display:"none"},onChange:Fe},null,544),!X.value&&!i.value.packageFileKey?(c(),O(K,{key:0,variant:"outline",onClick:ge},{icon:a(()=>[e(S,{name:"upload"})]),default:a(()=>[l[19]||(l[19]=p(" ç‚¹å‡»é€‰æ‹© Zip æ–‡ä»¶å¹¶ä¸Šä¼  ",-1))]),_:1})):b("",!0),X.value?(c(),k("div",at,[o("div",ot,"æ­£åœ¨ä¸Šä¼ : "+x(A.value)+" ("+x(ne.value)+")",1),e(re,{theme:"line",percentage:q.value},null,8,["percentage"]),l[20]||(l[20]=o("div",{class:"tip"},"åˆ«ç€æ€¥ï¼Œå–æ¯å’–å•¡â˜•ï¸...",-1))])):b("",!0),!X.value&&J.value?(c(),k("div",st,[e(ye,{text:"æ­£åœ¨åˆ†æå‹ç¼©åŒ…ç»“æ„...",size:"small"})])):b("",!0),i.value.packageFileKey&&!X.value&&!J.value?(c(),k("div",nt,[o("div",ut,[e(S,{name:"folder-zip"})]),o("div",rt,[o("div",it,x(A.value),1),o("div",dt,x(L.value.length>0?`å‘ç° ${L.value.length} ä¸ªæœåŠ¡ç«¯æ ¸å¿ƒæ–‡ä»¶`:"æœªå‘ç°æœåŠ¡ç«¯æ ¸å¿ƒæ–‡ä»¶")+" "+x(Z.value?`| æ ¹ç›®å½•: /${Z.value}`:""),1)]),e(K,{shape:"circle",variant:"text",theme:"primary",onClick:ge},{icon:a(()=>[e(S,{name:"swap"})]),_:1}),e(K,{shape:"circle",variant:"text",theme:"danger",onClick:d},{icon:a(()=>[e(S,{name:"delete"})]),_:1})])):b("",!0)])]),_:1})],512),[[W,r.value===1]]),N(o("div",vt,[L.value.length>0?(c(),k("div",ct,[e(w,{theme:"success",class:"mb-4"},{message:a(()=>[...l[21]||(l[21]=[p("æˆ‘ä»¬åœ¨å‹ç¼©åŒ…ä¸­å‘ç°äº†ä»¥ä¸‹æœåŠ¡ç«¯æ ¸å¿ƒæ–‡ä»¶ï¼Œè¯·é€‰æ‹©å“ªä¸€ä¸ªä½œä¸º",-1),o("b",null,"å¯åŠ¨æ ¸å¿ƒ",-1),p("ã€‚",-1)])]),_:1}),e(U,{label:"é€‰æ‹©å¯åŠ¨æ ¸å¿ƒ",name:"core"},{default:a(()=>[e(ce,{modelValue:i.value.core,"onUpdate:modelValue":l[2]||(l[2]=h=>i.value.core=h),class:"vertical-radio-group"},{default:a(()=>[(c(!0),k(Re,null,Be(L.value,h=>(c(),k("div",{key:h,class:"jar-option-item"},[e(he,{value:h},{default:a(()=>[p(x(h),1)]),_:2},1032,["value"])]))),128))]),_:1},8,["modelValue"])]),_:1})])):(c(),k("div",mt,[e(w,{theme:"warning",class:"mb-4"},{message:a(()=>[...l[22]||(l[22]=[p("åœ¨ä¸Šä¼ çš„åŒ…ä¸­æœªå‘ç°æœåŠ¡ç«¯æ ¸å¿ƒæ–‡ä»¶ã€‚è¯·åœ¨æ­¤å¤„ä¸‹è½½ä¸€ä¸ªæœåŠ¡ç«¯æ ¸å¿ƒã€‚",-1)])]),_:1}),e(U,{label:"è¡¥å……æœåŠ¡ç«¯æ ¸å¿ƒ"},{default:a(()=>[e(ce,{modelValue:$.value,"onUpdate:modelValue":l[3]||(l[3]=h=>$.value=h),variant:"default-filled"},{default:a(()=>[e(oe,{value:"online"},{default:a(()=>[...l[23]||(l[23]=[p("åœ¨çº¿ä¸‹è½½æ ¸å¿ƒ",-1)])]),_:1}),e(oe,{disabled:"",value:"manual"},{default:a(()=>[...l[24]||(l[24]=[p("è‡ªè¡Œä¸Šä¼ (ä¸æ”¯æŒ)",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),$.value==="online"?(c(),k("div",pt,[e(U,{label:"é€‰æ‹©æœåŠ¡ç«¯æ ¸å¿ƒ",name:"coreUrl"},{default:a(()=>[o("div",ft,[e(K,{variant:"outline",onClick:l[4]||(l[4]=h=>H.value=!0)},{icon:a(()=>[e(S,{name:"cloud-download"})]),default:a(()=>[l[25]||(l[25]=p(" æ‰“å¼€æ ¸å¿ƒåº“ ",-1))]),_:1}),i.value.core&&$.value==="online"?(c(),k("div",_t,[o("div",gt,[e(S,{name:"check-circle-filled"})]),o("div",yt,[o("div",ht,x(i.value.core),1),l[26]||(l[26]=o("div",{class:"core-url"},"å°†åœ¨åˆ›å»ºæ—¶è‡ªåŠ¨ä¸‹è½½",-1))])])):b("",!0)])]),_:1})])):b("",!0),$.value==="manual"?(c(),k("div",kt,[l[27]||(l[27]=o("div",{class:"tip-text"},"è¯·åœ¨æ•´åˆåŒ…è§£å‹åæ‰‹åŠ¨æ”¾å…¥æ ¸å¿ƒï¼Œæˆ–åœ¨æ­¤å¤„ä¸å¡«å†™ç­‰å¾…åˆ›å»ºåæ‰‹åŠ¨ä¸Šä¼ ã€‚",-1)),e(w,{theme:"error",message:"æ­¤æ¨¡å¼ä¸‹å»ºè®®ç¡®ä¿å‹ç¼©åŒ…å†…åŒ…å«æ ¸å¿ƒï¼Œæˆ–è€…ä½¿ç”¨åœ¨çº¿ä¸‹è½½åŠŸèƒ½ã€‚"})])):b("",!0)]))],512),[[W,r.value===2]]),N(o("div",bt,[e(w,{theme:"info",title:"å¦‚ä½•é€‰æ‹© Java ç‰ˆæœ¬?",class:"java-alert"},{message:a(()=>[...l[28]||(l[28]=[o("p",null,"ä¸åŒçš„ Minecraft ç‰ˆæœ¬éœ€è¦ä¸åŒçš„ Java ç‰ˆæœ¬ã€‚",-1),o("ul",null,[o("li",null,[p("å»ºè®®ç›´æ¥ä½¿ç”¨ "),o("b",null,"æ¨èç‰ˆæœ¬"),p(" è¶…å‡ºç‰ˆæœ¬å¯èƒ½å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ã€‚")]),o("li",null,"MC 26.1 - æœ€æ–°ç‰ˆ: éœ€è¦ Java 25 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚"),o("li",null,"MC 1.20.5 - 1.21.10: éœ€è¦ Java 21 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚"),o("li",null,"MC 1.18 - 1.20.4: éœ€è¦ Java 17 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚"),o("li",null,"MC 1.17/1.17.1: éœ€è¦ Java 16ã€‚"),o("li",null,"MC 1.13 - 1.16.5: éœ€è¦ Java 8 / 11ã€‚"),o("li",null,"MC 1.12.2 åŠä»¥ä¸‹: éœ€è¦ Java 8ã€‚")],-1)])]),_:1}),e(U,{label:"Java æ¥æº",name:"java"},{default:a(()=>[o("div",wt,[e(ce,{modelValue:G.value,"onUpdate:modelValue":l[5]||(l[5]=h=>G.value=h),variant:"default-filled"},{default:a(()=>[e(oe,{value:"online"},{default:a(()=>[...l[29]||(l[29]=[p("åœ¨çº¿ä¸‹è½½",-1)])]),_:1}),e(oe,{value:"local"},{default:a(()=>[...l[30]||(l[30]=[p("æœ¬æœº Java",-1)])]),_:1}),e(oe,{value:"env"},{default:a(()=>[...l[31]||(l[31]=[p("ç¯å¢ƒå˜é‡",-1)])]),_:1}),e(oe,{value:"custom"},{default:a(()=>[...l[32]||(l[32]=[p("è‡ªå®šä¹‰è·¯å¾„",-1)])]),_:1})]),_:1},8,["modelValue"]),o("div",Vt,[G.value==="online"?(c(),k("div",Mt,[e(ie,{modelValue:n.value,"onUpdate:modelValue":l[6]||(l[6]=h=>n.value=h),options:D.value,placeholder:"è¯·é€‰æ‹© Java ç‰ˆæœ¬"},null,8,["modelValue","options"])])):b("",!0),G.value==="local"?(c(),k("div",Ut,[e(ie,{modelValue:Q.value,"onUpdate:modelValue":l[7]||(l[7]=h=>Q.value=h),options:ue.value,placeholder:"è¯·é€‰æ‹© Java"},null,8,["modelValue","options"]),e(K,{variant:"text",onClick:l[8]||(l[8]=h=>le(!0))},{default:a(()=>[...l[33]||(l[33]=[p("åˆ·æ–°",-1)])]),_:1})])):b("",!0),G.value==="env"?(c(),k("div",St,[e(M,{"model-value":"java",readonly:"",disabled:""})])):b("",!0),G.value==="custom"?(c(),k("div",Ct,[e(M,{modelValue:Q.value,"onUpdate:modelValue":l[9]||(l[9]=h=>Q.value=h),placeholder:"C:\\Path\\To\\java.exe"},null,8,["modelValue"])])):b("",!0)])])]),_:1})],512),[[W,r.value===3]]),N(o("div",$t,[e(g,{gutter:[16,24]},{default:a(()=>[e(we,{xs:12,span:6},{default:a(()=>[e(U,{label:"æœ€å°å†…å­˜",name:"minM"},{default:a(()=>[e(be,{size:8,style:{width:"100%"}},{default:a(()=>[e(ke,{modelValue:pe.value,"onUpdate:modelValue":l[10]||(l[10]=h=>pe.value=h),min:0,"decimal-places":te.value==="GB"?1:0,placeholder:"Xms",theme:"column",style:{width:"100%"}},null,8,["modelValue","decimal-places"]),e(ie,{modelValue:te.value,"onUpdate:modelValue":l[11]||(l[11]=h=>te.value=h),options:me,clearable:!1,style:{width:"80px"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(we,{xs:12,span:6},{default:a(()=>[e(U,{label:"æœ€å¤§å†…å­˜",name:"maxM"},{default:a(()=>[e(be,{size:8,style:{width:"100%"}},{default:a(()=>[e(ke,{modelValue:fe.value,"onUpdate:modelValue":l[12]||(l[12]=h=>fe.value=h),min:0,"decimal-places":ae.value==="GB"?1:0,placeholder:"Xmx",theme:"column",style:{width:"100%"}},null,8,["modelValue","decimal-places"]),e(ie,{modelValue:ae.value,"onUpdate:modelValue":l[13]||(l[13]=h=>ae.value=h),options:me,clearable:!1,style:{width:"80px"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(U,{label:"JVM å‚æ•°",name:"args",style:{"margin-top":"16px"}},{default:a(()=>[e(je,{modelValue:i.value.args,"onUpdate:modelValue":l[14]||(l[14]=h=>i.value.args=h),placeholder:"-XX:+UseG1GC"},null,8,["modelValue"])]),_:1})],512),[[W,r.value===4]]),e(U,{class:"step-actions",style:{"margin-top":"16px"}},{default:a(()=>[r.value>0?(c(),O(K,{key:0,theme:"default",onClick:_e},{default:a(()=>[...l[34]||(l[34]=[p("ä¸Šä¸€æ­¥",-1)])]),_:1})):b("",!0),r.value<4?(c(),O(K,{key:1,type:"button",loading:X.value||J.value,onClick:$e},{default:a(()=>[...l[35]||(l[35]=[p("ä¸‹ä¸€æ­¥",-1)])]),_:1},8,["loading"])):b("",!0),r.value===4?(c(),O(K,{key:2,theme:"primary",type:"submit",loading:R.value},{default:a(()=>[...l[36]||(l[36]=[p("æäº¤åˆ›å»º",-1)])]),_:1},8,["loading"])):b("",!0)]),_:1})]),_:1},8,["data","rules"])])):b("",!0),B.value?(c(),k("div",xt,[o("div",Ft,"æ­£åœ¨åˆ›å»ºæ•´åˆåŒ…å®ä¾‹ ("+x(P.value)+")",1),l[37]||(l[37]=o("p",null,"æ­£åœ¨è§£å‹æ–‡ä»¶å¹¶é…ç½®ç¯å¢ƒ...",-1)),e(re,{theme:"plump",percentage:V.value,label:`${V.value.toFixed(2)}%`},null,8,["percentage","label"]),o("div",{ref_key:"logContainerRef",ref:z,class:"log-container"},[e(ll,{split:!0},{default:a(()=>[(c(!0),k(Re,null,Be(E.value,(h,tl)=>(c(),O(el,{key:tl},{default:a(()=>[e(Ye,{description:`[${h.time}] ${h.message}`},null,8,["description"])]),_:2},1024))),128))]),_:1})],512)])):b("",!0),T.value?(c(),k("div",Jt,[e(S,{class:"result-success-icon",name:"check-circle"}),l[40]||(l[40]=o("div",{class:"result-success-title"},"æ•´åˆåŒ…æœåŠ¡å™¨å·²éƒ¨ç½²æˆåŠŸ",-1)),l[41]||(l[41]=o("div",{class:"result-success-describe"},"æ–‡ä»¶å·²è§£å‹ï¼Œç¯å¢ƒå·²é…ç½®å°±ç»ª",-1)),o("div",null,[e(K,{onClick:l[15]||(l[15]=h=>se(ve)("/instance/list"))},{default:a(()=>[...l[38]||(l[38]=[p(" è¿”å›æœåŠ¡ç«¯åˆ—è¡¨ ",-1)])]),_:1}),e(K,{theme:"default",onClick:l[16]||(l[16]=h=>se(ve)(`/instance/console/${P.value}`))},{default:a(()=>[...l[39]||(l[39]=[p(" å‰å¾€æ§åˆ¶å° ",-1)])]),_:1})])])):b("",!0)])]),e(Oe,{visible:H.value,"onUpdate:visible":l[17]||(l[17]=h=>H.value=h),onConfirm:t},null,8,["visible"])])}}}),jt=Ie(Kt,[["__scopeId","data-v-955e19e9"]]),Va=Me({__name:"index",setup(Ue){const I=u(1);return(j,Y)=>{const r=v("t-tab-panel"),R=v("t-tabs"),B=v("t-card");return c(),k("div",null,[e(B,{direction:"vertical"},{default:a(()=>[e(R,{modelValue:I.value,"onUpdate:modelValue":Y[0]||(Y[0]=T=>I.value=T)},{default:a(()=>[e(r,{value:1,label:"å¿«é€Ÿæ¨¡å¼","destroy-on-hide":!1},{default:a(()=>[e(Dl,{style:{margin:"10px"}})]),_:1}),e(r,{value:2,label:"ä¸Šä¼ æ•´åˆåŒ…æ¨¡å¼","destroy-on-hide":!1},{default:a(()=>[e(jt,{style:{margin:"10px"}})]),_:1}),e(r,{value:3,label:"è‡ªå®šä¹‰æ¨¡å¼","destroy-on-hide":!1},{default:a(()=>[e(Hl,{style:{margin:"10px"}})]),_:1})]),_:1},8,["modelValue"])]),_:1})])}}});export{Va as default};
