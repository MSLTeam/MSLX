import{u as H,a as F}from"./vue-router.CTuarHf7.js";import{u as j,_ as C,a as G,b as Y,p as K,T as O}from"./index.Dh86awbc.js";import{M,N as W}from"./tdesign-vue-next.DWJvSscW.js";import{D as L,F as g,W as Z,K as A,R as U,b0 as n,aX as h,aY as w,G as t,b2 as a,a$ as o,b1 as J,b6 as Q,ao as i,aZ as ee,ap as x,b5 as te}from"./index.BbdIPky0.js";import{a2 as oe,a3 as se,a4 as ae}from"./tdesign-icons-vue-next.Q06Erwsy.js";import"./pinia.DE9DXmFR.js";import"./pinia-plugin-persistedstate.n2tMOXAx.js";import"./tvision-color.BU_YHHaJ.js";import"./chroma-js.Cmk4elvR.js";import"./bezier-easing.jp9ayU57.js";import"./lodash.B5_zCkFd.js";import"./axios.R-lXtGyY.js";import"./qs.CnepGyXr.js";import"./side-channel.Bf-JVZLg.js";import"./es-errors.CFxpeikN.js";import"./object-inspect.CD-SYzlK.js";import"./cron-parser.BqMfRICj.js";import"./luxon.BVaPVz1w.js";import"./side-channel-list.CQN2BsdT.js";import"./side-channel-map.BJ69Knz3.js";import"./get-intrinsic.CAdfHqt8.js";import"./es-object-atoms.Ditt1eQ6.js";import"./math-intrinsics.Cv-yPkyD.js";import"./gopd.fcd2-aIC.js";import"./es-define-property.bDCdrV83.js";import"./has-symbols.BaUvM3gb.js";import"./get-proto.Cbri-GHQ.js";import"./dunder-proto.q7lw_6_J.js";import"./call-bind-apply-helpers.BxcZtPLH.js";import"./function-bind.BbkWVFrm.js";import"./hasown.ckq0ukzO.js";import"./call-bound.BO70H6sD.js";import"./side-channel-weakmap.BkoVKe_V.js";import"./nprogress.CMq2Rk2a.js";import"./core-js-pure.DghWRT_o.js";import"./crelt.C8TCjufn.js";import"./style-mod.Bc2inJdb.js";import"./w3c-keyname.Vcq4gwWv.js";import"./lodash-es.ClUTdtmA.js";import"./mitt.DJ65BbbF.js";import"./sortablejs.C83syoBY.js";const ne={key:0,class:"loading-wrapper"},le={key:1,class:"input-group"},ie={class:"check-container"},re={class:"reset-guide"},de={class:"guide-item"},ue={class:"guide-title"},me={class:"guide-item"},ce={class:"guide-title"},pe="remembered_url",V="remembered_username",_e=L({__name:"Login",setup($){const d=j(),f=H(),p=F(),s=g(!1),_=g(!1),u=g(!1),m=g(!0),c=g(!1),l=Z({url:localStorage.getItem(pe)||"",username:localStorage.getItem(V)||"",password:"",checked:!!localStorage.getItem(V)}),R=g(),I=A(()=>{const v={username:[{required:!0,message:"è¯·è¾“å…¥ç”¨æˆ·å",type:"error"}],password:[{required:!0,message:"è¯·è¾“å…¥å¯†ç ",type:"error"}]};return u.value||(v.url=[{required:!0,message:"è¯·è¾“å…¥æœåŠ¡å™¨åœ°å€",type:"error"}]),v}),z=async()=>{m.value=!0,await d.checkConnection("")?(u.value=!0,l.url=""):u.value=!1,m.value=!1},D=async({validateResult:v})=>{if(v===!0){s.value=!0;try{await d.login({url:u.value?"":l.url,username:l.username,password:l.password,checked:l.checked}),M.success("ç™»å½•æˆåŠŸ");const e=p.query.redirect,y=e?decodeURIComponent(e):"/dashboard/base";f.push(y),W.success({content:`æ¬¢è¿å›æ¥ï¼${d.userInfo.name}`,title:"MSLX æ§åˆ¶å°"})}catch(e){M.error(e.message||"ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥è´¦å·å¯†ç ")}finally{s.value=!1}}};return U(()=>{z()}),(v,e)=>{const y=n("t-loading"),b=n("t-icon"),S=n("t-input"),k=n("t-form-item"),E=n("t-checkbox"),q=n("t-link"),B=n("t-button"),P=n("t-form"),T=n("t-divider"),X=n("t-alert"),N=n("t-dialog");return w(),h("div",null,[t(P,{ref_key:"form",ref:R,class:"login-form",data:l,rules:I.value,"label-width":"0",onSubmit:D},{default:a(()=>[m.value?(w(),h("div",ne,[t(y,{text:"æ­£åœ¨è¿æ¥æœåŠ¡...",size:"small"})])):(w(),h("div",le,[u.value?Q("",!0):(w(),J(k,{key:0,name:"url"},{default:a(()=>[t(S,{modelValue:l.url,"onUpdate:modelValue":e[0]||(e[0]=r=>l.url=r),size:"large",placeholder:"æœåŠ¡å™¨åœ°å€ (å¦‚ localhost:1027)",class:"glass-input"},{"prefix-icon":a(()=>[t(b,{name:"server"})]),_:1},8,["modelValue"])]),_:1})),t(k,{name:"username"},{default:a(()=>[t(S,{modelValue:l.username,"onUpdate:modelValue":e[1]||(e[1]=r=>l.username=r),size:"large",placeholder:"è¯·è¾“å…¥ç”¨æˆ·å",class:"glass-input"},{"prefix-icon":a(()=>[t(b,{name:"user"})]),_:1},8,["modelValue"])]),_:1}),t(k,{name:"password"},{default:a(()=>[t(S,{modelValue:l.password,"onUpdate:modelValue":e[3]||(e[3]=r=>l.password=r),size:"large",type:_.value?"text":"password",placeholder:"è¯·è¾“å…¥å¯†ç ",class:"glass-input"},{"prefix-icon":a(()=>[t(b,{name:"lock-on"})]),"suffix-icon":a(()=>[t(b,{name:_.value?"browse":"browse-off",style:{cursor:"pointer"},onClick:e[2]||(e[2]=r=>_.value=!_.value)},null,8,["name"])]),_:1},8,["modelValue","type"])]),_:1})])),o("div",ie,[t(E,{modelValue:l.checked,"onUpdate:modelValue":e[4]||(e[4]=r=>l.checked=r)},{default:a(()=>[...e[7]||(e[7]=[i("è®°ä½ç”¨æˆ·å",-1)])]),_:1},8,["modelValue"]),t(q,{theme:"primary",hover:"color",onClick:e[5]||(e[5]=r=>c.value=!0)},{default:a(()=>[...e[8]||(e[8]=[i(" å¿˜è®°å¯†ç ï¼Ÿ ",-1)])]),_:1})]),t(k,{class:"btn-container"},{default:a(()=>[t(B,{block:"",size:"large",type:"submit",class:"login-btn",loading:s.value},{default:a(()=>[...e[9]||(e[9]=[i(" ç™» å½• ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["data","rules"]),t(N,{visible:c.value,"onUpdate:visible":e[6]||(e[6]=r=>c.value=r),header:"æ‰¾å›æˆ–é‡ç½®å¯†ç ",footer:!1,width:"480px",attach:"body"},{default:a(()=>[o("div",re,[o("div",de,[o("div",ue,[t(b,{name:"user-talk"}),e[10]||(e[10]=i(" æ–¹å¼ä¸€ï¼šè”ç³»ç®¡ç†å‘˜ ",-1))]),e[11]||(e[11]=o("p",{class:"guide-desc"}," å¦‚æœç³»ç»Ÿä¸­å­˜åœ¨å…¶ä»–ç®¡ç†å‘˜è´¦å·ï¼Œè¯·è”ç³»å¯¹åº”äººå‘˜ååŠ©æ‚¨åœ¨åå°é‡ç½®å¯†ç ã€‚ ",-1))]),t(T,{dashed:"",style:{margin:"16px 0"}}),o("div",me,[o("div",ce,[t(b,{name:"refresh"}),e[12]||(e[12]=i(" æ–¹å¼äºŒï¼šåˆå§‹åŒ–é»˜è®¤è´¦æˆ· ",-1))]),e[14]||(e[14]=o("p",{class:"guide-desc"}," è‹¥æ— æ³•è”ç³»å…¶ä»–ç®¡ç†å‘˜ï¼Œè¯·åœ¨æœåŠ¡å™¨ç«¯åˆ é™¤ä»¥ä¸‹é…ç½®æ–‡ä»¶ï¼š ",-1)),e[15]||(e[15]=o("div",{class:"code-block"}," DaemonData/Configs/UserList.json ",-1)),o("p",null,[t(X,{style:{"margin-top":"10px"}},{default:a(()=>[...e[13]||(e[13]=[i("æ“ä½œæç¤ºï¼šåˆ é™¤è¯¥æ–‡ä»¶åï¼Œè¯·",-1),o("strong",null,"é‡å¯å®ˆæŠ¤è¿›ç¨‹",-1),i("ã€‚ç³»ç»Ÿå°†è‡ªåŠ¨é‡æ–°åˆ›å»ºåŒ…å«é»˜è®¤è´¦å·å¯†ç çš„åˆå§‹æ–‡ä»¶ã€‚",-1)])]),_:1})])])])]),_:1},8,["visible"])])}}}),ge=C(_e,[["__scopeId","data-v-b3018bdf"]]),fe={class:"login-header"},ve={class:"logo"},be={class:"operations-container"},we=L({__name:"Header",setup($){const d=G(),f=()=>{d.updateConfig({showSettingPanel:!0})},p=()=>{window.open("https://github.com/MSLTeam/MSLX")},s=()=>{window.open("https://www.mslmc.cn")};return(_,u)=>{const m=n("t-icon"),c=n("t-button");return w(),h("header",fe,[o("span",ve,[o("img",{src:Y,class:ee(`${x(K)}-side-nav-logo-img`),alt:"logo"},null,2),u[0]||(u[0]=o("span",null," MSLX ç®¡ç†ä¸­å¿ƒ ",-1))]),o("div",be,[t(c,{theme:"default",shape:"square",variant:"text",onClick:p},{default:a(()=>[t(m,{name:"logo-github",class:"icon"})]),_:1}),t(c,{theme:"default",shape:"square",variant:"text",onClick:s},{default:a(()=>[t(m,{name:"help-circle",class:"icon"})]),_:1}),t(c,{theme:"default",shape:"square",variant:"text",onClick:f},{default:a(()=>[t(m,{name:"setting",class:"icon"})]),_:1})])])}}}),he=C(we,[["__scopeId","data-v-e76b0337"]]),ke={class:"login-wrapper"},xe={class:"login-content"},ye={class:"login-container"},Se={class:"copyright"},Ce={class:"welcome-content"},Le={class:"account-card"},$e={class:"info-row"},Me={class:"label"},Ve={class:"info-row"},Ue={class:"label"},Re={name:"LoginIndex"},Ie=L({...Re,setup($){const d=g(!1),f=()=>{d.value=!1;const p=new URL(window.location.href);p.searchParams.delete("initialize"),window.history.replaceState({},"",p)};return U(()=>{new URLSearchParams(window.location.search).get("initialize")==="true"&&(d.value=!0)}),(p,s)=>{const _=n("t-alert"),u=n("t-button"),m=n("t-dialog");return w(),h("div",ke,[t(he,{class:"login-header-fixed"}),o("div",xe,[o("div",ye,[s[1]||(s[1]=o("div",{class:"title-container"},[o("h1",{class:"title"},"è¿æ¥åˆ° MSLX"),o("p",{class:"sub-title"},"ç½‘é¡µç®¡ç†ä¸­å¿ƒ")],-1)),t(ge),o("footer",Se,"Copyright @ 2021-"+te(new Date().getFullYear())+" MSLTeam",1)])]),t(O,{class:"tdesign-setting-outside"}),t(m,{visible:d.value,"onUpdate:visible":s[0]||(s[0]=c=>d.value=c),footer:!1,"close-btn":!0,width:"480px",attach:"body",class:"welcome-dialog","on-close":f},{header:a(()=>[...s[2]||(s[2]=[o("div",{class:"dialog-header-row"},[o("span",{class:"emoji-icon"},"ğŸ‰"),o("span",{class:"header-text"},"æ¬¢è¿ä½¿ç”¨ MSLX å¼€æœå™¨")],-1)])]),default:a(()=>[o("div",Ce,[t(_,{theme:"success",class:"security-alert"},{message:a(()=>[...s[3]||(s[3]=[i(" æ‚¨ä¼¼ä¹æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼Ÿè¯·æŸ¥é˜…ä»¥ä¸‹ä¿¡æ¯ï¼Œç„¶åå¼€å§‹äº«å—æ‚¨çš„MCå¼€æœä¹‹æ—…å§ï½ ",-1)])]),_:1}),o("div",Le,[o("div",$e,[o("span",Me,[t(x(oe)),s[4]||(s[4]=i(" é»˜è®¤è´¦æˆ·:",-1))]),s[5]||(s[5]=o("span",{class:"value highlight"},"mslx",-1))]),o("div",Ve,[o("span",Ue,[t(x(se)),s[6]||(s[6]=i(" é»˜è®¤å¯†ç :",-1))]),s[7]||(s[7]=o("span",{class:"value mono"},"è¯·åœ¨MSLXå®ˆæŠ¤è¿›ç¨‹ç«¯æ§åˆ¶å°æŸ¥çœ‹",-1))])]),t(_,{theme:"warning",class:"security-alert"},{message:a(()=>[...s[8]||(s[8]=[i(" å®‰å…¨æé†’ï¼šè¯·ç™»å½•å",-1),o("b",null,[o("u",null,"ç«‹å³ä¿®æ”¹é»˜è®¤çš„è´¦æˆ·åå’Œå¯†ç ")],-1),i("ï¼Œä¿éšœæ‚¨çš„æœåŠ¡å®‰å…¨ã€‚ ",-1)])]),_:1}),t(u,{block:"",theme:"primary",size:"large",variant:"base",onClick:f},{icon:a(()=>[t(x(ae))]),default:a(()=>[s[9]||(s[9]=i(" æˆ‘å·²çŸ¥æ™“ï¼Œç«‹å³ç™»å½• ",-1))]),_:1})])]),_:1},8,["visible"])])}}}),ht=C(Ie,[["__scopeId","data-v-ddb2299a"]]);export{ht as default};
