import{D as Se,F as i,R as Pe,K as ge,P as Ee,aa as Xe,b0 as c,aX as h,aY as d,a$ as o,G as e,b2 as t,b6 as w,ak as W,al as te,ao as f,b5 as x,ap as re,be as ol,b1 as Y,O as Le,b3 as Ge,ba as qe,bb as De,V as Ae,W as sl}from"./index.CWeK9ocq.js";import{u as He,c as ye,g as he,i as Oe,h as Ne,j as Ze,_ as ze,k as nl}from"./index.BNRycSAt.js";import{S as Qe,g as We,a as Ye}from"./localJava.C2iXeGFv.js";import{u as el,a as Te}from"./instance.CfXZeoX6.js";import{M as _}from"./tdesign-vue-next.ClIZ97Cx.js";import"./core-js-pure.DN77qAGa.js";import"./crelt.C8TCjufn.js";import"./style-mod.Bc2inJdb.js";import"./w3c-keyname.Vcq4gwWv.js";import"./pinia.CwCJD8HV.js";import"./pinia-plugin-persistedstate_561243483b11dd07f5acf9e797fda690.n2tMOXAx.js";import"./vue-router.f8VyOqpO.js";import"./tvision-color.COTpcftn.js";import"./chroma-js.RLxBGt-u.js";import"./bezier-easing.qwUZoLR4.js";import"./lodash.C2dUGbaG.js";import"./axios.R-lXtGyY.js";import"./qs.oW5Y_jwR.js";import"./side-channel.CNE1lXV6.js";import"./es-errors.CFxpeikN.js";import"./object-inspect.C4p7aaXq.js";import"./cron-parser.BHsRiybt.js";import"./luxon.BVaPVz1w.js";import"./side-channel-list.Mptt8X3N.js";import"./side-channel-map.DAzd880l.js";import"./get-intrinsic.CAdfHqt8.js";import"./es-object-atoms.Ditt1eQ6.js";import"./math-intrinsics.Cv-yPkyD.js";import"./gopd.fcd2-aIC.js";import"./es-define-property.bDCdrV83.js";import"./has-symbols.BaUvM3gb.js";import"./get-proto.Cbri-GHQ.js";import"./dunder-proto.q7lw_6_J.js";import"./call-bind-apply-helpers.BxcZtPLH.js";import"./function-bind.BbkWVFrm.js";import"./hasown.ckq0ukzO.js";import"./call-bound.BO70H6sD.js";import"./side-channel-weakmap.DJ6_7mky.js";import"./nprogress.BFWi6Yo1.js";import"./tdesign-icons-vue-next.o89AUH_k.js";import"./lodash-es.ClUTdtmA.js";import"./mitt.DJ65BbbF.js";import"./sortablejs.C83syoBY.js";const ul={class:"main-layout-container"},rl={class:"steps-aside"},il={class:"main-content"},cl={key:0,class:"form-step-container"},vl={class:"step-content"},dl={class:"step-content"},ml={style:{width:"100%"}},pl={class:"java-option-panel"},fl={key:0,class:"flex-row"},_l={class:"tip"},gl={key:1,class:"flex-row"},yl={key:2},hl={key:3},kl={class:"step-content"},wl={key:0,class:"online-select-area"},bl={class:"select-core-wrapper"},Vl={key:0,class:"selected-core-card"},Ml={class:"core-icon"},Ul={class:"core-info"},Cl={class:"core-filename"},Sl={key:1,class:"online-select-area"},$l={class:"select-core-wrapper"},xl={key:1,class:"uploading-state"},Fl={class:"core-filename"},Jl={key:2,class:"selected-core-card"},Kl={class:"core-icon"},jl={class:"core-info"},Rl={class:"core-filename"},Bl={class:"core-url"},Il={key:2,class:"online-select-area"},Ll={class:"step-content"},Gl={key:1,class:"step-content creation-progress"},zl={class:"progress-title"},Tl={class:"log-time"},Pl={class:"log-message"},El={key:2,class:"result-success"},Xl={class:"result-success-title"},ql=Se({__name:"QuickMode",setup($e){const j=He(),R=i(null),oe=el(),u=i(0),B=i(!1),I=i(!1),P=i(!1),Q=i(0),V=i([]),J=i(null),L=i(null),A=i(null),U=i("online"),H=i(!1),G=i(null),E=i(!1),O=i(0),K=i(""),q=i(""),X=i("online"),N=i([]),ie=i([]),z=i(""),D=i(""),ce=async(v=!1)=>{try{v&&_.info("æ­£åœ¨åˆ·æ–°Javaç‰ˆæœ¬åˆ—è¡¨(é‡æ–°æ‰«æè€—æ—¶è¾ƒé•¿)...");const a=await We(j.userInfo.systemInfo.osType.toLowerCase().replace("os",""),j.userInfo.systemInfo.osArchitecture.toLowerCase());a&&Array.isArray(a)&&(N.value=a.map(g=>({label:`Java ${g}`,value:g})),N.value.length>0&&!z.value&&(z.value=N.value[1].value)),ie.value=(await Ye(v)).map(g=>({label:`Java ${g.version}${g.is64Bit?"":" (32ä½)"} (${g.vendor} | ${g.path})`,value:g.path})),ie.value.length>0&&(D.value=ie.value[0].value),v&&_.success("å·²åˆ·æ–°Javaç‰ˆæœ¬åˆ—è¡¨")}catch(a){_.warning("è·å–åœ¨çº¿Javaç‰ˆæœ¬å¤±è´¥"+a.message)}};Pe(()=>{ce()});const n=i({name:"æ–°å»ºæœåŠ¡å™¨",path:"",java:"",core:"",coreUrl:"",coreSha256:"",coreFileKey:"",packageFileKey:"",minM:1024,maxM:4096,args:""}),ee=[{label:"GB",value:"GB"},{label:"MB",value:"MB"}],se=i("GB"),r=i("GB"),ne=ge({get:()=>se.value==="GB"?n.value.minM/1024:n.value.minM,set:v=>{n.value.minM=se.value==="GB"?Math.round(v*1024):v}}),ue=ge({get:()=>r.value==="GB"?n.value.maxM/1024:n.value.maxM,set:v=>{n.value.maxM=r.value==="GB"?Math.round(v*1024):v}});Ee([X,z,D],([v,a,g])=>{var C;v==="env"?n.value.java="java":v==="custom"||v==="local"?n.value.java=g:v==="online"&&(n.value.java=a?`MSLX://Java/${a}`:""),n.value.java&&((C=R.value)==null||C.validate({fields:["java"]}))},{immediate:!0});const ke=ge(()=>({name:[{required:!0,message:"å®ä¾‹åç§°ä¸èƒ½ä¸ºç©º",trigger:"blur"}],java:[{required:!0,message:"è¯·é…ç½® Java ç¯å¢ƒ",trigger:"change"}],core:[{required:!0,message:"æ ¸å¿ƒåç§°/æ–‡ä»¶ä¸èƒ½ä¸ºç©º",trigger:"change"}],coreUrl:[{validator:v=>{if(U.value==="online"){if(!v)return{result:!1,message:"è¯·é€‰æ‹©ä¸€ä¸ªæœåŠ¡ç«¯æ ¸å¿ƒ",type:"error"};if(v&&!/^https?:\/\/.+/.test(v))return{result:!1,message:"ä¸‹è½½åœ°å€å¿…é¡»ä»¥ http(s) å¼€å¤´",type:"error"}}return!0},trigger:"change"}],coreFileKey:[{validator:v=>U.value==="manual"&&!v?{result:!1,message:"è¯·ä¸Šä¼ æ ¸å¿ƒæ–‡ä»¶",type:"error"}:!0,trigger:"change"}],minM:[{required:!0,min:1,message:"æœ€å°å†…å­˜å¿…é¡»å¤§äº0",trigger:"blur"}],maxM:[{required:!0,min:1,message:"æœ€å¤§å†…å­˜å¿…é¡»å¤§äº0",trigger:"blur"}]})),we=[["name","path"],["java"],["core","coreUrl","coreSha256","coreFileKey"],["minM","maxM","args"]],be=()=>{u.value>0&&(u.value-=1)},xe=async()=>{if(u.value===2){if(U.value==="online"){if(!n.value.coreUrl||!n.value.core){_.warning("è¯·ç‚¹å‡»æŒ‰é’®é€‰æ‹©ä¸€ä¸ªæœåŠ¡ç«¯æ ¸å¿ƒ");return}}else if(U.value==="custom"){if(!n.value.core){_.warning("è¯·è¾“å…¥æ ¸å¿ƒæ–‡ä»¶å");return}}else if(!n.value.coreFileKey){_.warning("è¯·å…ˆä¸Šä¼ æ ¸å¿ƒæ–‡ä»¶");return}}const v=await R.value.validate();if(v===!0){u.value<3&&(u.value+=1);return}const a=new Set(we[u.value]);Object.keys(v).some(C=>a.has(C))?_.warning("è¯·æ£€æŸ¥å½“å‰æ­¥éª¤çš„è¾“å…¥"):u.value<3&&(u.value+=1)},Fe=v=>{n.value.core=v.filename,n.value.coreUrl=v.url,n.value.coreSha256=v.sha256,n.value.coreFileKey="",_.success(`å·²é€‰æ‹©: ${v.core} (${v.version})`),R.value.validate({fields:["core","coreUrl"]})},Ve=()=>{var v;(v=G.value)==null||v.click()},Je=v=>{if(v===0)return"0 B";const a=1024,g=["B","KB","MB","GB"],C=Math.floor(Math.log(v)/Math.log(a));return parseFloat((v/Math.pow(a,C)).toFixed(2))+" "+g[C]},Me=async v=>{const a=v.target;if(!a.files||a.files.length===0)return;if(n.value.coreFileKey)try{await he(n.value.coreFileKey),console.log("æ—§ä¸´æ—¶æ–‡ä»¶å·²æ¸…ç†:",n.value.coreFileKey)}catch(s){console.warn("æ¸…ç†æ—§æ–‡ä»¶å¤±è´¥ï¼Œå¯èƒ½æ–‡ä»¶å·²è¿‡æœŸ",s)}const g=a.files[0],C=g.name;n.value.core=C,n.value.coreUrl="",n.value.coreSha256="",n.value.coreFileKey="",K.value=C,q.value=Je(g.size),await Ke(g),a.value=""},Ke=async v=>{E.value=!0,O.value=0;const a=5*1024*1024,g=Math.ceil(v.size/a);try{const s=(await Oe()).uploadId;if(!s)throw new Error("æ— æ³•è·å–ä¸Šä¼ å‡­è¯");for(let y=0;y<g;y++){const S=y*a,M=Math.min(v.size,S+a),b=v.slice(S,M);await Ne(s,y,b),O.value=Math.floor((y+1)/g*100)}const m=(await Ze(s,g)).uploadId;n.value.coreFileKey=m,_.success("æ ¸å¿ƒæ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼"),R.value.validate({fields:["core","coreFileKey"]})}catch(C){console.error(C),_.error(`ä¸Šä¼ å¤±è´¥: ${C.message||"æœªçŸ¥é”™è¯¯"}`),n.value.core="",K.value="",O.value=0}finally{E.value=!1}},je=async()=>{n.value.coreFileKey&&(await he(n.value.coreFileKey),n.value.coreFileKey="",n.value.core="",K.value="",_.success("æ–‡ä»¶å·²ç§»é™¤"))},Re=async()=>{if(!(await R.value.validate()===!0)){_.warning("è¯·æ£€æŸ¥è¡¨å•æ‰€æœ‰å†…å®¹");return}B.value=!0,V.value=[];const g={...n.value,path:n.value.path||null,coreUrl:n.value.coreUrl||null,coreSha256:n.value.coreSha256||null,coreFileKey:n.value.coreFileKey||null,args:n.value.args||null};U.value==="manual"?(g.coreUrl=null,g.coreSha256=null):g.coreFileKey=null;try{const s=(await Te(g)).serverId;if(!s)throw new Error("æœåŠ¡å™¨æœªè¿”å› ServerId");L.value=s.toString(),I.value=!0,u.value=4,await Be(L.value)}catch(C){const s=C.message||"åˆ›å»ºè¯·æ±‚å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–åç«¯æœåŠ¡";_.error(s),B.value=!1}},Be=async v=>{const{baseUrl:a,token:g}=j;let C=!1;const s=new URL("/api/hubs/creationProgressHub",a||window.location.origin);s.searchParams.append("x-user-token",g),J.value=new qe().withUrl(s.toString(),{withCredentials:!1}).configureLogging(De.Information).build();const l=(m,y=null)=>{V.value.push({time:new Date().toLocaleTimeString(),message:m,progress:y}),Ae(()=>{A.value&&(A.value.scrollTop=A.value.scrollHeight)})};J.value.on("StatusUpdate",(m,y,S)=>{var M,b;m.toString()===v&&(l(y,S),S!==null&&S>=0&&(Q.value=S),S===100?(C=!0,_.success("æœåŠ¡å™¨åˆ›å»ºæˆåŠŸï¼"),(M=J.value)==null||M.stop(),I.value=!1,P.value=!0,u.value=5,B.value=!1,oe.refreshInstanceList()):S===-1&&(_.error(y||"åˆ›å»ºè¿‡ç¨‹ä¸­å‘ç”ŸæœªçŸ¥é”™è¯¯"),(b=J.value)==null||b.stop(),I.value=!1,B.value=!1,u.value=0))});try{await J.value.start(),l("å·²è¿æ¥åˆ°å®æ—¶è¿›åº¦æœåŠ¡..."),await J.value.invoke("TrackServer",v),l("å·²è®¢é˜…ä»»åŠ¡ï¼Œç­‰å¾…æœåŠ¡å™¨å“åº”...")}catch(m){C||(l(`SignalR è¿æ¥å¤±è´¥: ${m.message}`,-1),_.error("æ— æ³•è¿æ¥åˆ°å®æ—¶è¿›åº¦æœåŠ¡"),I.value=!1,B.value=!1,u.value=0)}};Xe(()=>{var v;(v=J.value)==null||v.stop()});const Ue=()=>{P.value=!1,u.value=0,n.value={...n.value,name:"æ–°å»ºæœåŠ¡å™¨",core:"",coreUrl:"",coreSha256:"",path:"",args:"",coreFileKey:""},K.value="",U.value="online",X.value="online",D.value=""};return(v,a)=>{const g=c("t-step-item"),C=c("t-steps"),s=c("t-input"),l=c("t-form-item"),m=c("t-alert"),y=c("t-radio-button"),S=c("t-radio-group"),M=c("t-select"),b=c("t-button"),$=c("t-icon"),F=c("t-progress"),ve=c("t-input-number"),de=c("t-space"),me=c("t-col"),pe=c("t-row"),Z=c("t-textarea"),T=c("t-form"),le=c("t-list-item-meta"),fe=c("t-list-item"),_e=c("t-list");return d(),h("div",null,[o("div",ul,[o("div",rl,[e(C,{layout:"vertical",style:{"margin-top":"16px"},current:u.value,status:"process",readonly:""},{default:t(()=>[e(g,{title:"åŸºæœ¬ä¿¡æ¯",content:"å¡«å†™å®ä¾‹åç§°å’Œè·¯å¾„"}),e(g,{title:"Java ç¯å¢ƒ",content:"é…ç½® Java è¿è¡Œæ—¶"}),e(g,{title:"æ ¸å¿ƒæ–‡ä»¶",content:"æŒ‡å®šæ ¸å¿ƒæ–‡ä»¶åŠä¸‹è½½"}),e(g,{title:"èµ„æºé…ç½®",content:"è®¾ç½®å†…å­˜ä¸ JVM å‚æ•°"}),e(g,{title:"åˆ›å»ºå®ä¾‹",content:"æäº¤å¹¶ç­‰å¾…åˆ›å»º"}),e(g,{title:"å®Œæˆ",content:"æŸ¥çœ‹åˆ›å»ºç»“æœ"})]),_:1},8,["current"])]),o("div",il,[!I.value&&!P.value?(d(),h("div",cl,[e(T,{ref_key:"formRef",ref:R,data:n.value,rules:ke.value,"label-align":"top",class:"step-form",onSubmit:Re},{default:t(()=>[W(o("div",vl,[e(l,{label:"å®ä¾‹åç§°",name:"name"},{default:t(()=>[e(s,{modelValue:n.value.name,"onUpdate:modelValue":a[0]||(a[0]=p=>n.value.name=p),placeholder:"ä¸ºä½ çš„æœåŠ¡å™¨èµ·ä¸ªåå­—"},null,8,["modelValue"])]),_:1}),e(l,{label:"å®ä¾‹è·¯å¾„",name:"path",help:"é€‰å¡«ï¼Œç•™ç©ºå°†ä½¿ç”¨é»˜è®¤è·¯å¾„"},{default:t(()=>[e(s,{modelValue:n.value.path,"onUpdate:modelValue":a[1]||(a[1]=p=>n.value.path=p),placeholder:"ä¾‹å¦‚: D:\\MyServer"},null,8,["modelValue"])]),_:1})],512),[[te,u.value===0]]),W(o("div",dl,[e(m,{theme:"info",title:"å¦‚ä½•é€‰æ‹© Java ç‰ˆæœ¬?",class:"java-alert"},{message:t(()=>[...a[20]||(a[20]=[o("p",null,"ä¸åŒçš„ Minecraft ç‰ˆæœ¬éœ€è¦ä¸åŒçš„ Java ç‰ˆæœ¬ã€‚",-1),o("ul",null,[o("li",null,[f("å»ºè®®ç›´æ¥ä½¿ç”¨ "),o("b",null,"æ¨èç‰ˆæœ¬"),f(" è¶…å‡ºç‰ˆæœ¬å¯èƒ½å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ã€‚")]),o("li",null,"MC 26.1 - æœ€æ–°ç‰ˆ: éœ€è¦ Java 25 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚"),o("li",null,"MC 1.20.5 - 1.21.10: éœ€è¦ Java 21 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚"),o("li",null,"MC 1.18 - 1.20.4: éœ€è¦ Java 17 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚"),o("li",null,"MC 1.17/1.17.1: éœ€è¦ Java 16ã€‚"),o("li",null,"MC 1.13 - 1.16.5: éœ€è¦ Java 8 / 11ã€‚"),o("li",null,"MC 1.12.2 åŠä»¥ä¸‹: éœ€è¦ Java 8ã€‚")],-1)])]),_:1}),e(l,{label:"Java æ¥æº",name:"java"},{default:t(()=>[o("div",ml,[e(S,{modelValue:X.value,"onUpdate:modelValue":a[2]||(a[2]=p=>X.value=p),variant:"default-filled"},{default:t(()=>[e(y,{value:"online"},{default:t(()=>[...a[21]||(a[21]=[f("åœ¨çº¿ä¸‹è½½",-1)])]),_:1}),e(y,{value:"local"},{default:t(()=>[...a[22]||(a[22]=[f("é€‰æ‹©ç”µè„‘ä¸Šçš„ Java",-1)])]),_:1}),e(y,{value:"env"},{default:t(()=>[...a[23]||(a[23]=[f("ç¯å¢ƒå˜é‡",-1)])]),_:1}),e(y,{value:"custom"},{default:t(()=>[...a[24]||(a[24]=[f("è‡ªå®šä¹‰è·¯å¾„",-1)])]),_:1})]),_:1},8,["modelValue"]),o("div",pl,[X.value==="online"?(d(),h("div",fl,[e(M,{modelValue:z.value,"onUpdate:modelValue":a[3]||(a[3]=p=>z.value=p),options:N.value,placeholder:"è¯·é€‰æ‹© Java ç‰ˆæœ¬"},null,8,["modelValue","options"]),o("div",_l," å°†ä¸‹è½½å¹¶ä½¿ç”¨ Java "+x(z.value||"?")+" "+x(re(j).userInfo.systemInfo.osType.toLowerCase().replace("os",""))+" / "+x(re(j).userInfo.systemInfo.osArchitecture.toLowerCase()),1)])):w("",!0),X.value==="local"?(d(),h("div",gl,[e(M,{modelValue:D.value,"onUpdate:modelValue":a[4]||(a[4]=p=>D.value=p),options:ie.value,placeholder:"è¯·é€‰æ‹© Java ç‰ˆæœ¬"},null,8,["modelValue","options"]),e(b,{variant:"outline",theme:"primary",onClick:a[5]||(a[5]=p=>ce(!0))},{default:t(()=>[...a[25]||(a[25]=[f("é‡æ–°æ‰«æ",-1)])]),_:1})])):w("",!0),X.value==="env"?(d(),h("div",yl,[e(s,{"model-value":"java",readonly:"",disabled:""}),a[26]||(a[26]=o("div",{class:"tip"},"å°†ä½¿ç”¨ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­çš„ java å‘½ä»¤",-1))])):w("",!0),X.value==="custom"?(d(),h("div",hl,[e(s,{modelValue:D.value,"onUpdate:modelValue":a[6]||(a[6]=p=>D.value=p),placeholder:"ä¾‹å¦‚: C:\\Program Files\\Java\\jdk-17\\bin\\java.exe"},null,8,["modelValue"])])):w("",!0)])])]),_:1})],512),[[te,u.value===1]]),W(o("div",kl,[e(l,{label:"é€‰æ‹©æ‚¨çš„Minecraftå¼€æœä½¿ç”¨çš„æœåŠ¡ç«¯æ ¸å¿ƒ"},{default:t(()=>[e(S,{modelValue:U.value,"onUpdate:modelValue":a[7]||(a[7]=p=>U.value=p),variant:"default-filled"},{default:t(()=>[e(y,{value:"online"},{default:t(()=>[...a[27]||(a[27]=[f("åœ¨çº¿ä¸‹è½½ (æ¨è)",-1)])]),_:1}),e(y,{value:"manual"},{default:t(()=>[...a[28]||(a[28]=[f("é€‰æ‹©æœ¬åœ°æ–‡ä»¶",-1)])]),_:1}),e(y,{value:"custom"},{default:t(()=>[...a[29]||(a[29]=[f("è‡ªå®šä¹‰æ–‡ä»¶å",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),U.value==="online"?(d(),h("div",wl,[e(l,{label:"é€‰æ‹©æœåŠ¡ç«¯æ ¸å¿ƒ",name:"coreUrl"},{default:t(()=>[o("div",bl,[e(b,{variant:"outline",onClick:a[8]||(a[8]=p=>H.value=!0)},{icon:t(()=>[e($,{name:"cloud-download"})]),default:t(()=>[a[30]||(a[30]=f(" ç‚¹å‡»æ‰“å¼€æœåŠ¡ç«¯æ ¸å¿ƒé€‰æ‹©åº“ ",-1))]),_:1}),n.value.core?(d(),h("div",Vl,[o("div",Ml,[e($,{name:"check-circle-filled"})]),o("div",Ul,[o("div",Cl,x(n.value.core),1),a[31]||(a[31]=o("div",{class:"core-url",title:"MSLX å°†åœ¨ç¨åå¸®æ‚¨è‡ªåŠ¨ä¸‹è½½æ­¤æ–‡ä»¶..."}," MSLX å°†åœ¨ç¨åå¸®æ‚¨è‡ªåŠ¨ä¸‹è½½æ­¤æ–‡ä»¶... ",-1))]),e(b,{shape:"circle",variant:"text",theme:"danger",onClick:a[9]||(a[9]=p=>{n.value.core="",n.value.coreUrl=""})},{default:t(()=>[e($,{name:"close"})]),_:1})])):w("",!0)])]),_:1}),W(o("input",{"onUpdate:modelValue":a[10]||(a[10]=p=>n.value.coreSha256=p),type:"hidden"},null,512),[[ol,n.value.coreSha256]])])):w("",!0),U.value==="manual"?(d(),h("div",Sl,[e(l,{label:"ä¸Šä¼ æ ¸å¿ƒæ–‡ä»¶",name:"coreFileKey"},{default:t(()=>[o("div",$l,[o("input",{ref_key:"uploadInputRef",ref:G,accept:".jar",type:"file",style:{display:"none"},onChange:Me},null,544),!E.value&&!n.value.coreFileKey?(d(),Y(b,{key:0,variant:"outline",onClick:Ve},{icon:t(()=>[e($,{name:"upload"})]),default:t(()=>[a[32]||(a[32]=f(" ç‚¹å‡»é€‰æ‹©æ–‡ä»¶å¹¶ä¸Šä¼  ",-1))]),_:1})):w("",!0),E.value?(d(),h("div",xl,[o("div",Fl,"æ­£åœ¨ä¸Šä¼ : "+x(K.value)+" ("+x(q.value)+")",1),e(F,{theme:"line",percentage:O.value},null,8,["percentage"]),a[33]||(a[33]=o("div",{class:"tip"},"åˆ«ç€æ€¥ï¼Œå–æ¯èŒ¶ğŸµ...",-1))])):w("",!0),n.value.coreFileKey&&!E.value?(d(),h("div",Jl,[o("div",Kl,[e($,{name:"check-circle-filled"})]),o("div",jl,[o("div",Rl,x(K.value),1),o("div",Bl,x(q.value)+" | å·²ä¸Šä¼ å‡†å¤‡å°±ç»ª",1)]),e(b,{shape:"circle",variant:"text",theme:"primary",onClick:Ve},{icon:t(()=>[e($,{name:"swap"})]),_:1}),e(b,{shape:"circle",variant:"text",theme:"danger",onClick:je},{icon:t(()=>[e($,{name:"delete"})]),_:1})])):w("",!0)])]),_:1})])):w("",!0),U.value==="custom"?(d(),h("div",Il,[e(m,{theme:"warning",message:"æ­¤æ¨¡å¼é€šå¸¸ç”¨äºæœåŠ¡å™¨ç›®å½•ä¸­å·²ç»å­˜åœ¨æ ¸å¿ƒæ–‡ä»¶ï¼Œæˆ–è€…æ‚¨æ‰“ç®—ç¨åæ‰‹åŠ¨é€šè¿‡æ–‡ä»¶ç®¡ç†ä¸Šä¼ æ ¸å¿ƒã€‚",style:{"margin-bottom":"16px"}}),e(l,{label:"æ ¸å¿ƒæ–‡ä»¶å",name:"core",help:"è¯·ç¡®ä¿æ–‡ä»¶ååŒ…å«åç¼€ï¼Œä¾‹å¦‚: server.jar"},{default:t(()=>[e(s,{modelValue:n.value.core,"onUpdate:modelValue":a[11]||(a[11]=p=>n.value.core=p),placeholder:"è¯·è¾“å…¥æ ¸å¿ƒæ–‡ä»¶å (ä¾‹å¦‚ server.jar)"},null,8,["modelValue"])]),_:1})])):w("",!0)],512),[[te,u.value===2]]),W(o("div",Ll,[e(pe,{gutter:[16,24]},{default:t(()=>[e(me,{xs:12,span:6},{default:t(()=>[e(l,{label:"æœ€å°å†…å­˜",name:"minM"},{default:t(()=>[e(de,{size:8,style:{width:"100%"}},{default:t(()=>[e(ve,{modelValue:ne.value,"onUpdate:modelValue":a[12]||(a[12]=p=>ne.value=p),min:0,"decimal-places":se.value==="GB"?1:0,placeholder:"Xms",theme:"column",style:{width:"100%"}},null,8,["modelValue","decimal-places"]),e(M,{modelValue:se.value,"onUpdate:modelValue":a[13]||(a[13]=p=>se.value=p),options:ee,clearable:!1,style:{width:"80px"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(me,{xs:12,span:6},{default:t(()=>[e(l,{label:"æœ€å¤§å†…å­˜",name:"maxM"},{default:t(()=>[e(de,{size:8,style:{width:"100%"}},{default:t(()=>[e(ve,{modelValue:ue.value,"onUpdate:modelValue":a[14]||(a[14]=p=>ue.value=p),min:0,"decimal-places":r.value==="GB"?1:0,placeholder:"Xmx",theme:"column",style:{width:"100%"}},null,8,["modelValue","decimal-places"]),e(M,{modelValue:r.value,"onUpdate:modelValue":a[15]||(a[15]=p=>r.value=p),options:ee,clearable:!1,style:{width:"80px"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(l,{label:"é¢å¤– JVM å‚æ•° (å¯é€‰)",name:"args",help:"ä¾‹å¦‚: -XX:+UseG1GC",style:{"margin-top":"16px"}},{default:t(()=>[e(Z,{modelValue:n.value.args,"onUpdate:modelValue":a[16]||(a[16]=p=>n.value.args=p),placeholder:"-XX:+UseG1GC"},null,8,["modelValue"])]),_:1})],512),[[te,u.value===3]]),e(l,{class:"step-actions"},{default:t(()=>[u.value>0?(d(),Y(b,{key:0,theme:"default",onClick:be},{default:t(()=>[...a[34]||(a[34]=[f("ä¸Šä¸€æ­¥",-1)])]),_:1})):w("",!0),u.value<3?(d(),Y(b,{key:1,type:"button",onClick:xe},{default:t(()=>[...a[35]||(a[35]=[f("ä¸‹ä¸€æ­¥",-1)])]),_:1})):w("",!0),u.value===3?(d(),Y(b,{key:2,theme:"primary",type:"submit",loading:B.value},{default:t(()=>[...a[36]||(a[36]=[f(" æäº¤åˆ›å»º ",-1)])]),_:1},8,["loading"])):w("",!0)]),_:1})]),_:1},8,["data","rules"])])):w("",!0),I.value?(d(),h("div",Gl,[o("div",zl,"æ­£åœ¨åˆ›å»ºå®ä¾‹ ("+x(L.value)+")",1),a[37]||(a[37]=o("p",null,"è¯·å‹¿å…³é—­æ­¤é¡µé¢ï¼Œåˆ›å»ºè¿‡ç¨‹å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿ...",-1)),e(F,{theme:"plump",percentage:Q.value,label:`${Q.value.toFixed(2)}%`},null,8,["percentage","label"]),o("div",{ref_key:"logContainerRef",ref:A,class:"log-container"},[e(_e,{split:!0},{default:t(()=>[(d(!0),h(Le,null,Ge(V.value,(p,ae)=>(d(),Y(fe,{key:ae},{default:t(()=>[e(le,null,{description:t(()=>[o("span",Tl,"["+x(p.time)+"]",1),o("span",Pl,x(p.message),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})],512)])):w("",!0),P.value?(d(),h("div",El,[e($,{class:"result-success-icon",name:"check-circle"}),o("div",Xl,"æœåŠ¡å™¨ ("+x(L.value)+") å·²åˆ›å»ºæˆåŠŸ",1),a[40]||(a[40]=o("div",{class:"result-success-describe"},"ä½ ç°åœ¨å¯ä»¥å»æœåŠ¡å™¨åˆ—è¡¨å¯åŠ¨å®ƒäº†",-1)),o("div",null,[e(b,{onClick:a[17]||(a[17]=()=>{Ue(),re(ye)("/instance/list")})},{default:t(()=>[...a[38]||(a[38]=[f(" è¿”å›æœåŠ¡ç«¯åˆ—è¡¨ ",-1)])]),_:1}),e(b,{theme:"default",onClick:a[18]||(a[18]=()=>{Ue(),re(ye)(`/instance/console/${L.value}`)})},{default:t(()=>[...a[39]||(a[39]=[f(" å‰å¾€æ§åˆ¶å° ",-1)])]),_:1})])])):w("",!0)])]),e(Qe,{visible:H.value,"onUpdate:visible":a[19]||(a[19]=p=>H.value=p),onConfirm:Fe},null,8,["visible"])])}}}),Dl=ze(ql,[["__scopeId","data-v-ccee0c63"]]),Al={key:0},Hl={key:1,class:"result-success"},Ol={class:"result-success-title"},Nl=Se({__name:"CustomMode",setup($e){const j=i(!1),R=i(0),oe=i(null),u=sl({name:"",path:null,java:"none",core:"none",coreUrl:"",coreSha256:"",coreFileKey:"",packageFileKey:"",minM:1027,maxM:1027,args:"",ignoreEula:!0}),B={name:[{required:!0,message:"è¯·è¾“å…¥æœåŠ¡å™¨åç§°",type:"error"}],args:[{required:!0,message:"è¯·è¾“å…¥è‡ªå®šä¹‰å¯åŠ¨å‚æ•°",type:"error"}]},I=async({validateResult:Q})=>{if(Q===!0)try{const V=await Te(u);R.value=V.serverId,_.success("åˆ›å»ºæˆåŠŸ"),j.value=!0}catch(V){_.error("åˆ›å»ºå¤±è´¥ï¼"+V.message)}else _.warning("è¯·æ£€æŸ¥è¡¨å•å¡«å†™")},P=()=>{j.value=!1,Object.assign(u,{name:"æ–°å»ºæœåŠ¡å™¨",path:null,java:"none",core:"none",packageFileKey:"",coreFileKey:"",coreUrl:"",coreSha256:"",minM:1027,maxM:1027,args:"",ignoreEula:!0})};return(Q,V)=>{const J=c("t-input"),L=c("t-form-item"),A=c("t-textarea"),U=c("t-switch"),H=c("t-button"),G=c("t-space"),E=c("t-form"),O=c("t-icon");return d(),h("div",null,[j.value?(d(),h("div",Hl,[e(O,{class:"result-success-icon",name:"check-circle"}),o("div",Ol,"æœåŠ¡å™¨ ("+x(R.value)+") å·²åˆ›å»ºæˆåŠŸ",1),V[9]||(V[9]=o("div",{class:"result-success-describe"},"ä½ ç°åœ¨å¯ä»¥å»æœåŠ¡å™¨åˆ—è¡¨å¯åŠ¨å®ƒäº†",-1)),o("div",null,[e(H,{onClick:V[4]||(V[4]=()=>{P(),re(ye)("/instance/list")})},{default:t(()=>[...V[7]||(V[7]=[f(" è¿”å›æœåŠ¡ç«¯åˆ—è¡¨ ",-1)])]),_:1}),e(H,{theme:"default",onClick:V[5]||(V[5]=()=>{P(),re(ye)(`/instance/console/${R.value}`)})},{default:t(()=>[...V[8]||(V[8]=[f(" å‰å¾€æ§åˆ¶å° ",-1)])]),_:1})])])):(d(),h("div",Al,[e(E,{ref_key:"formRef",ref:oe,rules:B,data:u,"label-align":"top",onSubmit:I},{default:t(()=>[e(L,{label:"æœåŠ¡å™¨åç§°",name:"name"},{default:t(()=>[e(J,{modelValue:u.name,"onUpdate:modelValue":V[0]||(V[0]=K=>u.name=K),placeholder:"ç»™ä½ çš„æœåŠ¡å™¨èµ·ä¸€ä¸ªåå­—"},null,8,["modelValue"])]),_:1}),e(L,{label:"å­˜å‚¨è·¯å¾„(å¯é€‰)",name:"path",help:"ä¸å¡«å†™å°†ä½¿ç”¨é»˜è®¤çš„ä¿å­˜è·¯å¾„ã€‚"},{default:t(()=>[e(J,{modelValue:u.path,"onUpdate:modelValue":V[1]||(V[1]=K=>u.path=K),placeholder:"è¯·å¡«å†™æœåŠ¡ç«¯ä¿å­˜ä½ç½®"},null,8,["modelValue"])]),_:1}),e(L,{label:"å¯åŠ¨æŒ‡ä»¤",name:"args",help:"æ­¤æ¨¡å¼ä¸ä¼šè‡ªåŠ¨å¸®æ‚¨é…ç½®Javaç¯å¢ƒï¼Œæ‚¨éœ€è¦å¡«å†™å®Œæ•´çš„å¯åŠ¨å‘½ä»¤ã€‚"},{default:t(()=>[e(A,{modelValue:u.args,"onUpdate:modelValue":V[2]||(V[2]=K=>u.args=K),placeholder:"start.bat...",autosize:{minRows:5,maxRows:25},class:"code-font-textarea"},null,8,["modelValue"])]),_:1}),e(L,{label:"å¿½ç•¥EULAæç¤º",name:"args",help:"è‹¥æ‚¨çš„å®ä¾‹å¹¶éMCæœåŠ¡å™¨ï¼Œå¯æ‰“å¼€æ­¤é€‰é¡¹"},{default:t(()=>[e(U,{modelValue:u.ignoreEula,"onUpdate:modelValue":V[3]||(V[3]=K=>u.ignoreEula=K),label:["å·²å¼€å¯","å·²å…³é—­"]},null,8,["modelValue"])]),_:1}),e(L,{style:{"margin-top":"20px"}},{default:t(()=>[e(G,null,{default:t(()=>[e(H,{theme:"primary",type:"submit"},{default:t(()=>[...V[6]||(V[6]=[f("æäº¤åˆ›å»º",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["data"])]))])}}}),Zl=ze(Nl,[["__scopeId","data-v-74d65900"]]),Ql={class:"main-layout-container"},Wl={class:"steps-aside"},Yl={class:"main-content"},ea={key:0,class:"form-step-container"},la={class:"step-content"},aa={class:"step-content"},ta={class:"select-core-wrapper"},oa={key:1,class:"uploading-state"},sa={class:"core-filename"},na={key:2,class:"uploading-state"},ua={key:3,class:"selected-core-card"},ra={class:"core-icon"},ia={class:"core-info"},ca={class:"core-filename"},va={class:"core-url"},da={class:"step-content"},ma={key:0},pa={key:1},fa={key:0,class:"online-select-area"},_a={class:"select-core-wrapper"},ga={key:0,class:"selected-core-card"},ya={class:"core-icon"},ha={class:"core-info"},ka={class:"core-filename"},wa={key:1,class:"online-select-area"},ba={class:"step-content"},Va={style:{width:"100%"}},Ma={class:"java-option-panel"},Ua={key:0,class:"flex-row"},Ca={key:1,class:"flex-row"},Sa={key:2},$a={key:3},xa={class:"step-content"},Fa={key:1,class:"step-content creation-progress"},Ja={class:"progress-title"},Ka={key:2,class:"result-success"},ja=Se({__name:"PackageMode",setup($e){const j=He(),R=i(null),oe=el(),u=i(0),B=i(!1),I=i(!1),P=i(!1),Q=i(0),V=i([]),J=i(null),L=i(null),A=i(null),U=i("online"),H=i(!1),G=i([]),E=i(!1),O=i(""),K=i(null),q=i(!1),X=i(0),N=i(""),ie=i(""),z=i("online"),D=i([]),ce=i([]),n=i(""),ee=i(""),se=async(s=!1)=>{try{s&&_.info("æ­£åœ¨åˆ·æ–°Javaç‰ˆæœ¬åˆ—è¡¨...");const l=await We(j.userInfo.systemInfo.osType.toLowerCase().replace("os",""),j.userInfo.systemInfo.osArchitecture.toLowerCase());l&&Array.isArray(l)&&(D.value=l.map(m=>({label:`Java ${m}`,value:m})),D.value.length>0&&!n.value&&(n.value=D.value[1].value)),ce.value=(await Ye(s)).map(m=>({label:`Java ${m.version}${m.is64Bit?"":" (32ä½)"} (${m.vendor} | ${m.path})`,value:m.path})),ce.value.length>0&&(ee.value=ce.value[0].value),s&&_.success("å·²åˆ·æ–°Javaç‰ˆæœ¬åˆ—è¡¨")}catch(l){_.warning("è·å–åœ¨çº¿Javaç‰ˆæœ¬å¤±è´¥: "+l.message)}};Pe(()=>{se()});const r=i({name:"æ–°å»ºæ•´åˆåŒ…æœåŠ¡å™¨",path:"",java:"",core:"",coreUrl:"",coreSha256:"",coreFileKey:"",packageFileKey:"",minM:2048,maxM:6144,args:""}),ne=i("GB"),ue=i("GB"),ke=[{label:"MB",value:"MB"},{label:"GB",value:"GB"}],we=ge({get:()=>ne.value==="GB"?r.value.minM/1024:r.value.minM,set:s=>{r.value.minM=ne.value==="GB"?Math.round(s*1024):s}}),be=ge({get:()=>ue.value==="GB"?r.value.maxM/1024:r.value.maxM,set:s=>{r.value.maxM=ue.value==="GB"?Math.round(s*1024):s}});Ee([z,n,ee],([s,l,m])=>{var y;s==="env"?r.value.java="java":s==="custom"||s==="local"?r.value.java=m:s==="online"&&(r.value.java=l?`MSLX://Java/${l}`:""),r.value.java&&((y=R.value)==null||y.validate({fields:["java"]}))},{immediate:!0});const xe=ge(()=>({name:[{required:!0,message:"å®ä¾‹åç§°ä¸èƒ½ä¸ºç©º",trigger:"blur"}],packageFileKey:[{required:!0,message:"è¯·ä¸Šä¼ æ•´åˆåŒ…æ–‡ä»¶",trigger:"change"}],core:[{validator:s=>{if(G.value.length>0){if(!s)return{result:!1,message:"è¯·é€‰æ‹©ä¸€ä¸ªå¯åŠ¨Jar",type:"error"}}else{if(U.value==="online"&&!r.value.coreUrl)return{result:!1,message:"è¯·é€‰æ‹©æœåŠ¡ç«¯æ ¸å¿ƒ",type:"error"};if(U.value==="manual"&&!r.value.coreFileKey)return{result:!1,message:"è¯·ä¸Šä¼ æ ¸å¿ƒæ–‡ä»¶",type:"error"}}return!0},trigger:"change"}],java:[{required:!0,message:"è¯·é…ç½® Java ç¯å¢ƒ",trigger:"change"}],minM:[{required:!0,min:1,message:"å¿…é¡»å¤§äº0",trigger:"blur"}],maxM:[{required:!0,min:1,message:"å¿…é¡»å¤§äº0",trigger:"blur"}]})),Fe=[["name","path"],["packageFileKey"],["core","coreUrl","coreFileKey"],["java"],["minM","maxM","args"]],Ve=()=>{u.value>0&&(u.value-=1)},Je=async()=>{if(u.value===1){if(!r.value.packageFileKey){_.warning("è¯·å…ˆä¸Šä¼ æœåŠ¡ç«¯æ•´åˆåŒ…(Zip)");return}if(q.value||E.value){_.warning("è¯·ç­‰å¾…ä¸Šä¼ æˆ–åˆ†æå®Œæˆ");return}}if(u.value===2)if(G.value.length>0){if(!r.value.core){_.warning("è¯·ä»åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªå¯åŠ¨æ ¸å¿ƒ");return}}else{if(U.value==="online"&&(!r.value.coreUrl||!r.value.core)){_.warning("è¯·é€‰æ‹©ä¸€ä¸ªæœåŠ¡ç«¯æ ¸å¿ƒ");return}if(U.value==="manual"&&!r.value.coreFileKey){_.warning("è¯·ä¸Šä¼ æ ¸å¿ƒæ–‡ä»¶");return}}const s=await R.value.validate();if(s===!0){u.value<4&&(u.value+=1);return}const l=new Set(Fe[u.value]);Object.keys(s).some(y=>l.has(y))?_.warning("è¯·æ£€æŸ¥å½“å‰æ­¥éª¤çš„è¾“å…¥"):u.value<4&&(u.value+=1)},Me=()=>{var s;(s=K.value)==null||s.click()},Ke=s=>{if(s===0)return"0 B";const l=1024,m=["B","KB","MB","GB"],y=Math.floor(Math.log(s)/Math.log(l));return parseFloat((s/Math.pow(l,y)).toFixed(2))+" "+m[y]},je=async s=>{const l=s.target;if(!l.files||l.files.length===0)return;if(r.value.packageFileKey)try{await he(r.value.packageFileKey)}catch(y){console.error(y)}r.value.core="",G.value=[],O.value="";const m=l.files[0];N.value=m.name,ie.value=Ke(m.size),await Re(m),l.value=""},Re=async s=>{q.value=!0,X.value=0;const l=50*1024*1024,m=Math.ceil(s.size/l),y=5,S=5;try{const b=(await Oe()).uploadId;if(!b)throw new Error("æ— æ³•è·å–ä¸Šä¼ å‡­è¯");const $=Array.from({length:m},(T,le)=>le);let F=0;const ve=async T=>{const le=T*l,fe=Math.min(s.size,le+l),_e=s.slice(le,fe);let p;for(let ae=1;ae<=S;ae++)try{await Ne(b,T,_e);return}catch(Ce){p=Ce,console.warn(`åˆ†ç‰‡ ${T} ç¬¬ ${ae} æ¬¡ä¸Šä¼ å¤±è´¥`,Ce),ae<S&&await new Promise(Ie=>setTimeout(Ie,1e3*ae))}throw new Error(`åˆ†ç‰‡ ${T} å¤±è´¥ (å·²é‡è¯•${S}æ¬¡): ${p==null?void 0:p.message}`)},de=async()=>{for(;$.length>0;){const T=$.shift();if(T===void 0)break;await ve(T),F++,X.value=Math.floor(F/m*100)}},me=Array(Math.min(y,m)).fill(null).map(()=>de());await Promise.all(me);const Z=(await Ze(b,m)).uploadId;r.value.packageFileKey=Z,_.success("ä¸Šä¼ æˆåŠŸï¼Œæ­£åœ¨åˆ†ææ•´åˆåŒ…å†…å®¹..."),await Be(Z)}catch(M){console.error(M),_.error(`ä¸Šä¼ å¤±è´¥: ${M.message||"æœªçŸ¥é”™è¯¯"}`),N.value="",X.value=0,r.value.packageFileKey&&he(r.value.packageFileKey).catch(()=>{})}finally{q.value=!1}},Be=async s=>{E.value=!0;try{const l=await nl(s);G.value=l.jars||[],O.value=l.detectedRoot||"",l.count===1&&l.jars.length>0?(r.value.core=l.jars[0],_.success(`è‡ªåŠ¨è¯†åˆ«åˆ°æœåŠ¡ç«¯æ ¸å¿ƒ: ${l.jars[0]}`)):l.count>1?_.info(`æ•´åˆåŒ…å†…æ£€æµ‹åˆ° ${l.count} ä¸ªæœåŠ¡ç«¯æ ¸å¿ƒï¼Œè¯·åœ¨ä¸‹ä¸€æ­¥é€‰æ‹©`):_.warning("æœªæ£€æµ‹åˆ°æ•´åˆåŒ…å†…å­˜åœ¨æœåŠ¡ç«¯æ ¸å¿ƒï¼Œè¯·åœ¨ä¸‹ä¸€æ­¥æ‰‹åŠ¨é…ç½®æ ¸å¿ƒ")}catch(l){_.error("æ•´åˆåŒ…åˆ†æå¤±è´¥: "+l.message)}finally{E.value=!1}},Ue=async()=>{r.value.packageFileKey&&(await he(r.value.packageFileKey),r.value.packageFileKey="",N.value="",G.value=[],r.value.core="",_.success("æ–‡ä»¶å·²ç§»é™¤"))},v=s=>{r.value.core=s.filename,r.value.coreUrl=s.url,r.value.coreSha256=s.sha256,r.value.coreFileKey="",_.success(`å·²é€‰æ‹©: ${s.core} (${s.version})`)},a=async()=>{if(await R.value.validate()!==!0){_.warning("è¯·æ£€æŸ¥è¡¨å•æ‰€æœ‰å†…å®¹");return}B.value=!0,V.value=[];const l={...r.value,path:r.value.path||null,coreUrl:r.value.coreUrl||null,coreSha256:r.value.coreSha256||null,coreFileKey:r.value.coreFileKey||null,args:r.value.args||null};G.value.length>0?(l.coreUrl=null,l.coreSha256=null,l.coreFileKey=null):U.value==="manual"?(l.coreUrl=null,l.coreSha256=null):l.coreFileKey=null;try{const y=(await Te(l)).serverId;if(!y)throw new Error("æœåŠ¡å™¨æœªè¿”å› ServerId");L.value=y.toString(),I.value=!0,u.value=5,await g(L.value)}catch(m){_.error(m.message||"åˆ›å»ºè¯·æ±‚å¤±è´¥"),B.value=!1}},g=async s=>{const{baseUrl:l,token:m}=j,y=new URL("/api/hubs/creationProgressHub",l||window.location.origin);y.searchParams.append("x-user-token",m),J.value=new qe().withUrl(y.toString(),{withCredentials:!1}).configureLogging(De.Information).build(),J.value.on("StatusUpdate",(S,M,b)=>{var $,F;S.toString()===s&&(V.value.push({time:new Date().toLocaleTimeString(),message:M,progress:b}),Ae(()=>{A.value&&(A.value.scrollTop=A.value.scrollHeight)}),b!==null&&b>=0&&(Q.value=b),b===100?(_.success("æœåŠ¡å™¨åˆ›å»ºæˆåŠŸï¼"),($=J.value)==null||$.stop(),I.value=!1,P.value=!0,u.value=6,B.value=!1,oe.refreshInstanceList()):b===-1&&(_.error(M||"é”™è¯¯"),(F=J.value)==null||F.stop(),I.value=!1,B.value=!1,u.value=0))});try{await J.value.start(),await J.value.invoke("TrackServer",s)}catch(S){console.error("SignalR Error",S)}};Xe(()=>{var s;(s=J.value)==null||s.stop()});const C=()=>{P.value=!1,u.value=0,r.value={name:"æ–°å»ºæ•´åˆåŒ…æœåŠ¡å™¨",path:"",java:"",core:"",coreUrl:"",coreSha256:"",coreFileKey:"",packageFileKey:"",minM:2048,maxM:6144,args:""},G.value=[],N.value="",U.value="online",z.value="online"};return(s,l)=>{const m=c("t-step-item"),y=c("t-steps"),S=c("t-input"),M=c("t-form-item"),b=c("t-alert"),$=c("t-icon"),F=c("t-button"),ve=c("t-progress"),de=c("t-loading"),me=c("t-radio"),pe=c("t-radio-group"),Z=c("t-radio-button"),T=c("t-select"),le=c("t-input-number"),fe=c("t-space"),_e=c("t-col"),p=c("t-row"),ae=c("t-textarea"),Ce=c("t-form"),Ie=c("t-list-item-meta"),ll=c("t-list-item"),al=c("t-list");return d(),h("div",null,[o("div",Ql,[o("div",Wl,[e(y,{layout:"vertical",style:{"margin-top":"16px"},current:u.value,status:"process",readonly:""},{default:t(()=>[e(m,{title:"åŸºæœ¬ä¿¡æ¯",content:"å¡«å†™å®ä¾‹åç§°"}),e(m,{title:"ä¸Šä¼ æ•´åˆåŒ…",content:"ä¸Šä¼ æœåŠ¡ç«¯ Zip åŒ…"}),e(m,{title:"æ ¸å¿ƒé…ç½®",content:"ç¡®è®¤å¯åŠ¨çš„æœåŠ¡ç«¯æ ¸å¿ƒ"}),e(m,{title:"Java ç¯å¢ƒ",content:"é…ç½® Java è¿è¡Œæ—¶"}),e(m,{title:"èµ„æºé…ç½®",content:"è®¾ç½®å†…å­˜å‚æ•°"}),e(m,{title:"åˆ›å»ºå®ä¾‹",content:"æäº¤å¹¶ç­‰å¾…è§£å‹"}),e(m,{title:"å®Œæˆ",content:"æŸ¥çœ‹ç»“æœ"})]),_:1},8,["current"])]),o("div",Yl,[!I.value&&!P.value?(d(),h("div",ea,[e(Ce,{ref_key:"formRef",ref:R,data:r.value,rules:xe.value,"label-align":"top",class:"step-form",onSubmit:a},{default:t(()=>[W(o("div",la,[e(M,{label:"å®ä¾‹åç§°",name:"name"},{default:t(()=>[e(S,{modelValue:r.value.name,"onUpdate:modelValue":l[0]||(l[0]=k=>r.value.name=k),placeholder:"ä¸ºä½ çš„æœåŠ¡å™¨èµ·ä¸ªåå­—"},null,8,["modelValue"])]),_:1}),e(M,{label:"å®ä¾‹è·¯å¾„",name:"path",help:"é€‰å¡«ï¼Œç•™ç©ºå°†ä½¿ç”¨é»˜è®¤è·¯å¾„"},{default:t(()=>[e(S,{modelValue:r.value.path,"onUpdate:modelValue":l[1]||(l[1]=k=>r.value.path=k),placeholder:"ä¾‹å¦‚: D:\\MyServer"},null,8,["modelValue"])]),_:1})],512),[[te,u.value===0]]),W(o("div",aa,[e(b,{theme:"info",class:"mb-4"},{message:t(()=>[...l[18]||(l[18]=[f(" è¯·ä¸Šä¼ åŒ…å«æœåŠ¡ç«¯æ–‡ä»¶çš„ ",-1),o("b",null,".zip",-1),f(" å‹ç¼©åŒ…ã€‚ä¸Šä¼ å®Œæˆåç³»ç»Ÿå°†è‡ªåŠ¨åˆ†æåŒ…å†…çš„æœåŠ¡ç«¯æ ¸å¿ƒæ–‡ä»¶ã€‚ ",-1)])]),_:1}),e(M,{label:"ä¸Šä¼ æœåŠ¡ç«¯æ•´åˆåŒ… (Zip)",name:"packageFileKey"},{default:t(()=>[o("div",ta,[o("input",{ref_key:"uploadInputRef",ref:K,accept:".zip",type:"file",style:{display:"none"},onChange:je},null,544),!q.value&&!r.value.packageFileKey?(d(),Y(F,{key:0,variant:"outline",onClick:Me},{icon:t(()=>[e($,{name:"upload"})]),default:t(()=>[l[19]||(l[19]=f(" ç‚¹å‡»é€‰æ‹© Zip æ–‡ä»¶å¹¶ä¸Šä¼  ",-1))]),_:1})):w("",!0),q.value?(d(),h("div",oa,[o("div",sa,"æ­£åœ¨ä¸Šä¼ : "+x(N.value)+" ("+x(ie.value)+")",1),e(ve,{theme:"line",percentage:X.value},null,8,["percentage"]),l[20]||(l[20]=o("div",{class:"tip"},"åˆ«ç€æ€¥ï¼Œå–æ¯å’–å•¡â˜•ï¸...",-1))])):w("",!0),!q.value&&E.value?(d(),h("div",na,[e(de,{text:"æ­£åœ¨åˆ†æå‹ç¼©åŒ…ç»“æ„...",size:"small"})])):w("",!0),r.value.packageFileKey&&!q.value&&!E.value?(d(),h("div",ua,[o("div",ra,[e($,{name:"folder-zip"})]),o("div",ia,[o("div",ca,x(N.value),1),o("div",va,x(G.value.length>0?`å‘ç° ${G.value.length} ä¸ªæœåŠ¡ç«¯æ ¸å¿ƒæ–‡ä»¶`:"æœªå‘ç°æœåŠ¡ç«¯æ ¸å¿ƒæ–‡ä»¶")+" "+x(O.value?`| æ ¹ç›®å½•: /${O.value}`:""),1)]),e(F,{shape:"circle",variant:"text",theme:"primary",onClick:Me},{icon:t(()=>[e($,{name:"swap"})]),_:1}),e(F,{shape:"circle",variant:"text",theme:"danger",onClick:Ue},{icon:t(()=>[e($,{name:"delete"})]),_:1})])):w("",!0)])]),_:1})],512),[[te,u.value===1]]),W(o("div",da,[G.value.length>0?(d(),h("div",ma,[e(b,{theme:"success",class:"mb-4"},{message:t(()=>[...l[21]||(l[21]=[f("æˆ‘ä»¬åœ¨å‹ç¼©åŒ…ä¸­å‘ç°äº†ä»¥ä¸‹æœåŠ¡ç«¯æ ¸å¿ƒæ–‡ä»¶ï¼Œè¯·é€‰æ‹©å“ªä¸€ä¸ªä½œä¸º",-1),o("b",null,"å¯åŠ¨æ ¸å¿ƒ",-1),f("ã€‚",-1)])]),_:1}),e(M,{label:"é€‰æ‹©å¯åŠ¨æ ¸å¿ƒ",name:"core"},{default:t(()=>[e(pe,{modelValue:r.value.core,"onUpdate:modelValue":l[2]||(l[2]=k=>r.value.core=k),class:"vertical-radio-group"},{default:t(()=>[(d(!0),h(Le,null,Ge(G.value,k=>(d(),h("div",{key:k,class:"jar-option-item"},[e(me,{value:k},{default:t(()=>[f(x(k),1)]),_:2},1032,["value"])]))),128))]),_:1},8,["modelValue"])]),_:1})])):(d(),h("div",pa,[e(b,{theme:"warning",class:"mb-4"},{message:t(()=>[...l[22]||(l[22]=[f("åœ¨ä¸Šä¼ çš„åŒ…ä¸­æœªå‘ç°æœåŠ¡ç«¯æ ¸å¿ƒæ–‡ä»¶ã€‚è¯·åœ¨æ­¤å¤„ä¸‹è½½ä¸€ä¸ªæœåŠ¡ç«¯æ ¸å¿ƒã€‚",-1)])]),_:1}),e(M,{label:"è¡¥å……æœåŠ¡ç«¯æ ¸å¿ƒ"},{default:t(()=>[e(pe,{modelValue:U.value,"onUpdate:modelValue":l[3]||(l[3]=k=>U.value=k),variant:"default-filled"},{default:t(()=>[e(Z,{value:"online"},{default:t(()=>[...l[23]||(l[23]=[f("åœ¨çº¿ä¸‹è½½æ ¸å¿ƒ",-1)])]),_:1}),e(Z,{disabled:"",value:"manual"},{default:t(()=>[...l[24]||(l[24]=[f("è‡ªè¡Œä¸Šä¼ (ä¸æ”¯æŒ)",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),U.value==="online"?(d(),h("div",fa,[e(M,{label:"é€‰æ‹©æœåŠ¡ç«¯æ ¸å¿ƒ",name:"coreUrl"},{default:t(()=>[o("div",_a,[e(F,{variant:"outline",onClick:l[4]||(l[4]=k=>H.value=!0)},{icon:t(()=>[e($,{name:"cloud-download"})]),default:t(()=>[l[25]||(l[25]=f(" æ‰“å¼€æ ¸å¿ƒåº“ ",-1))]),_:1}),r.value.core&&U.value==="online"?(d(),h("div",ga,[o("div",ya,[e($,{name:"check-circle-filled"})]),o("div",ha,[o("div",ka,x(r.value.core),1),l[26]||(l[26]=o("div",{class:"core-url"},"å°†åœ¨åˆ›å»ºæ—¶è‡ªåŠ¨ä¸‹è½½",-1))])])):w("",!0)])]),_:1})])):w("",!0),U.value==="manual"?(d(),h("div",wa,[l[27]||(l[27]=o("div",{class:"tip-text"},"è¯·åœ¨æ•´åˆåŒ…è§£å‹åæ‰‹åŠ¨æ”¾å…¥æ ¸å¿ƒï¼Œæˆ–åœ¨æ­¤å¤„ä¸å¡«å†™ç­‰å¾…åˆ›å»ºåæ‰‹åŠ¨ä¸Šä¼ ã€‚",-1)),e(b,{theme:"error",message:"æ­¤æ¨¡å¼ä¸‹å»ºè®®ç¡®ä¿å‹ç¼©åŒ…å†…åŒ…å«æ ¸å¿ƒï¼Œæˆ–è€…ä½¿ç”¨åœ¨çº¿ä¸‹è½½åŠŸèƒ½ã€‚"})])):w("",!0)]))],512),[[te,u.value===2]]),W(o("div",ba,[e(b,{theme:"info",title:"å¦‚ä½•é€‰æ‹© Java ç‰ˆæœ¬?",class:"java-alert"},{message:t(()=>[...l[28]||(l[28]=[o("p",null,"ä¸åŒçš„ Minecraft ç‰ˆæœ¬éœ€è¦ä¸åŒçš„ Java ç‰ˆæœ¬ã€‚",-1),o("ul",null,[o("li",null,[f("å»ºè®®ç›´æ¥ä½¿ç”¨ "),o("b",null,"æ¨èç‰ˆæœ¬"),f(" è¶…å‡ºç‰ˆæœ¬å¯èƒ½å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ã€‚")]),o("li",null,"MC 26.1 - æœ€æ–°ç‰ˆ: éœ€è¦ Java 25 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚"),o("li",null,"MC 1.20.5 - 1.21.10: éœ€è¦ Java 21 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚"),o("li",null,"MC 1.18 - 1.20.4: éœ€è¦ Java 17 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚"),o("li",null,"MC 1.17/1.17.1: éœ€è¦ Java 16ã€‚"),o("li",null,"MC 1.13 - 1.16.5: éœ€è¦ Java 8 / 11ã€‚"),o("li",null,"MC 1.12.2 åŠä»¥ä¸‹: éœ€è¦ Java 8ã€‚")],-1)])]),_:1}),e(M,{label:"Java æ¥æº",name:"java"},{default:t(()=>[o("div",Va,[e(pe,{modelValue:z.value,"onUpdate:modelValue":l[5]||(l[5]=k=>z.value=k),variant:"default-filled"},{default:t(()=>[e(Z,{value:"online"},{default:t(()=>[...l[29]||(l[29]=[f("åœ¨çº¿ä¸‹è½½",-1)])]),_:1}),e(Z,{value:"local"},{default:t(()=>[...l[30]||(l[30]=[f("æœ¬æœº Java",-1)])]),_:1}),e(Z,{value:"env"},{default:t(()=>[...l[31]||(l[31]=[f("ç¯å¢ƒå˜é‡",-1)])]),_:1}),e(Z,{value:"custom"},{default:t(()=>[...l[32]||(l[32]=[f("è‡ªå®šä¹‰è·¯å¾„",-1)])]),_:1})]),_:1},8,["modelValue"]),o("div",Ma,[z.value==="online"?(d(),h("div",Ua,[e(T,{modelValue:n.value,"onUpdate:modelValue":l[6]||(l[6]=k=>n.value=k),options:D.value,placeholder:"è¯·é€‰æ‹© Java ç‰ˆæœ¬"},null,8,["modelValue","options"])])):w("",!0),z.value==="local"?(d(),h("div",Ca,[e(T,{modelValue:ee.value,"onUpdate:modelValue":l[7]||(l[7]=k=>ee.value=k),options:ce.value,placeholder:"è¯·é€‰æ‹© Java"},null,8,["modelValue","options"]),e(F,{variant:"text",onClick:l[8]||(l[8]=k=>se(!0))},{default:t(()=>[...l[33]||(l[33]=[f("åˆ·æ–°",-1)])]),_:1})])):w("",!0),z.value==="env"?(d(),h("div",Sa,[e(S,{"model-value":"java",readonly:"",disabled:""})])):w("",!0),z.value==="custom"?(d(),h("div",$a,[e(S,{modelValue:ee.value,"onUpdate:modelValue":l[9]||(l[9]=k=>ee.value=k),placeholder:"C:\\Path\\To\\java.exe"},null,8,["modelValue"])])):w("",!0)])])]),_:1})],512),[[te,u.value===3]]),W(o("div",xa,[e(p,{gutter:[16,24]},{default:t(()=>[e(_e,{xs:12,span:6},{default:t(()=>[e(M,{label:"æœ€å°å†…å­˜",name:"minM"},{default:t(()=>[e(fe,{size:8,style:{width:"100%"}},{default:t(()=>[e(le,{modelValue:we.value,"onUpdate:modelValue":l[10]||(l[10]=k=>we.value=k),min:0,"decimal-places":ne.value==="GB"?1:0,placeholder:"Xms",theme:"column",style:{width:"100%"}},null,8,["modelValue","decimal-places"]),e(T,{modelValue:ne.value,"onUpdate:modelValue":l[11]||(l[11]=k=>ne.value=k),options:ke,clearable:!1,style:{width:"80px"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_e,{xs:12,span:6},{default:t(()=>[e(M,{label:"æœ€å¤§å†…å­˜",name:"maxM"},{default:t(()=>[e(fe,{size:8,style:{width:"100%"}},{default:t(()=>[e(le,{modelValue:be.value,"onUpdate:modelValue":l[12]||(l[12]=k=>be.value=k),min:0,"decimal-places":ue.value==="GB"?1:0,placeholder:"Xmx",theme:"column",style:{width:"100%"}},null,8,["modelValue","decimal-places"]),e(T,{modelValue:ue.value,"onUpdate:modelValue":l[13]||(l[13]=k=>ue.value=k),options:ke,clearable:!1,style:{width:"80px"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(M,{label:"JVM å‚æ•°",name:"args",style:{"margin-top":"16px"}},{default:t(()=>[e(ae,{modelValue:r.value.args,"onUpdate:modelValue":l[14]||(l[14]=k=>r.value.args=k),placeholder:"-XX:+UseG1GC"},null,8,["modelValue"])]),_:1})],512),[[te,u.value===4]]),e(M,{class:"step-actions",style:{"margin-top":"16px"}},{default:t(()=>[u.value>0?(d(),Y(F,{key:0,theme:"default",onClick:Ve},{default:t(()=>[...l[34]||(l[34]=[f("ä¸Šä¸€æ­¥",-1)])]),_:1})):w("",!0),u.value<4?(d(),Y(F,{key:1,type:"button",loading:q.value||E.value,onClick:Je},{default:t(()=>[...l[35]||(l[35]=[f("ä¸‹ä¸€æ­¥",-1)])]),_:1},8,["loading"])):w("",!0),u.value===4?(d(),Y(F,{key:2,theme:"primary",type:"submit",loading:B.value},{default:t(()=>[...l[36]||(l[36]=[f("æäº¤åˆ›å»º",-1)])]),_:1},8,["loading"])):w("",!0)]),_:1})]),_:1},8,["data","rules"])])):w("",!0),I.value?(d(),h("div",Fa,[o("div",Ja,"æ­£åœ¨åˆ›å»ºæ•´åˆåŒ…å®ä¾‹ ("+x(L.value)+")",1),l[37]||(l[37]=o("p",null,"æ­£åœ¨è§£å‹æ–‡ä»¶å¹¶é…ç½®ç¯å¢ƒ...",-1)),e(ve,{theme:"plump",percentage:Q.value,label:`${Q.value.toFixed(2)}%`},null,8,["percentage","label"]),o("div",{ref_key:"logContainerRef",ref:A,class:"log-container"},[e(al,{split:!0},{default:t(()=>[(d(!0),h(Le,null,Ge(V.value,(k,tl)=>(d(),Y(ll,{key:tl},{default:t(()=>[e(Ie,{description:`[${k.time}] ${k.message}`},null,8,["description"])]),_:2},1024))),128))]),_:1})],512)])):w("",!0),P.value?(d(),h("div",Ka,[e($,{class:"result-success-icon",name:"check-circle"}),l[40]||(l[40]=o("div",{class:"result-success-title"},"æ•´åˆåŒ…æœåŠ¡å™¨å·²éƒ¨ç½²æˆåŠŸ",-1)),l[41]||(l[41]=o("div",{class:"result-success-describe"},"æ–‡ä»¶å·²è§£å‹ï¼Œç¯å¢ƒå·²é…ç½®å°±ç»ª",-1)),o("div",null,[e(F,{onClick:l[15]||(l[15]=()=>{C(),re(ye)("/instance/list")})},{default:t(()=>[...l[38]||(l[38]=[f(" è¿”å›æœåŠ¡ç«¯åˆ—è¡¨ ",-1)])]),_:1}),e(F,{theme:"default",onClick:l[16]||(l[16]=()=>{C(),re(ye)(`/instance/console/${L.value}`)})},{default:t(()=>[...l[39]||(l[39]=[f(" å‰å¾€æ§åˆ¶å° ",-1)])]),_:1})])])):w("",!0)])]),e(Qe,{visible:H.value,"onUpdate:visible":l[17]||(l[17]=k=>H.value=k),onConfirm:v},null,8,["visible"])])}}}),Ra=ze(ja,[["__scopeId","data-v-0d3b3b43"]]),Mt=Se({__name:"index",setup($e){const j=i(1);return(R,oe)=>{const u=c("t-tab-panel"),B=c("t-tabs"),I=c("t-card");return d(),h("div",null,[e(I,{direction:"vertical"},{default:t(()=>[e(B,{modelValue:j.value,"onUpdate:modelValue":oe[0]||(oe[0]=P=>j.value=P)},{default:t(()=>[e(u,{value:1,label:"å¿«é€Ÿæ¨¡å¼","destroy-on-hide":!1},{default:t(()=>[e(Dl,{style:{margin:"10px"}})]),_:1}),e(u,{value:2,label:"ä¸Šä¼ æ•´åˆåŒ…æ¨¡å¼","destroy-on-hide":!1},{default:t(()=>[e(Ra,{style:{margin:"10px"}})]),_:1}),e(u,{value:3,label:"è‡ªå®šä¹‰æ¨¡å¼","destroy-on-hide":!1},{default:t(()=>[e(Zl,{style:{margin:"10px"}})]),_:1})]),_:1},8,["modelValue"])]),_:1})])}}});export{Mt as default};
