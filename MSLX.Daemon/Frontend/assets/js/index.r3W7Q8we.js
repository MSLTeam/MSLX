import{u as L,p as R}from"./instance.vos_DMoY.js";import{c as I,B as W,f as Y,_ as U}from"./index.DjdW_re9.js";import{a as G,k as J,a9 as O,_ as V}from"./tdesign-icons-vue-next.o89AUH_k.js";import{M as B}from"./tdesign-vue-next.ClIZ97Cx.js";import{D as P,R as z,W as M,aX as u,a$ as t,G as n,b6 as T,b2 as i,ap as r,b0 as a,aY as d,ao as l,O as H,b3 as q,b1 as f,aZ as Q,b5 as m}from"./index.CWeK9ocq.js";import"./pinia.CwCJD8HV.js";import"./pinia-plugin-persistedstate_561243483b11dd07f5acf9e797fda690.n2tMOXAx.js";import"./vue-router.f8VyOqpO.js";import"./tvision-color.COTpcftn.js";import"./chroma-js.RLxBGt-u.js";import"./bezier-easing.qwUZoLR4.js";import"./lodash.C2dUGbaG.js";import"./axios.R-lXtGyY.js";import"./qs.2H4whylj.js";import"./side-channel.D4adRIkF.js";import"./es-errors.CFxpeikN.js";import"./object-inspect.C4p7aaXq.js";import"./cron-parser.BHsRiybt.js";import"./luxon.BVaPVz1w.js";import"./side-channel-list.Mptt8X3N.js";import"./side-channel-map.DhhAKOp2.js";import"./get-intrinsic.DZF4l_-S.js";import"./es-object-atoms.Ditt1eQ6.js";import"./math-intrinsics.Cv-yPkyD.js";import"./gopd.fcd2-aIC.js";import"./es-define-property.bDCdrV83.js";import"./has-symbols.BaUvM3gb.js";import"./get-proto.GRuZvLsk.js";import"./dunder-proto.BfGlLUzx.js";import"./call-bind-apply-helpers.DPbVMkjK.js";import"./function-bind.CHqF18-c.js";import"./hasown.B1sN64jK.js";import"./call-bound.DTRAK3sj.js";import"./side-channel-weakmap.CTWfHcrJ.js";import"./nprogress.BFWi6Yo1.js";import"./core-js-pure.DN77qAGa.js";import"./crelt.C8TCjufn.js";import"./style-mod.Bc2inJdb.js";import"./w3c-keyname.Vcq4gwWv.js";import"./lodash-es.ClUTdtmA.js";import"./mitt.DJ65BbbF.js";import"./sortablejs.C83syoBY.js";const Z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAAsSAAALEgHS3X78AAADgklEQVR42u2dPWhTYRSGk2qlZKia+BMNFuJQERehuFiogoNSJ7tIi4MKFkELInapVYOIS8SlCqKoiwji5OhStLQOlUz+YUFrC2li7I26hGCwEbXrOTec5OKN93nWw/363S8PJ7w9yU0oBAAAASWsFdPXb1Q5ouZn+Oxp8XVu4XiCDQIgACAAIAAgAASQlVrU6+07aFp0bTTqq5v8WiwG/XWu0gEAAQABAAEAAQABYDkGWuPc5PiEWIttXCfWIpGIebP3L4+arjt28YpYK5VKYu3Rtaumv3f43IgnL5bzedF05nQAQABAAEAAQABAAKgxBr5781asbUl2mKKVVnOLXts6EmLt/XzWdADWWKrtRbuHeiKiNerRAQABAAEAAQABAAGgxhgY3xQXa/lc3hSt3CZ6WrwaOHlKrF0akePVhwuDttNp3WDay8NbN00RsZ6YqE0K6QCAAIAAgACAAIAAgABQy/8BtKyvoY18eyoF9dqJebn2aXrBtG4i9tN0Hz1OwbQXbTTtdv9WtFHx3Mc5OgAgACAAIAAgACAA1BID/wX97TmxVh4/L9a6OitibXW8zbSXeL4sR2RlL/3t8ppZZ4Un58Y4GBAAEAAQABAAEAB8GgPdJnPxWKUpDs6rfS7RAQABAAEAAQABAAGg+WJgy+0hc3zampoSa8XsrFj7dueIaa/flYmfxpoTD8RaNJGUL0x1q+vmlbNbGhyjAwACAAIAAgACAAJAvTGwkFts+KJaXNFizp8YqNT2HDoq1p70Nj7qhYx7eTX9XL5/p1Vdt+3MXdN+HKWmvcZ0AN4CAAEAAQABAAEgcDHQeqH2XbQf9+QfatS+w/cbbeLnfMkpV643Ry8JbXKp7UW7B7dpaEZ5rO2q46N0AEAAQABAAEAAQACok/DwcKoqFQ/07TfFQA0tIv6NieX/+sAzM/rjaryIei+nMnQAQABAAEAAQABAAFjGd08KtU7udo89E2ubk52mNRdmZ8Tai6G9dABAAEAAQABAAEAAQADg/wAuuI07sy7jYguvJ582fE3rL394Me6lAwACAAIAAgACAAJAg2Kg9slf7ZOmu7q7PIuJEo8H9vkqznqBF2dOB+AtABAAEAAQABAAiIE1smPndl/diN+mbF7gxZnTAXgLAAQABAAEAASAoBHWitrzg6B5SKdTYToAIAAgACAAIAAgAAAAAECQ+QUUBtshXi5agwAAAABJRU5ErkJggg==",j="/assets/png/150px-Anvil.BV3t5jxS.png",$="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAACWElEQVR42u3dPS8EURQG4G1RU6GWoFUqRK9Ao1BoJRJ+gEgUG4XERyJRKIQIFYVE0Gn8rPUPzolc1+zOPG/yljs7e89Tnczu9notz9zsxKBmewKAACAACAACgAAgAMjQDPBoYyns2+l+2O/DtbCAAAAAAAAAAAAAAAAAAAAAAADA3w0wG1DW99eXsDv95bDZ9TNgnQcCAAAAAAAAAAAAAAAAAAAAQKsAZB8wW6SUDvBxcz3sx/1l2M/r87DZ+3d+kQQAAAAAAAAAAAAAAAAAAAAAAL9obSAPdxdhn6/Own5vb4XtPBAAAAAAAAAAAAAAAAAAAAAAWgVgcmpqELV0wLW/2PHVXw5bOsDaD4xkzeYDAAAAAAAAAAAAAAAAAAAAAAC/yfzC4iBqdgO1D6gUSNMDzK6fnS8AAAAAAAAAAAAAAAAAAAAAAPwngJvbp7BNAyldRJX+gEXpAI+OT8ICAAAAAAAAAAAAAAAAAAAAAMB/AshusDaQ2g+clA5wd+8gbHZ+2esBAAAAAAAAAAAAAAAAAAAAAGCYFkFNA6m9iKk94JHfBAIAAAAAAAAAAAAAAAAAAADQKgClA64NpOkB2QQCAAAAAAAAAAAAAAAAAAAAMEoAhh3Iyupq2GEfcHZ+Y2PjYRv/xxAAAAAAAAAAAAAAAAAAAAAAOgWgaSAZgKYXMVmzAWfnBwAAAAAAAAAAAAAAAAAAAAAAo5RSIKWLoNYvYgAAAAAAAAAAAAAAAAAAAAAAoEVApmdmw1rEAAAAAAAAAAAAAAAAAAAAAACAiIiIiIiIiHQwP/KhHMCviKP2AAAAAElFTkSuQmCC",AA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAABi0lEQVR42u3cMWoCQRSAYW9mkzYHECGFYJXCKrWVTYpcQwIpUliICAaLEDxASiHn2GIs070njMgy+33wyhWZ91fD6mgEAAAAAAAAANAzh5euRLOdx5M974QFgAAQAAJAAAgAAXA/p7euRJMteL+I57yLJ/t8GxIAAkAACAABIAAEwO0ucrIF1T6fLXgzjed7FY8NCwABIAAEgAAQAALgX3bA2fy+x1MbQLbg7PvZsAAQAAJAAAgAASAArvd37Eo0tT8Mqb1osiEBIAAEgAAQAAJAAPTnImn+8RBO7QslNiAABIAAEAACQAAIgP54/ZmVaJyQABAAAkAACAABIADasdg8lmickAAQAAJAAAgAASAA2pG9EOKEBIAAEAACQAAIAAHQDhdBAhCAAAQgAAEIQAACEIAABCAAAQzH8mtSonFCAkAACAABIAAEgABohz+IEIAABCAAAQhAAAIQgAAEIAABCGA4nj/HJRonJAAEgAAQAAJAAAiAdjytxyUaJyQABIAAEAACQAAIYEAu6/zodBuokO4AAAAASUVORK5CYII=",tA={class:"server-list-container"},eA={class:"page-header"},sA={class:"card-header"},oA={class:"status-badge"},nA={class:"card-content"},iA={class:"server-name text-ellipsis"},aA={class:"server-info"},rA={class:"info-item"},lA={class:"info-item id-tag"},dA={class:"card-actions"},cA={key:0,class:"empty-state"},gA={class:"delete-dialog-body"},mA={class:"checkbox-area"},pA=P({__name:"index",setup(uA){const c=L();z(()=>{c.refreshInstanceList()});const E=o=>{I(`/instance/console/${o.id}`)},_=(o,A)=>{if(o.includes("http"))return o;switch(o){case"neoforge":return Z;case"forge":return j;case"custom":return $;case"server-icon":return new URL(`${localStorage.getItem(W)}/api/instance/icon/${A}.png?x-user-token=${localStorage.getItem(Y)}`,import.meta.url).href;default:return AA}},b=o=>o==="none"?"自定义模式":o.startsWith("@")?o.includes("neoforge")?"NeoForge":"Forge":o.replace(".jar",""),e=M({visible:!1,loading:!1,deleteFile:!1,item:null}),v=(o,A)=>{o.stopPropagation(),e.item=A,e.deleteFile=!1,e.loading=!1,e.visible=!0},h=async()=>{if(e.item){e.loading=!0;try{await R(e.item.id,e.deleteFile),B.success("删除成功"),e.visible=!1,await c.refreshInstanceList()}catch(o){B.error("删除失败: "+o.message)}finally{e.loading=!1}}};return(o,A)=>{const p=a("t-button"),k=a("t-space"),w=a("t-loading"),D=a("t-avatar"),C=a("t-tag"),x=a("t-card"),K=a("t-col"),S=a("t-row"),N=a("t-empty"),X=a("t-checkbox"),y=a("t-dialog");return d(),u("div",tA,[t("div",eA,[A[5]||(A[5]=t("h2",{class:"title"},"服务端列表",-1)),n(k,null,{default:i(()=>[n(p,{theme:"primary",variant:"dashed",onClick:r(c).refreshInstanceList},{default:i(()=>[...A[3]||(A[3]=[l(" 刷新列表 ",-1)])]),_:1},8,["onClick"]),n(p,{theme:"primary",onClick:A[0]||(A[0]=s=>r(I)("/instance/create"))},{default:i(()=>[...A[4]||(A[4]=[l(" 添加服务端 ",-1)])]),_:1})]),_:1})]),n(w,{loading:!1,text:"加载中...",fullscreen:""}),n(S,{gutter:[24,24]},{default:i(()=>[(d(!0),u(H,null,q(r(c).instanceList,s=>(d(),f(K,{key:s.id,xs:12,sm:6,md:4,lg:3,xl:3},{default:i(()=>[n(x,{class:Q(["server-card",{"status-running":s.status}]),bordered:!1,onClick:g=>E(s)},{default:i(()=>[t("div",sA,[t("div",{class:Q(["icon-wrapper",{"is-running":s.status}])},[n(D,{image:_(s.icon,s.id),size:"large",shape:"round",class:"server-icon"},null,8,["image"])],2),t("div",oA,[s.status?(d(),f(C,{key:0,theme:"success",variant:"light",shape:"round"},{icon:i(()=>[n(r(G))]),default:i(()=>[A[6]||(A[6]=l(" 运行中 ",-1))]),_:1})):(d(),f(C,{key:1,theme:"default",variant:"light",shape:"round"},{icon:i(()=>[n(r(J))]),default:i(()=>[A[7]||(A[7]=l(" 未启动 ",-1))]),_:1}))])]),t("div",nA,[t("h3",iA,m(s.name),1),t("div",aA,[t("div",rA,[n(r(O),{class:"info-icon"}),t("span",null,m(b(s.core)),1)]),t("div",lA,[t("span",null,"#"+m(s.id),1)])])]),t("div",dA,[A[8]||(A[8]=t("span",{class:"action-hint"},"点击管理",-1)),n(p,{shape:"circle",theme:"danger",variant:"text",class:"delete-btn",onClick:g=>v(g,s)},{default:i(()=>[n(r(V))]),_:1},8,["onClick"])])]),_:2},1032,["class","onClick"])]),_:2},1024))),128))]),_:1}),r(c).instanceList.length===0?(d(),u("div",cA,[n(N,{description:"暂无服务端实例"})])):T("",!0),n(y,{visible:e.visible,"onUpdate:visible":A[2]||(A[2]=s=>e.visible=s),header:"确认删除",theme:"danger","confirm-btn":{content:"确认删除",loading:e.loading},onConfirm:h},{default:i(()=>{var s,g;return[t("div",gA,[t("p",null,[A[9]||(A[9]=l(" 您确定要删除服务端 ",-1)),t("strong",null,m((s=e.item)==null?void 0:s.name),1),l(" (ID: "+m((g=e.item)==null?void 0:g.id)+") 吗？ ",1)]),A[11]||(A[11]=t("p",{class:"warning-text"},"此操作不可恢复！",-1)),t("div",mA,[n(X,{modelValue:e.deleteFile,"onUpdate:modelValue":A[1]||(A[1]=F=>e.deleteFile=F)},{default:i(()=>[...A[10]||(A[10]=[l("同时删除服务端文件数据",-1)])]),_:1},8,["modelValue"])])])]}),_:1},8,["visible","confirm-btn"])])}}}),ot=U(pA,[["__scopeId","data-v-f9bac3c4"]]);export{ot as default};
