import{D as Ke,F as r,R as Xe,K as Ve,P as De,aa as qe,b0 as d,aX as w,aY as m,a$ as o,G as e,b2 as t,b6 as b,ak as ie,al as ve,ao as f,b5 as K,ap as ye,be as sa,b1 as re,O as Te,b3 as Pe,ba as He,bb as Ne,V as Oe,W as na}from"./index.CWeK9ocq.js";import{u as Ze,c as Ue,g as Me,i as Qe,h as We,j as Ye,_ as Ee,k as ua}from"./index.Do1noIT9.js";import{S as ea,g as aa,a as la}from"./localJava.BEphtPKX.js";import{u as ta,a as Ae}from"./instance.CUAT6zvd.js";import{M as _}from"./tdesign-vue-next.ClIZ97Cx.js";import"./core-js-pure.DN77qAGa.js";import"./crelt.C8TCjufn.js";import"./style-mod.Bc2inJdb.js";import"./w3c-keyname.Vcq4gwWv.js";import"./pinia.CwCJD8HV.js";import"./pinia-plugin-persistedstate_561243483b11dd07f5acf9e797fda690.n2tMOXAx.js";import"./vue-router.f8VyOqpO.js";import"./tvision-color.COTpcftn.js";import"./chroma-js.RLxBGt-u.js";import"./bezier-easing.qwUZoLR4.js";import"./lodash.C2dUGbaG.js";import"./axios.R-lXtGyY.js";import"./qs.XiX0Mm1J.js";import"./side-channel.D5_e29f9.js";import"./es-errors.CFxpeikN.js";import"./object-inspect.C4p7aaXq.js";import"./cron-parser.BHsRiybt.js";import"./luxon.BVaPVz1w.js";import"./side-channel-list.Mptt8X3N.js";import"./side-channel-map.Ce19al5R.js";import"./get-intrinsic.DR3xEH2x.js";import"./es-object-atoms.Ditt1eQ6.js";import"./math-intrinsics.Cv-yPkyD.js";import"./gopd.fcd2-aIC.js";import"./es-define-property.bDCdrV83.js";import"./has-symbols.BaUvM3gb.js";import"./get-proto.DDnjtmUu.js";import"./dunder-proto.BNaYEbSf.js";import"./call-bind-apply-helpers.WnuMKP1p.js";import"./function-bind.CHqF18-c.js";import"./hasown.B1sN64jK.js";import"./call-bound.Dbz9IhIv.js";import"./side-channel-weakmap.BlDgri06.js";import"./nprogress.BFWi6Yo1.js";import"./tdesign-icons-vue-next.o89AUH_k.js";import"./lodash-es.ClUTdtmA.js";import"./mitt.DJ65BbbF.js";import"./sortablejs.C83syoBY.js";const ia={class:"main-layout-container"},ra={class:"steps-aside"},ca={class:"main-content"},da={key:0,class:"form-step-container"},va={class:"step-content"},ma={class:"step-content"},pa={style:{width:"100%"}},fa={class:"java-option-panel"},ga={key:0,class:"flex-row"},_a={class:"tip"},ya={key:1,class:"flex-row"},ha={key:2},wa={key:3},ka={class:"step-content"},ba={key:0,class:"online-select-area"},Va={class:"select-core-wrapper"},Ma={key:0,class:"selected-core-card"},Ua={class:"core-icon"},Sa={class:"core-info"},Fa={class:"core-filename"},$a={key:1,class:"online-select-area"},xa={class:"select-core-wrapper"},Ca={key:1,class:"uploading-state"},Ja={class:"core-filename"},Ka={key:2,class:"selected-core-card"},ja={class:"core-icon"},Ba={class:"core-info"},Ra={class:"core-filename"},Ia={class:"core-url"},La={key:2,class:"online-select-area"},za={class:"step-content"},Ga={key:1,class:"step-content creation-progress"},Ta={class:"progress-title"},Pa={class:"log-time"},Ea={class:"log-message"},Aa={key:2,class:"result-success"},Xa={class:"result-success-title"},Da=Ke({__name:"QuickMode",setup(je){const z=Ze(),G=r(null),me=ta(),u=r(0),T=r(!1),P=r(!1),q=r(!1),te=r(0),V=r([]),B=r(null),E=r(null),Y=r(null),F=r("online"),ee=r(!1),A=r(null),H=r(!1),Z=r(0),I=r(""),Q=r(""),X=r("online"),ae=r([]),he=r([]),D=r(""),W=r(""),we=async(c=!1)=>{try{c&&_.info("æ­£åœ¨åˆ·æ–°Javaç‰ˆæœ¬åˆ—è¡¨(é‡æ–°æ‰«æè€—æ—¶è¾ƒé•¿)...");const l=await aa(z.userInfo.systemInfo.osType.toLowerCase().replace("os",""),z.userInfo.systemInfo.osArchitecture.toLowerCase());l&&Array.isArray(l)&&(ae.value=l.map(y=>({label:`Java ${y}`,value:y})),ae.value.length>0&&!D.value&&(D.value=ae.value[1].value)),he.value=(await la(c)).map(y=>({label:`Java ${y.version}${y.is64Bit?"":" (32ä½)"} (${y.vendor} | ${y.path})`,value:y.path})),he.value.length>0&&(W.value=he.value[0].value),c&&_.success("å·²åˆ·æ–°Javaç‰ˆæœ¬åˆ—è¡¨")}catch(l){_.warning("è·å–åœ¨çº¿Javaç‰ˆæœ¬å¤±è´¥"+l.message)}};Xe(()=>{we()});const n=r({name:"æ–°å»ºæœåŠ¡å™¨",path:"",java:"",core:"",coreUrl:"",coreSha256:"",coreFileKey:"",packageFileKey:"",minM:1024,maxM:4096,args:""}),ce=[{label:"GB",value:"GB"},{label:"MB",value:"MB"}],pe=r("GB"),i=r("GB"),fe=Ve({get:()=>pe.value==="GB"?n.value.minM/1024:n.value.minM,set:c=>{n.value.minM=pe.value==="GB"?Math.round(c*1024):c}}),ge=Ve({get:()=>i.value==="GB"?n.value.maxM/1024:n.value.maxM,set:c=>{n.value.maxM=i.value==="GB"?Math.round(c*1024):c}});De([X,D,W],([c,l,y])=>{var x;c==="env"?n.value.java="java":c==="custom"||c==="local"?n.value.java=y:c==="online"&&(n.value.java=l?`MSLX://Java/${l}`:""),n.value.java&&((x=G.value)==null||x.validate({fields:["java"]}))},{immediate:!0});const Se=Ve(()=>({name:[{required:!0,message:"å®ä¾‹åç§°ä¸èƒ½ä¸ºç©º",trigger:"blur"}],java:[{required:!0,message:"è¯·é…ç½® Java ç¯å¢ƒ",trigger:"change"}],core:[{required:!0,message:"æ ¸å¿ƒåç§°/æ–‡ä»¶ä¸èƒ½ä¸ºç©º",trigger:"change"}],coreUrl:[{validator:c=>{if(F.value==="online"){if(!c)return{result:!1,message:"è¯·é€‰æ‹©ä¸€ä¸ªæœåŠ¡ç«¯æ ¸å¿ƒ",type:"error"};if(c&&!/^https?:\/\/.+/.test(c))return{result:!1,message:"ä¸‹è½½åœ°å€å¿…é¡»ä»¥ http(s) å¼€å¤´",type:"error"}}return!0},trigger:"change"}],coreFileKey:[{validator:c=>F.value==="manual"&&!c?{result:!1,message:"è¯·ä¸Šä¼ æ ¸å¿ƒæ–‡ä»¶",type:"error"}:!0,trigger:"change"}],minM:[{required:!0,min:1,message:"æœ€å°å†…å­˜å¿…é¡»å¤§äº0",trigger:"blur"}],maxM:[{required:!0,min:1,message:"æœ€å¤§å†…å­˜å¿…é¡»å¤§äº0",trigger:"blur"}]})),Fe=[["name","path"],["java"],["core","coreUrl","coreSha256","coreFileKey"],["minM","maxM","args"]],$e=()=>{u.value>0&&(u.value-=1)},Be=async()=>{if(u.value===2){if(F.value==="online"){if(!n.value.coreUrl||!n.value.core){_.warning("è¯·ç‚¹å‡»æŒ‰é’®é€‰æ‹©ä¸€ä¸ªæœåŠ¡ç«¯æ ¸å¿ƒ");return}}else if(F.value==="custom"){if(!n.value.core){_.warning("è¯·è¾“å…¥æ ¸å¿ƒæ–‡ä»¶å");return}}else if(!n.value.coreFileKey){_.warning("è¯·å…ˆä¸Šä¼ æ ¸å¿ƒæ–‡ä»¶");return}}const c=await G.value.validate();if(c===!0){u.value<3&&(u.value+=1);return}const l=new Set(Fe[u.value]);Object.keys(c).some(x=>l.has(x))?_.warning("è¯·æ£€æŸ¥å½“å‰æ­¥éª¤çš„è¾“å…¥"):u.value<3&&(u.value+=1)},Re=c=>{n.value.core=c.filename,n.value.coreUrl=c.url,n.value.coreSha256=c.sha256,n.value.coreFileKey="",_.success(`å·²é€‰æ‹©: ${c.core} (${c.version})`),G.value.validate({fields:["core","coreUrl"]})},xe=()=>{var c;(c=A.value)==null||c.click()},Ie=c=>{if(c===0)return"0 B";const l=1024,y=["B","KB","MB","GB"],x=Math.floor(Math.log(c)/Math.log(l));return parseFloat((c/Math.pow(l,x)).toFixed(2))+" "+y[x]},Ce=async c=>{const l=c.target;if(!l.files||l.files.length===0)return;if(n.value.coreFileKey)try{await Me(n.value.coreFileKey),console.log("æ—§ä¸´æ—¶æ–‡ä»¶å·²æ¸…ç†:",n.value.coreFileKey)}catch(s){console.warn("æ¸…ç†æ—§æ–‡ä»¶å¤±è´¥ï¼Œå¯èƒ½æ–‡ä»¶å·²è¿‡æœŸ",s)}const y=l.files[0],x=y.name;n.value.core=x,n.value.coreUrl="",n.value.coreSha256="",n.value.coreFileKey="",I.value=x,Q.value=Ie(y.size),await Le(y),l.value=""};let $=null;const Le=async c=>{var M;$&&$.abort(),$=new AbortController,H.value=!0,Z.value=0;const y=c.size>200*1024*1024?50*1024*1024:5*1024*1024,x=Math.ceil(c.size/y),s=4,a=5,v=new Map;let k=0;const J=()=>{const g=Date.now();if(g-k<100)return;k=g;const U=Array.from(v.values()).reduce((L,N)=>L+N,0),C=Math.min(U/c.size*98,98);Z.value=Number(C.toFixed(1))};try{const U=(await Qe()).uploadId;if(!U)throw new Error("æ— æ³•è·å–ä¸Šä¼ å‡­è¯");const C=Array.from({length:x},(j,se)=>se),L=async j=>{if($!=null&&$.signal.aborted)throw new Error("å·²å–æ¶ˆ");const se=j*y,de=Math.min(c.size,se+y),R=c.slice(se,de);let p;for(let ne=1;ne<=a;ne++){if($!=null&&$.signal.aborted)throw new Error("å·²å–æ¶ˆ");try{await We(U,j,R,ue=>{ue&&ue.loaded&&(v.set(j,ue.loaded),J())},$==null?void 0:$.signal),v.set(j,R.size),J();return}catch(ue){p=ue,v.set(j,0),J(),ne<a&&await new Promise(_e=>setTimeout(_e,1e3*ne))}}throw new Error(`åˆ†ç‰‡ ${j} å¤±è´¥: ${p==null?void 0:p.message}`)},N=async()=>{for(;C.length>0&&!($!=null&&$.signal.aborted);){const j=C.shift();j!==void 0&&await L(j)}},le=Array(Math.min(s,x)).fill(null).map(()=>N());if(await Promise.all(le),$!=null&&$.signal.aborted)throw new Error("å·²å–æ¶ˆ");const O=(await Ye(U,x)).uploadId;Z.value=100,n.value.coreFileKey=O,_.success("æ ¸å¿ƒæ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼"),(M=G.value)==null||M.validate({fields:["core","coreFileKey"]})}catch(g){if(g.message==="å·²å–æ¶ˆ")return;console.error(g),_.error(`ä¸Šä¼ å¤±è´¥: ${g.message||"æœªçŸ¥é”™è¯¯"}`),n.value.core="",I.value="",Z.value=0,n.value.coreFileKey&&(Me(n.value.coreFileKey).catch(()=>{}),n.value.coreFileKey="")}finally{$!=null&&$.signal.aborted||(H.value=!1)}},S=async()=>{n.value.coreFileKey&&(await Me(n.value.coreFileKey),n.value.coreFileKey="",n.value.core="",I.value="",_.success("æ–‡ä»¶å·²ç§»é™¤"))},ze=async()=>{if(!(await G.value.validate()===!0)){_.warning("è¯·æ£€æŸ¥è¡¨å•æ‰€æœ‰å†…å®¹");return}T.value=!0,V.value=[];const y={...n.value,path:n.value.path||null,coreUrl:n.value.coreUrl||null,coreSha256:n.value.coreSha256||null,coreFileKey:n.value.coreFileKey||null,args:n.value.args||null};F.value==="manual"?(y.coreUrl=null,y.coreSha256=null):y.coreFileKey=null;try{const s=(await Ae(y)).serverId;if(!s)throw new Error("æœåŠ¡å™¨æœªè¿”å› ServerId");E.value=s.toString(),P.value=!0,u.value=4,await Ge(E.value)}catch(x){const s=x.message||"åˆ›å»ºè¯·æ±‚å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–åç«¯æœåŠ¡";_.error(s),T.value=!1}},Ge=async c=>{const{baseUrl:l,token:y}=z;let x=!1;const s=new URL("/api/hubs/creationProgressHub",l||window.location.origin);s.searchParams.append("x-user-token",y),B.value=new He().withUrl(s.toString(),{withCredentials:!1}).configureLogging(Ne.Information).build();const a=(v,k=null)=>{V.value.push({time:new Date().toLocaleTimeString(),message:v,progress:k}),Oe(()=>{Y.value&&(Y.value.scrollTop=Y.value.scrollHeight)})};B.value.on("StatusUpdate",(v,k,J)=>{var M,g;v.toString()===c&&(a(k,J),J!==null&&J>=0&&(te.value=J),J===100?(x=!0,_.success("æœåŠ¡å™¨åˆ›å»ºæˆåŠŸï¼"),(M=B.value)==null||M.stop(),P.value=!1,q.value=!0,u.value=5,T.value=!1,me.refreshInstanceList()):J===-1&&(_.error(k||"åˆ›å»ºè¿‡ç¨‹ä¸­å‘ç”ŸæœªçŸ¥é”™è¯¯"),(g=B.value)==null||g.stop(),P.value=!1,T.value=!1,u.value=0))});try{await B.value.start(),a("å·²è¿æ¥åˆ°å®æ—¶è¿›åº¦æœåŠ¡..."),await B.value.invoke("TrackServer",c),a("å·²è®¢é˜…ä»»åŠ¡ï¼Œç­‰å¾…æœåŠ¡å™¨å“åº”...")}catch(v){x||(a(`SignalR è¿æ¥å¤±è´¥: ${v.message}`,-1),_.error("æ— æ³•è¿æ¥åˆ°å®æ—¶è¿›åº¦æœåŠ¡"),P.value=!1,T.value=!1,u.value=0)}};qe(()=>{var c;(c=B.value)==null||c.stop(),$&&$.abort()});const Je=()=>{q.value=!1,u.value=0,n.value={...n.value,name:"æ–°å»ºæœåŠ¡å™¨",core:"",coreUrl:"",coreSha256:"",path:"",args:"",coreFileKey:""},I.value="",F.value="online",X.value="online",W.value=""};return(c,l)=>{const y=d("t-step-item"),x=d("t-steps"),s=d("t-input"),a=d("t-form-item"),v=d("t-alert"),k=d("t-radio-button"),J=d("t-radio-group"),M=d("t-select"),g=d("t-button"),U=d("t-icon"),C=d("t-progress"),L=d("t-input-number"),N=d("t-space"),le=d("t-col"),oe=d("t-row"),O=d("t-textarea"),j=d("t-form"),se=d("t-list-item-meta"),de=d("t-list-item"),R=d("t-list");return m(),w("div",null,[o("div",ia,[o("div",ra,[e(x,{layout:"vertical",style:{"margin-top":"16px"},current:u.value,status:"process",readonly:""},{default:t(()=>[e(y,{title:"åŸºæœ¬ä¿¡æ¯",content:"å¡«å†™å®ä¾‹åç§°å’Œè·¯å¾„"}),e(y,{title:"Java ç¯å¢ƒ",content:"é…ç½® Java è¿è¡Œæ—¶"}),e(y,{title:"æ ¸å¿ƒæ–‡ä»¶",content:"æŒ‡å®šæ ¸å¿ƒæ–‡ä»¶åŠä¸‹è½½"}),e(y,{title:"èµ„æºé…ç½®",content:"è®¾ç½®å†…å­˜ä¸ JVM å‚æ•°"}),e(y,{title:"åˆ›å»ºå®ä¾‹",content:"æäº¤å¹¶ç­‰å¾…åˆ›å»º"}),e(y,{title:"å®Œæˆ",content:"æŸ¥çœ‹åˆ›å»ºç»“æœ"})]),_:1},8,["current"])]),o("div",ca,[!P.value&&!q.value?(m(),w("div",da,[e(j,{ref_key:"formRef",ref:G,data:n.value,rules:Se.value,"label-align":"top",class:"step-form",onSubmit:ze},{default:t(()=>[ie(o("div",va,[e(a,{label:"å®ä¾‹åç§°",name:"name"},{default:t(()=>[e(s,{modelValue:n.value.name,"onUpdate:modelValue":l[0]||(l[0]=p=>n.value.name=p),placeholder:"ä¸ºä½ çš„æœåŠ¡å™¨èµ·ä¸ªåå­—"},null,8,["modelValue"])]),_:1}),e(a,{label:"å®ä¾‹è·¯å¾„",name:"path",help:"é€‰å¡«ï¼Œç•™ç©ºå°†ä½¿ç”¨é»˜è®¤è·¯å¾„"},{default:t(()=>[e(s,{modelValue:n.value.path,"onUpdate:modelValue":l[1]||(l[1]=p=>n.value.path=p),placeholder:"ä¾‹å¦‚: D:\\MyServer"},null,8,["modelValue"])]),_:1})],512),[[ve,u.value===0]]),ie(o("div",ma,[e(v,{theme:"info",title:"å¦‚ä½•é€‰æ‹© Java ç‰ˆæœ¬?",class:"java-alert"},{message:t(()=>[...l[20]||(l[20]=[o("p",null,"ä¸åŒçš„ Minecraft ç‰ˆæœ¬éœ€è¦ä¸åŒçš„ Java ç‰ˆæœ¬ã€‚",-1),o("ul",null,[o("li",null,[f("å»ºè®®ç›´æ¥ä½¿ç”¨ "),o("b",null,"æ¨èç‰ˆæœ¬"),f(" è¶…å‡ºç‰ˆæœ¬å¯èƒ½å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ã€‚")]),o("li",null,"MC 26.1 - æœ€æ–°ç‰ˆ: éœ€è¦ Java 25 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚"),o("li",null,"MC 1.20.5 - 1.21.10: éœ€è¦ Java 21 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚"),o("li",null,"MC 1.18 - 1.20.4: éœ€è¦ Java 17 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚"),o("li",null,"MC 1.17/1.17.1: éœ€è¦ Java 16ã€‚"),o("li",null,"MC 1.13 - 1.16.5: éœ€è¦ Java 8 / 11ã€‚"),o("li",null,"MC 1.12.2 åŠä»¥ä¸‹: éœ€è¦ Java 8ã€‚")],-1)])]),_:1}),e(a,{label:"Java æ¥æº",name:"java"},{default:t(()=>[o("div",pa,[e(J,{modelValue:X.value,"onUpdate:modelValue":l[2]||(l[2]=p=>X.value=p),variant:"default-filled"},{default:t(()=>[e(k,{value:"online"},{default:t(()=>[...l[21]||(l[21]=[f("åœ¨çº¿ä¸‹è½½",-1)])]),_:1}),e(k,{value:"local"},{default:t(()=>[...l[22]||(l[22]=[f("é€‰æ‹©ç”µè„‘ä¸Šçš„ Java",-1)])]),_:1}),e(k,{value:"env"},{default:t(()=>[...l[23]||(l[23]=[f("ç¯å¢ƒå˜é‡",-1)])]),_:1}),e(k,{value:"custom"},{default:t(()=>[...l[24]||(l[24]=[f("è‡ªå®šä¹‰è·¯å¾„",-1)])]),_:1})]),_:1},8,["modelValue"]),o("div",fa,[X.value==="online"?(m(),w("div",ga,[e(M,{modelValue:D.value,"onUpdate:modelValue":l[3]||(l[3]=p=>D.value=p),options:ae.value,placeholder:"è¯·é€‰æ‹© Java ç‰ˆæœ¬"},null,8,["modelValue","options"]),o("div",_a," å°†ä¸‹è½½å¹¶ä½¿ç”¨ Java "+K(D.value||"?")+" "+K(ye(z).userInfo.systemInfo.osType.toLowerCase().replace("os",""))+" / "+K(ye(z).userInfo.systemInfo.osArchitecture.toLowerCase()),1)])):b("",!0),X.value==="local"?(m(),w("div",ya,[e(M,{modelValue:W.value,"onUpdate:modelValue":l[4]||(l[4]=p=>W.value=p),options:he.value,placeholder:"è¯·é€‰æ‹© Java ç‰ˆæœ¬"},null,8,["modelValue","options"]),e(g,{variant:"outline",theme:"primary",onClick:l[5]||(l[5]=p=>we(!0))},{default:t(()=>[...l[25]||(l[25]=[f("é‡æ–°æ‰«æ",-1)])]),_:1})])):b("",!0),X.value==="env"?(m(),w("div",ha,[e(s,{"model-value":"java",readonly:"",disabled:""}),l[26]||(l[26]=o("div",{class:"tip"},"å°†ä½¿ç”¨ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­çš„ java å‘½ä»¤",-1))])):b("",!0),X.value==="custom"?(m(),w("div",wa,[e(s,{modelValue:W.value,"onUpdate:modelValue":l[6]||(l[6]=p=>W.value=p),placeholder:"ä¾‹å¦‚: C:\\Program Files\\Java\\jdk-17\\bin\\java.exe"},null,8,["modelValue"])])):b("",!0)])])]),_:1})],512),[[ve,u.value===1]]),ie(o("div",ka,[e(a,{label:"é€‰æ‹©æ‚¨çš„Minecraftå¼€æœä½¿ç”¨çš„æœåŠ¡ç«¯æ ¸å¿ƒ"},{default:t(()=>[e(J,{modelValue:F.value,"onUpdate:modelValue":l[7]||(l[7]=p=>F.value=p),variant:"default-filled"},{default:t(()=>[e(k,{value:"online"},{default:t(()=>[...l[27]||(l[27]=[f("åœ¨çº¿ä¸‹è½½ (æ¨è)",-1)])]),_:1}),e(k,{value:"manual"},{default:t(()=>[...l[28]||(l[28]=[f("é€‰æ‹©æœ¬åœ°æ–‡ä»¶",-1)])]),_:1}),e(k,{value:"custom"},{default:t(()=>[...l[29]||(l[29]=[f("è‡ªå®šä¹‰æ–‡ä»¶å",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),F.value==="online"?(m(),w("div",ba,[e(a,{label:"é€‰æ‹©æœåŠ¡ç«¯æ ¸å¿ƒ",name:"coreUrl"},{default:t(()=>[o("div",Va,[e(g,{variant:"outline",onClick:l[8]||(l[8]=p=>ee.value=!0)},{icon:t(()=>[e(U,{name:"cloud-download"})]),default:t(()=>[l[30]||(l[30]=f(" ç‚¹å‡»æ‰“å¼€æœåŠ¡ç«¯æ ¸å¿ƒé€‰æ‹©åº“ ",-1))]),_:1}),n.value.core?(m(),w("div",Ma,[o("div",Ua,[e(U,{name:"check-circle-filled"})]),o("div",Sa,[o("div",Fa,K(n.value.core),1),l[31]||(l[31]=o("div",{class:"core-url",title:"MSLX å°†åœ¨ç¨åå¸®æ‚¨è‡ªåŠ¨ä¸‹è½½æ­¤æ–‡ä»¶..."}," MSLX å°†åœ¨ç¨åå¸®æ‚¨è‡ªåŠ¨ä¸‹è½½æ­¤æ–‡ä»¶... ",-1))]),e(g,{shape:"circle",variant:"text",theme:"danger",onClick:l[9]||(l[9]=p=>{n.value.core="",n.value.coreUrl=""})},{default:t(()=>[e(U,{name:"close"})]),_:1})])):b("",!0)])]),_:1}),ie(o("input",{"onUpdate:modelValue":l[10]||(l[10]=p=>n.value.coreSha256=p),type:"hidden"},null,512),[[sa,n.value.coreSha256]])])):b("",!0),F.value==="manual"?(m(),w("div",$a,[e(a,{label:"ä¸Šä¼ æ ¸å¿ƒæ–‡ä»¶",name:"coreFileKey"},{default:t(()=>[o("div",xa,[o("input",{ref_key:"uploadInputRef",ref:A,accept:".jar",type:"file",style:{display:"none"},onChange:Ce},null,544),!H.value&&!n.value.coreFileKey?(m(),re(g,{key:0,variant:"outline",onClick:xe},{icon:t(()=>[e(U,{name:"upload"})]),default:t(()=>[l[32]||(l[32]=f(" ç‚¹å‡»é€‰æ‹©æ–‡ä»¶å¹¶ä¸Šä¼  ",-1))]),_:1})):b("",!0),H.value?(m(),w("div",Ca,[o("div",Ja,"æ­£åœ¨ä¸Šä¼ : "+K(I.value)+" ("+K(Q.value)+")",1),e(C,{theme:"line",percentage:Z.value},null,8,["percentage"]),l[33]||(l[33]=o("div",{class:"tip"},"åˆ«ç€æ€¥ï¼Œå–æ¯èŒ¶ğŸµ...",-1))])):b("",!0),n.value.coreFileKey&&!H.value?(m(),w("div",Ka,[o("div",ja,[e(U,{name:"check-circle-filled"})]),o("div",Ba,[o("div",Ra,K(I.value),1),o("div",Ia,K(Q.value)+" | å·²ä¸Šä¼ å‡†å¤‡å°±ç»ª",1)]),e(g,{shape:"circle",variant:"text",theme:"primary",onClick:xe},{icon:t(()=>[e(U,{name:"swap"})]),_:1}),e(g,{shape:"circle",variant:"text",theme:"danger",onClick:S},{icon:t(()=>[e(U,{name:"delete"})]),_:1})])):b("",!0)])]),_:1})])):b("",!0),F.value==="custom"?(m(),w("div",La,[e(v,{theme:"warning",message:"æ­¤æ¨¡å¼é€šå¸¸ç”¨äºæœåŠ¡å™¨ç›®å½•ä¸­å·²ç»å­˜åœ¨æ ¸å¿ƒæ–‡ä»¶ï¼Œæˆ–è€…æ‚¨æ‰“ç®—ç¨åæ‰‹åŠ¨é€šè¿‡æ–‡ä»¶ç®¡ç†ä¸Šä¼ æ ¸å¿ƒã€‚",style:{"margin-bottom":"16px"}}),e(a,{label:"æ ¸å¿ƒæ–‡ä»¶å",name:"core",help:"è¯·ç¡®ä¿æ–‡ä»¶ååŒ…å«åç¼€ï¼Œä¾‹å¦‚: server.jar"},{default:t(()=>[e(s,{modelValue:n.value.core,"onUpdate:modelValue":l[11]||(l[11]=p=>n.value.core=p),placeholder:"è¯·è¾“å…¥æ ¸å¿ƒæ–‡ä»¶å (ä¾‹å¦‚ server.jar)"},null,8,["modelValue"])]),_:1})])):b("",!0)],512),[[ve,u.value===2]]),ie(o("div",za,[e(oe,{gutter:[16,24]},{default:t(()=>[e(le,{xs:12,span:6},{default:t(()=>[e(a,{label:"æœ€å°å†…å­˜",name:"minM"},{default:t(()=>[e(N,{size:8,style:{width:"100%"}},{default:t(()=>[e(L,{modelValue:fe.value,"onUpdate:modelValue":l[12]||(l[12]=p=>fe.value=p),min:0,"decimal-places":pe.value==="GB"?1:0,placeholder:"Xms",theme:"column",style:{width:"100%"}},null,8,["modelValue","decimal-places"]),e(M,{modelValue:pe.value,"onUpdate:modelValue":l[13]||(l[13]=p=>pe.value=p),options:ce,clearable:!1,style:{width:"80px"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(le,{xs:12,span:6},{default:t(()=>[e(a,{label:"æœ€å¤§å†…å­˜",name:"maxM"},{default:t(()=>[e(N,{size:8,style:{width:"100%"}},{default:t(()=>[e(L,{modelValue:ge.value,"onUpdate:modelValue":l[14]||(l[14]=p=>ge.value=p),min:0,"decimal-places":i.value==="GB"?1:0,placeholder:"Xmx",theme:"column",style:{width:"100%"}},null,8,["modelValue","decimal-places"]),e(M,{modelValue:i.value,"onUpdate:modelValue":l[15]||(l[15]=p=>i.value=p),options:ce,clearable:!1,style:{width:"80px"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(a,{label:"é¢å¤– JVM å‚æ•° (å¯é€‰)",name:"args",help:"ä¾‹å¦‚: -XX:+UseG1GC",style:{"margin-top":"16px"}},{default:t(()=>[e(O,{modelValue:n.value.args,"onUpdate:modelValue":l[16]||(l[16]=p=>n.value.args=p),placeholder:"-XX:+UseG1GC"},null,8,["modelValue"])]),_:1})],512),[[ve,u.value===3]]),e(a,{class:"step-actions"},{default:t(()=>[u.value>0?(m(),re(g,{key:0,theme:"default",onClick:$e},{default:t(()=>[...l[34]||(l[34]=[f("ä¸Šä¸€æ­¥",-1)])]),_:1})):b("",!0),u.value<3?(m(),re(g,{key:1,type:"button",onClick:Be},{default:t(()=>[...l[35]||(l[35]=[f("ä¸‹ä¸€æ­¥",-1)])]),_:1})):b("",!0),u.value===3?(m(),re(g,{key:2,theme:"primary",type:"submit",loading:T.value},{default:t(()=>[...l[36]||(l[36]=[f(" æäº¤åˆ›å»º ",-1)])]),_:1},8,["loading"])):b("",!0)]),_:1})]),_:1},8,["data","rules"])])):b("",!0),P.value?(m(),w("div",Ga,[o("div",Ta,"æ­£åœ¨åˆ›å»ºå®ä¾‹ ("+K(E.value)+")",1),l[37]||(l[37]=o("p",null,"è¯·å‹¿å…³é—­æ­¤é¡µé¢ï¼Œåˆ›å»ºè¿‡ç¨‹å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿ...",-1)),e(C,{theme:"plump",percentage:te.value,label:`${te.value.toFixed(2)}%`},null,8,["percentage","label"]),o("div",{ref_key:"logContainerRef",ref:Y,class:"log-container"},[e(R,{split:!0},{default:t(()=>[(m(!0),w(Te,null,Pe(V.value,(p,ne)=>(m(),re(de,{key:ne},{default:t(()=>[e(se,null,{description:t(()=>[o("span",Pa,"["+K(p.time)+"]",1),o("span",Ea,K(p.message),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})],512)])):b("",!0),q.value?(m(),w("div",Aa,[e(U,{class:"result-success-icon",name:"check-circle"}),o("div",Xa,"æœåŠ¡å™¨ ("+K(E.value)+") å·²åˆ›å»ºæˆåŠŸ",1),l[40]||(l[40]=o("div",{class:"result-success-describe"},"ä½ ç°åœ¨å¯ä»¥å»æœåŠ¡å™¨åˆ—è¡¨å¯åŠ¨å®ƒäº†",-1)),o("div",null,[e(g,{onClick:l[17]||(l[17]=()=>{Je(),ye(Ue)("/instance/list")})},{default:t(()=>[...l[38]||(l[38]=[f(" è¿”å›æœåŠ¡ç«¯åˆ—è¡¨ ",-1)])]),_:1}),e(g,{theme:"default",onClick:l[18]||(l[18]=()=>{Je(),ye(Ue)(`/instance/console/${E.value}`)})},{default:t(()=>[...l[39]||(l[39]=[f(" å‰å¾€æ§åˆ¶å° ",-1)])]),_:1})])])):b("",!0)])]),e(ea,{visible:ee.value,"onUpdate:visible":l[19]||(l[19]=p=>ee.value=p),onConfirm:Re},null,8,["visible"])])}}}),qa=Ee(Da,[["__scopeId","data-v-d0718991"]]),Ha={key:0},Na={key:1,class:"result-success"},Oa={class:"result-success-title"},Za=Ke({__name:"CustomMode",setup(je){const z=r(!1),G=r(0),me=r(null),u=na({name:"",path:null,java:"none",core:"none",coreUrl:"",coreSha256:"",coreFileKey:"",packageFileKey:"",minM:1027,maxM:1027,args:"",ignoreEula:!0}),T={name:[{required:!0,message:"è¯·è¾“å…¥æœåŠ¡å™¨åç§°",type:"error"}],args:[{required:!0,message:"è¯·è¾“å…¥è‡ªå®šä¹‰å¯åŠ¨å‚æ•°",type:"error"}]},P=async({validateResult:te})=>{if(te===!0)try{const V=await Ae(u);G.value=V.serverId,_.success("åˆ›å»ºæˆåŠŸ"),z.value=!0}catch(V){_.error("åˆ›å»ºå¤±è´¥ï¼"+V.message)}else _.warning("è¯·æ£€æŸ¥è¡¨å•å¡«å†™")},q=()=>{z.value=!1,Object.assign(u,{name:"æ–°å»ºæœåŠ¡å™¨",path:null,java:"none",core:"none",packageFileKey:"",coreFileKey:"",coreUrl:"",coreSha256:"",minM:1027,maxM:1027,args:"",ignoreEula:!0})};return(te,V)=>{const B=d("t-input"),E=d("t-form-item"),Y=d("t-textarea"),F=d("t-switch"),ee=d("t-button"),A=d("t-space"),H=d("t-form"),Z=d("t-icon");return m(),w("div",null,[z.value?(m(),w("div",Na,[e(Z,{class:"result-success-icon",name:"check-circle"}),o("div",Oa,"æœåŠ¡å™¨ ("+K(G.value)+") å·²åˆ›å»ºæˆåŠŸ",1),V[9]||(V[9]=o("div",{class:"result-success-describe"},"ä½ ç°åœ¨å¯ä»¥å»æœåŠ¡å™¨åˆ—è¡¨å¯åŠ¨å®ƒäº†",-1)),o("div",null,[e(ee,{onClick:V[4]||(V[4]=()=>{q(),ye(Ue)("/instance/list")})},{default:t(()=>[...V[7]||(V[7]=[f(" è¿”å›æœåŠ¡ç«¯åˆ—è¡¨ ",-1)])]),_:1}),e(ee,{theme:"default",onClick:V[5]||(V[5]=()=>{q(),ye(Ue)(`/instance/console/${G.value}`)})},{default:t(()=>[...V[8]||(V[8]=[f(" å‰å¾€æ§åˆ¶å° ",-1)])]),_:1})])])):(m(),w("div",Ha,[e(H,{ref_key:"formRef",ref:me,rules:T,data:u,"label-align":"top",onSubmit:P},{default:t(()=>[e(E,{label:"æœåŠ¡å™¨åç§°",name:"name"},{default:t(()=>[e(B,{modelValue:u.name,"onUpdate:modelValue":V[0]||(V[0]=I=>u.name=I),placeholder:"ç»™ä½ çš„æœåŠ¡å™¨èµ·ä¸€ä¸ªåå­—"},null,8,["modelValue"])]),_:1}),e(E,{label:"å­˜å‚¨è·¯å¾„(å¯é€‰)",name:"path",help:"ä¸å¡«å†™å°†ä½¿ç”¨é»˜è®¤çš„ä¿å­˜è·¯å¾„ã€‚"},{default:t(()=>[e(B,{modelValue:u.path,"onUpdate:modelValue":V[1]||(V[1]=I=>u.path=I),placeholder:"è¯·å¡«å†™æœåŠ¡ç«¯ä¿å­˜ä½ç½®"},null,8,["modelValue"])]),_:1}),e(E,{label:"å¯åŠ¨æŒ‡ä»¤",name:"args",help:"æ­¤æ¨¡å¼ä¸ä¼šè‡ªåŠ¨å¸®æ‚¨é…ç½®Javaç¯å¢ƒï¼Œæ‚¨éœ€è¦å¡«å†™å®Œæ•´çš„å¯åŠ¨å‘½ä»¤ã€‚"},{default:t(()=>[e(Y,{modelValue:u.args,"onUpdate:modelValue":V[2]||(V[2]=I=>u.args=I),placeholder:"start.bat...",autosize:{minRows:5,maxRows:25},class:"code-font-textarea"},null,8,["modelValue"])]),_:1}),e(E,{label:"å¿½ç•¥EULAæç¤º",name:"args",help:"è‹¥æ‚¨çš„å®ä¾‹å¹¶éMCæœåŠ¡å™¨ï¼Œå¯æ‰“å¼€æ­¤é€‰é¡¹"},{default:t(()=>[e(F,{modelValue:u.ignoreEula,"onUpdate:modelValue":V[3]||(V[3]=I=>u.ignoreEula=I),label:["å·²å¼€å¯","å·²å…³é—­"]},null,8,["modelValue"])]),_:1}),e(E,{style:{"margin-top":"20px"}},{default:t(()=>[e(A,null,{default:t(()=>[e(ee,{theme:"primary",type:"submit"},{default:t(()=>[...V[6]||(V[6]=[f("æäº¤åˆ›å»º",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["data"])]))])}}}),Qa=Ee(Za,[["__scopeId","data-v-74d65900"]]),Wa={class:"main-layout-container"},Ya={class:"steps-aside"},el={class:"main-content"},al={key:0,class:"form-step-container"},ll={class:"step-content"},tl={class:"step-content"},ol={class:"select-core-wrapper"},sl={key:1,class:"uploading-state"},nl={class:"core-filename"},ul={key:2,class:"uploading-state"},il={key:3,class:"selected-core-card"},rl={class:"core-icon"},cl={class:"core-info"},dl={class:"core-filename"},vl={class:"core-url"},ml={class:"step-content"},pl={key:0},fl={key:1},gl={key:0,class:"online-select-area"},_l={class:"select-core-wrapper"},yl={key:0,class:"selected-core-card"},hl={class:"core-icon"},wl={class:"core-info"},kl={class:"core-filename"},bl={key:1,class:"online-select-area"},Vl={class:"step-content"},Ml={style:{width:"100%"}},Ul={class:"java-option-panel"},Sl={key:0,class:"flex-row"},Fl={key:1,class:"flex-row"},$l={key:2},xl={key:3},Cl={class:"step-content"},Jl={key:1,class:"step-content creation-progress"},Kl={class:"progress-title"},jl={key:2,class:"result-success"},Bl=Ke({__name:"PackageMode",setup(je){const z=Ze(),G=r(null),me=ta(),u=r(0),T=r(!1),P=r(!1),q=r(!1),te=r(0),V=r([]),B=r(null),E=r(null),Y=r(null),F=r("online"),ee=r(!1),A=r([]),H=r(!1),Z=r(""),I=r(null),Q=r(!1),X=r(0),ae=r(""),he=r(""),D=r("online"),W=r([]),we=r([]),n=r(""),ce=r(""),pe=async(s=!1)=>{try{s&&_.info("æ­£åœ¨åˆ·æ–°Javaç‰ˆæœ¬åˆ—è¡¨...");const a=await aa(z.userInfo.systemInfo.osType.toLowerCase().replace("os",""),z.userInfo.systemInfo.osArchitecture.toLowerCase());a&&Array.isArray(a)&&(W.value=a.map(v=>({label:`Java ${v}`,value:v})),W.value.length>0&&!n.value&&(n.value=W.value[1].value)),we.value=(await la(s)).map(v=>({label:`Java ${v.version}${v.is64Bit?"":" (32ä½)"} (${v.vendor} | ${v.path})`,value:v.path})),we.value.length>0&&(ce.value=we.value[0].value),s&&_.success("å·²åˆ·æ–°Javaç‰ˆæœ¬åˆ—è¡¨")}catch(a){_.warning("è·å–åœ¨çº¿Javaç‰ˆæœ¬å¤±è´¥: "+a.message)}};Xe(()=>{pe()});const i=r({name:"æ–°å»ºæ•´åˆåŒ…æœåŠ¡å™¨",path:"",java:"",core:"",coreUrl:"",coreSha256:"",coreFileKey:"",packageFileKey:"",minM:2048,maxM:6144,args:""}),fe=r("GB"),ge=r("GB"),Se=[{label:"MB",value:"MB"},{label:"GB",value:"GB"}],Fe=Ve({get:()=>fe.value==="GB"?i.value.minM/1024:i.value.minM,set:s=>{i.value.minM=fe.value==="GB"?Math.round(s*1024):s}}),$e=Ve({get:()=>ge.value==="GB"?i.value.maxM/1024:i.value.maxM,set:s=>{i.value.maxM=ge.value==="GB"?Math.round(s*1024):s}});De([D,n,ce],([s,a,v])=>{var k;s==="env"?i.value.java="java":s==="custom"||s==="local"?i.value.java=v:s==="online"&&(i.value.java=a?`MSLX://Java/${a}`:""),i.value.java&&((k=G.value)==null||k.validate({fields:["java"]}))},{immediate:!0});const Be=Ve(()=>({name:[{required:!0,message:"å®ä¾‹åç§°ä¸èƒ½ä¸ºç©º",trigger:"blur"}],packageFileKey:[{required:!0,message:"è¯·ä¸Šä¼ æ•´åˆåŒ…æ–‡ä»¶",trigger:"change"}],core:[{validator:s=>{if(A.value.length>0){if(!s)return{result:!1,message:"è¯·é€‰æ‹©ä¸€ä¸ªå¯åŠ¨Jar",type:"error"}}else{if(F.value==="online"&&!i.value.coreUrl)return{result:!1,message:"è¯·é€‰æ‹©æœåŠ¡ç«¯æ ¸å¿ƒ",type:"error"};if(F.value==="manual"&&!i.value.coreFileKey)return{result:!1,message:"è¯·ä¸Šä¼ æ ¸å¿ƒæ–‡ä»¶",type:"error"}}return!0},trigger:"change"}],java:[{required:!0,message:"è¯·é…ç½® Java ç¯å¢ƒ",trigger:"change"}],minM:[{required:!0,min:1,message:"å¿…é¡»å¤§äº0",trigger:"blur"}],maxM:[{required:!0,min:1,message:"å¿…é¡»å¤§äº0",trigger:"blur"}]})),Re=[["name","path"],["packageFileKey"],["core","coreUrl","coreFileKey"],["java"],["minM","maxM","args"]],xe=()=>{u.value>0&&(u.value-=1)},Ie=async()=>{if(u.value===1){if(!i.value.packageFileKey){_.warning("è¯·å…ˆä¸Šä¼ æœåŠ¡ç«¯æ•´åˆåŒ…(Zip)");return}if(Q.value||H.value){_.warning("è¯·ç­‰å¾…ä¸Šä¼ æˆ–åˆ†æå®Œæˆ");return}}if(u.value===2)if(A.value.length>0){if(!i.value.core){_.warning("è¯·ä»åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªå¯åŠ¨æ ¸å¿ƒ");return}}else{if(F.value==="online"&&(!i.value.coreUrl||!i.value.core)){_.warning("è¯·é€‰æ‹©ä¸€ä¸ªæœåŠ¡ç«¯æ ¸å¿ƒ");return}if(F.value==="manual"&&!i.value.coreFileKey){_.warning("è¯·ä¸Šä¼ æ ¸å¿ƒæ–‡ä»¶");return}}const s=await G.value.validate();if(s===!0){u.value<4&&(u.value+=1);return}const a=new Set(Re[u.value]);Object.keys(s).some(k=>a.has(k))?_.warning("è¯·æ£€æŸ¥å½“å‰æ­¥éª¤çš„è¾“å…¥"):u.value<4&&(u.value+=1)},Ce=()=>{var s;(s=I.value)==null||s.click()},$=s=>{if(s===0)return"0 B";const a=1024,v=["B","KB","MB","GB"],k=Math.floor(Math.log(s)/Math.log(a));return parseFloat((s/Math.pow(a,k)).toFixed(2))+" "+v[k]},Le=async s=>{const a=s.target;if(!a.files||a.files.length===0)return;if(i.value.packageFileKey)try{await Me(i.value.packageFileKey)}catch(k){console.error(k)}i.value.core="",A.value=[],Z.value="";const v=a.files[0];ae.value=v.name,he.value=$(v.size),await ze(v),a.value=""};let S=null;const ze=async s=>{S&&S.abort(),S=new AbortController,Q.value=!0,X.value=0;const v=s.size>200*1024*1024?50*1024*1024:10*1024*1024,k=Math.ceil(s.size/v),J=4,M=5,g=new Map;let U=0;const C=()=>{const L=Date.now();if(L-U<100)return;U=L;const N=Array.from(g.values()).reduce((oe,O)=>oe+O,0),le=Math.min(N/s.size*98,98);X.value=Number(le.toFixed(1))};try{const N=(await Qe()).uploadId;if(!N)throw new Error("æ— æ³•è·å–ä¸Šä¼ å‡­è¯");const le=Array.from({length:k},(R,p)=>p),oe=async R=>{if(S!=null&&S.signal.aborted)throw new Error("å·²å–æ¶ˆ");const p=R*v,ne=Math.min(s.size,p+v),ue=s.slice(p,ne);let _e;for(let be=1;be<=M;be++){if(S!=null&&S.signal.aborted)throw new Error("å·²å–æ¶ˆ");try{await We(N,R,ue,ke=>{ke&&ke.loaded&&(g.set(R,ke.loaded),C())},S==null?void 0:S.signal),g.set(R,ue.size),C();return}catch(ke){_e=ke,g.set(R,0),C(),be<M&&await new Promise(h=>setTimeout(h,1e3*be))}}throw new Error(`åˆ†ç‰‡ ${R} å¤±è´¥: ${_e==null?void 0:_e.message}`)},O=async()=>{for(;le.length>0&&!(S!=null&&S.signal.aborted);){const R=le.shift();R!==void 0&&await oe(R)}},j=Array(Math.min(J,k)).fill(null).map(()=>O());if(await Promise.all(j),S!=null&&S.signal.aborted)throw new Error("å·²å–æ¶ˆ");X.value=99;const de=(await Ye(N,k)).uploadId;X.value=100,i.value.packageFileKey=de,_.success("ä¸Šä¼ æˆåŠŸï¼Œæ­£åœ¨åˆ†ææ•´åˆåŒ…å†…å®¹..."),await Ge(de)}catch(L){if(L.message==="å·²å–æ¶ˆ")return;S==null||S.abort(),console.error(L),_.error(`ä¸Šä¼ å¤±è´¥: ${L.message||"æœªçŸ¥é”™è¯¯"}`),ae.value="",X.value=0,i.value.packageFileKey&&(Me(i.value.packageFileKey).catch(()=>{}),i.value.packageFileKey="")}finally{S!=null&&S.signal.aborted||(Q.value=!1)}},Ge=async s=>{H.value=!0;try{const a=await ua(s);A.value=a.jars||[],Z.value=a.detectedRoot||"",a.count===1&&a.jars.length>0?(i.value.core=a.jars[0],_.success(`è‡ªåŠ¨è¯†åˆ«åˆ°æœåŠ¡ç«¯æ ¸å¿ƒ: ${a.jars[0]}`)):a.count>1?_.info(`æ•´åˆåŒ…å†…æ£€æµ‹åˆ° ${a.count} ä¸ªæœåŠ¡ç«¯æ ¸å¿ƒï¼Œè¯·åœ¨ä¸‹ä¸€æ­¥é€‰æ‹©`):_.warning("æœªæ£€æµ‹åˆ°æ•´åˆåŒ…å†…å­˜åœ¨æœåŠ¡ç«¯æ ¸å¿ƒï¼Œè¯·åœ¨ä¸‹ä¸€æ­¥æ‰‹åŠ¨é…ç½®æ ¸å¿ƒ")}catch(a){_.error("æ•´åˆåŒ…åˆ†æå¤±è´¥: "+a.message)}finally{H.value=!1}},Je=async()=>{i.value.packageFileKey&&(await Me(i.value.packageFileKey),i.value.packageFileKey="",ae.value="",A.value=[],i.value.core="",_.success("æ–‡ä»¶å·²ç§»é™¤"))},c=s=>{i.value.core=s.filename,i.value.coreUrl=s.url,i.value.coreSha256=s.sha256,i.value.coreFileKey="",_.success(`å·²é€‰æ‹©: ${s.core} (${s.version})`)},l=async()=>{if(await G.value.validate()!==!0){_.warning("è¯·æ£€æŸ¥è¡¨å•æ‰€æœ‰å†…å®¹");return}T.value=!0,V.value=[];const a={...i.value,path:i.value.path||null,coreUrl:i.value.coreUrl||null,coreSha256:i.value.coreSha256||null,coreFileKey:i.value.coreFileKey||null,args:i.value.args||null};A.value.length>0?(a.coreUrl=null,a.coreSha256=null,a.coreFileKey=null):F.value==="manual"?(a.coreUrl=null,a.coreSha256=null):a.coreFileKey=null;try{const k=(await Ae(a)).serverId;if(!k)throw new Error("æœåŠ¡å™¨æœªè¿”å› ServerId");E.value=k.toString(),P.value=!0,u.value=5,await y(E.value)}catch(v){_.error(v.message||"åˆ›å»ºè¯·æ±‚å¤±è´¥"),T.value=!1}},y=async s=>{const{baseUrl:a,token:v}=z,k=new URL("/api/hubs/creationProgressHub",a||window.location.origin);k.searchParams.append("x-user-token",v),B.value=new He().withUrl(k.toString(),{withCredentials:!1}).configureLogging(Ne.Information).build(),B.value.on("StatusUpdate",(J,M,g)=>{var U,C;J.toString()===s&&(V.value.push({time:new Date().toLocaleTimeString(),message:M,progress:g}),Oe(()=>{Y.value&&(Y.value.scrollTop=Y.value.scrollHeight)}),g!==null&&g>=0&&(te.value=g),g===100?(_.success("æœåŠ¡å™¨åˆ›å»ºæˆåŠŸï¼"),(U=B.value)==null||U.stop(),P.value=!1,q.value=!0,u.value=6,T.value=!1,me.refreshInstanceList()):g===-1&&(_.error(M||"é”™è¯¯"),(C=B.value)==null||C.stop(),P.value=!1,T.value=!1,u.value=0))});try{await B.value.start(),await B.value.invoke("TrackServer",s)}catch(J){console.error("SignalR Error",J)}};qe(()=>{var s;(s=B.value)==null||s.stop()});const x=()=>{q.value=!1,u.value=0,i.value={name:"æ–°å»ºæ•´åˆåŒ…æœåŠ¡å™¨",path:"",java:"",core:"",coreUrl:"",coreSha256:"",coreFileKey:"",packageFileKey:"",minM:2048,maxM:6144,args:""},A.value=[],ae.value="",F.value="online",D.value="online"};return(s,a)=>{const v=d("t-step-item"),k=d("t-steps"),J=d("t-input"),M=d("t-form-item"),g=d("t-alert"),U=d("t-icon"),C=d("t-button"),L=d("t-progress"),N=d("t-loading"),le=d("t-radio"),oe=d("t-radio-group"),O=d("t-radio-button"),j=d("t-select"),se=d("t-input-number"),de=d("t-space"),R=d("t-col"),p=d("t-row"),ne=d("t-textarea"),ue=d("t-form"),_e=d("t-list-item-meta"),be=d("t-list-item"),ke=d("t-list");return m(),w("div",null,[o("div",Wa,[o("div",Ya,[e(k,{layout:"vertical",style:{"margin-top":"16px"},current:u.value,status:"process",readonly:""},{default:t(()=>[e(v,{title:"åŸºæœ¬ä¿¡æ¯",content:"å¡«å†™å®ä¾‹åç§°"}),e(v,{title:"ä¸Šä¼ æ•´åˆåŒ…",content:"ä¸Šä¼ æœåŠ¡ç«¯ Zip åŒ…"}),e(v,{title:"æ ¸å¿ƒé…ç½®",content:"ç¡®è®¤å¯åŠ¨çš„æœåŠ¡ç«¯æ ¸å¿ƒ"}),e(v,{title:"Java ç¯å¢ƒ",content:"é…ç½® Java è¿è¡Œæ—¶"}),e(v,{title:"èµ„æºé…ç½®",content:"è®¾ç½®å†…å­˜å‚æ•°"}),e(v,{title:"åˆ›å»ºå®ä¾‹",content:"æäº¤å¹¶ç­‰å¾…è§£å‹"}),e(v,{title:"å®Œæˆ",content:"æŸ¥çœ‹ç»“æœ"})]),_:1},8,["current"])]),o("div",el,[!P.value&&!q.value?(m(),w("div",al,[e(ue,{ref_key:"formRef",ref:G,data:i.value,rules:Be.value,"label-align":"top",class:"step-form",onSubmit:l},{default:t(()=>[ie(o("div",ll,[e(M,{label:"å®ä¾‹åç§°",name:"name"},{default:t(()=>[e(J,{modelValue:i.value.name,"onUpdate:modelValue":a[0]||(a[0]=h=>i.value.name=h),placeholder:"ä¸ºä½ çš„æœåŠ¡å™¨èµ·ä¸ªåå­—"},null,8,["modelValue"])]),_:1}),e(M,{label:"å®ä¾‹è·¯å¾„",name:"path",help:"é€‰å¡«ï¼Œç•™ç©ºå°†ä½¿ç”¨é»˜è®¤è·¯å¾„"},{default:t(()=>[e(J,{modelValue:i.value.path,"onUpdate:modelValue":a[1]||(a[1]=h=>i.value.path=h),placeholder:"ä¾‹å¦‚: D:\\MyServer"},null,8,["modelValue"])]),_:1})],512),[[ve,u.value===0]]),ie(o("div",tl,[e(g,{theme:"info",class:"mb-4"},{message:t(()=>[...a[18]||(a[18]=[f(" è¯·ä¸Šä¼ åŒ…å«æœåŠ¡ç«¯æ–‡ä»¶çš„ ",-1),o("b",null,".zip",-1),f(" å‹ç¼©åŒ…ã€‚ä¸Šä¼ å®Œæˆåç³»ç»Ÿå°†è‡ªåŠ¨åˆ†æåŒ…å†…çš„æœåŠ¡ç«¯æ ¸å¿ƒæ–‡ä»¶ã€‚ ",-1)])]),_:1}),e(M,{label:"ä¸Šä¼ æœåŠ¡ç«¯æ•´åˆåŒ… (Zip)",name:"packageFileKey"},{default:t(()=>[o("div",ol,[o("input",{ref_key:"uploadInputRef",ref:I,accept:".zip",type:"file",style:{display:"none"},onChange:Le},null,544),!Q.value&&!i.value.packageFileKey?(m(),re(C,{key:0,variant:"outline",onClick:Ce},{icon:t(()=>[e(U,{name:"upload"})]),default:t(()=>[a[19]||(a[19]=f(" ç‚¹å‡»é€‰æ‹© Zip æ–‡ä»¶å¹¶ä¸Šä¼  ",-1))]),_:1})):b("",!0),Q.value?(m(),w("div",sl,[o("div",nl,"æ­£åœ¨ä¸Šä¼ : "+K(ae.value)+" ("+K(he.value)+")",1),e(L,{theme:"line",percentage:X.value},null,8,["percentage"]),a[20]||(a[20]=o("div",{class:"tip"},"åˆ«ç€æ€¥ï¼Œå–æ¯å’–å•¡â˜•ï¸...",-1))])):b("",!0),!Q.value&&H.value?(m(),w("div",ul,[e(N,{text:"æ­£åœ¨åˆ†æå‹ç¼©åŒ…ç»“æ„...",size:"small"})])):b("",!0),i.value.packageFileKey&&!Q.value&&!H.value?(m(),w("div",il,[o("div",rl,[e(U,{name:"folder-zip"})]),o("div",cl,[o("div",dl,K(ae.value),1),o("div",vl,K(A.value.length>0?`å‘ç° ${A.value.length} ä¸ªæœåŠ¡ç«¯æ ¸å¿ƒæ–‡ä»¶`:"æœªå‘ç°æœåŠ¡ç«¯æ ¸å¿ƒæ–‡ä»¶")+" "+K(Z.value?`| æ ¹ç›®å½•: /${Z.value}`:""),1)]),e(C,{shape:"circle",variant:"text",theme:"primary",onClick:Ce},{icon:t(()=>[e(U,{name:"swap"})]),_:1}),e(C,{shape:"circle",variant:"text",theme:"danger",onClick:Je},{icon:t(()=>[e(U,{name:"delete"})]),_:1})])):b("",!0)])]),_:1})],512),[[ve,u.value===1]]),ie(o("div",ml,[A.value.length>0?(m(),w("div",pl,[e(g,{theme:"success",class:"mb-4"},{message:t(()=>[...a[21]||(a[21]=[f("æˆ‘ä»¬åœ¨å‹ç¼©åŒ…ä¸­å‘ç°äº†ä»¥ä¸‹æœåŠ¡ç«¯æ ¸å¿ƒæ–‡ä»¶ï¼Œè¯·é€‰æ‹©å“ªä¸€ä¸ªä½œä¸º",-1),o("b",null,"å¯åŠ¨æ ¸å¿ƒ",-1),f("ã€‚",-1)])]),_:1}),e(M,{label:"é€‰æ‹©å¯åŠ¨æ ¸å¿ƒ",name:"core"},{default:t(()=>[e(oe,{modelValue:i.value.core,"onUpdate:modelValue":a[2]||(a[2]=h=>i.value.core=h),class:"vertical-radio-group"},{default:t(()=>[(m(!0),w(Te,null,Pe(A.value,h=>(m(),w("div",{key:h,class:"jar-option-item"},[e(le,{value:h},{default:t(()=>[f(K(h),1)]),_:2},1032,["value"])]))),128))]),_:1},8,["modelValue"])]),_:1})])):(m(),w("div",fl,[e(g,{theme:"warning",class:"mb-4"},{message:t(()=>[...a[22]||(a[22]=[f("åœ¨ä¸Šä¼ çš„åŒ…ä¸­æœªå‘ç°æœåŠ¡ç«¯æ ¸å¿ƒæ–‡ä»¶ã€‚è¯·åœ¨æ­¤å¤„ä¸‹è½½ä¸€ä¸ªæœåŠ¡ç«¯æ ¸å¿ƒã€‚",-1)])]),_:1}),e(M,{label:"è¡¥å……æœåŠ¡ç«¯æ ¸å¿ƒ"},{default:t(()=>[e(oe,{modelValue:F.value,"onUpdate:modelValue":a[3]||(a[3]=h=>F.value=h),variant:"default-filled"},{default:t(()=>[e(O,{value:"online"},{default:t(()=>[...a[23]||(a[23]=[f("åœ¨çº¿ä¸‹è½½æ ¸å¿ƒ",-1)])]),_:1}),e(O,{disabled:"",value:"manual"},{default:t(()=>[...a[24]||(a[24]=[f("è‡ªè¡Œä¸Šä¼ (ä¸æ”¯æŒ)",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),F.value==="online"?(m(),w("div",gl,[e(M,{label:"é€‰æ‹©æœåŠ¡ç«¯æ ¸å¿ƒ",name:"coreUrl"},{default:t(()=>[o("div",_l,[e(C,{variant:"outline",onClick:a[4]||(a[4]=h=>ee.value=!0)},{icon:t(()=>[e(U,{name:"cloud-download"})]),default:t(()=>[a[25]||(a[25]=f(" æ‰“å¼€æ ¸å¿ƒåº“ ",-1))]),_:1}),i.value.core&&F.value==="online"?(m(),w("div",yl,[o("div",hl,[e(U,{name:"check-circle-filled"})]),o("div",wl,[o("div",kl,K(i.value.core),1),a[26]||(a[26]=o("div",{class:"core-url"},"å°†åœ¨åˆ›å»ºæ—¶è‡ªåŠ¨ä¸‹è½½",-1))])])):b("",!0)])]),_:1})])):b("",!0),F.value==="manual"?(m(),w("div",bl,[a[27]||(a[27]=o("div",{class:"tip-text"},"è¯·åœ¨æ•´åˆåŒ…è§£å‹åæ‰‹åŠ¨æ”¾å…¥æ ¸å¿ƒï¼Œæˆ–åœ¨æ­¤å¤„ä¸å¡«å†™ç­‰å¾…åˆ›å»ºåæ‰‹åŠ¨ä¸Šä¼ ã€‚",-1)),e(g,{theme:"error",message:"æ­¤æ¨¡å¼ä¸‹å»ºè®®ç¡®ä¿å‹ç¼©åŒ…å†…åŒ…å«æ ¸å¿ƒï¼Œæˆ–è€…ä½¿ç”¨åœ¨çº¿ä¸‹è½½åŠŸèƒ½ã€‚"})])):b("",!0)]))],512),[[ve,u.value===2]]),ie(o("div",Vl,[e(g,{theme:"info",title:"å¦‚ä½•é€‰æ‹© Java ç‰ˆæœ¬?",class:"java-alert"},{message:t(()=>[...a[28]||(a[28]=[o("p",null,"ä¸åŒçš„ Minecraft ç‰ˆæœ¬éœ€è¦ä¸åŒçš„ Java ç‰ˆæœ¬ã€‚",-1),o("ul",null,[o("li",null,[f("å»ºè®®ç›´æ¥ä½¿ç”¨ "),o("b",null,"æ¨èç‰ˆæœ¬"),f(" è¶…å‡ºç‰ˆæœ¬å¯èƒ½å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ã€‚")]),o("li",null,"MC 26.1 - æœ€æ–°ç‰ˆ: éœ€è¦ Java 25 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚"),o("li",null,"MC 1.20.5 - 1.21.10: éœ€è¦ Java 21 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚"),o("li",null,"MC 1.18 - 1.20.4: éœ€è¦ Java 17 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚"),o("li",null,"MC 1.17/1.17.1: éœ€è¦ Java 16ã€‚"),o("li",null,"MC 1.13 - 1.16.5: éœ€è¦ Java 8 / 11ã€‚"),o("li",null,"MC 1.12.2 åŠä»¥ä¸‹: éœ€è¦ Java 8ã€‚")],-1)])]),_:1}),e(M,{label:"Java æ¥æº",name:"java"},{default:t(()=>[o("div",Ml,[e(oe,{modelValue:D.value,"onUpdate:modelValue":a[5]||(a[5]=h=>D.value=h),variant:"default-filled"},{default:t(()=>[e(O,{value:"online"},{default:t(()=>[...a[29]||(a[29]=[f("åœ¨çº¿ä¸‹è½½",-1)])]),_:1}),e(O,{value:"local"},{default:t(()=>[...a[30]||(a[30]=[f("æœ¬æœº Java",-1)])]),_:1}),e(O,{value:"env"},{default:t(()=>[...a[31]||(a[31]=[f("ç¯å¢ƒå˜é‡",-1)])]),_:1}),e(O,{value:"custom"},{default:t(()=>[...a[32]||(a[32]=[f("è‡ªå®šä¹‰è·¯å¾„",-1)])]),_:1})]),_:1},8,["modelValue"]),o("div",Ul,[D.value==="online"?(m(),w("div",Sl,[e(j,{modelValue:n.value,"onUpdate:modelValue":a[6]||(a[6]=h=>n.value=h),options:W.value,placeholder:"è¯·é€‰æ‹© Java ç‰ˆæœ¬"},null,8,["modelValue","options"])])):b("",!0),D.value==="local"?(m(),w("div",Fl,[e(j,{modelValue:ce.value,"onUpdate:modelValue":a[7]||(a[7]=h=>ce.value=h),options:we.value,placeholder:"è¯·é€‰æ‹© Java"},null,8,["modelValue","options"]),e(C,{variant:"text",onClick:a[8]||(a[8]=h=>pe(!0))},{default:t(()=>[...a[33]||(a[33]=[f("åˆ·æ–°",-1)])]),_:1})])):b("",!0),D.value==="env"?(m(),w("div",$l,[e(J,{"model-value":"java",readonly:"",disabled:""})])):b("",!0),D.value==="custom"?(m(),w("div",xl,[e(J,{modelValue:ce.value,"onUpdate:modelValue":a[9]||(a[9]=h=>ce.value=h),placeholder:"C:\\Path\\To\\java.exe"},null,8,["modelValue"])])):b("",!0)])])]),_:1})],512),[[ve,u.value===3]]),ie(o("div",Cl,[e(p,{gutter:[16,24]},{default:t(()=>[e(R,{xs:12,span:6},{default:t(()=>[e(M,{label:"æœ€å°å†…å­˜",name:"minM"},{default:t(()=>[e(de,{size:8,style:{width:"100%"}},{default:t(()=>[e(se,{modelValue:Fe.value,"onUpdate:modelValue":a[10]||(a[10]=h=>Fe.value=h),min:0,"decimal-places":fe.value==="GB"?1:0,placeholder:"Xms",theme:"column",style:{width:"100%"}},null,8,["modelValue","decimal-places"]),e(j,{modelValue:fe.value,"onUpdate:modelValue":a[11]||(a[11]=h=>fe.value=h),options:Se,clearable:!1,style:{width:"80px"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(R,{xs:12,span:6},{default:t(()=>[e(M,{label:"æœ€å¤§å†…å­˜",name:"maxM"},{default:t(()=>[e(de,{size:8,style:{width:"100%"}},{default:t(()=>[e(se,{modelValue:$e.value,"onUpdate:modelValue":a[12]||(a[12]=h=>$e.value=h),min:0,"decimal-places":ge.value==="GB"?1:0,placeholder:"Xmx",theme:"column",style:{width:"100%"}},null,8,["modelValue","decimal-places"]),e(j,{modelValue:ge.value,"onUpdate:modelValue":a[13]||(a[13]=h=>ge.value=h),options:Se,clearable:!1,style:{width:"80px"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(M,{label:"JVM å‚æ•°",name:"args",style:{"margin-top":"16px"}},{default:t(()=>[e(ne,{modelValue:i.value.args,"onUpdate:modelValue":a[14]||(a[14]=h=>i.value.args=h),placeholder:"-XX:+UseG1GC"},null,8,["modelValue"])]),_:1})],512),[[ve,u.value===4]]),e(M,{class:"step-actions",style:{"margin-top":"16px"}},{default:t(()=>[u.value>0?(m(),re(C,{key:0,theme:"default",onClick:xe},{default:t(()=>[...a[34]||(a[34]=[f("ä¸Šä¸€æ­¥",-1)])]),_:1})):b("",!0),u.value<4?(m(),re(C,{key:1,type:"button",loading:Q.value||H.value,onClick:Ie},{default:t(()=>[...a[35]||(a[35]=[f("ä¸‹ä¸€æ­¥",-1)])]),_:1},8,["loading"])):b("",!0),u.value===4?(m(),re(C,{key:2,theme:"primary",type:"submit",loading:T.value},{default:t(()=>[...a[36]||(a[36]=[f("æäº¤åˆ›å»º",-1)])]),_:1},8,["loading"])):b("",!0)]),_:1})]),_:1},8,["data","rules"])])):b("",!0),P.value?(m(),w("div",Jl,[o("div",Kl,"æ­£åœ¨åˆ›å»ºæ•´åˆåŒ…å®ä¾‹ ("+K(E.value)+")",1),a[37]||(a[37]=o("p",null,"æ­£åœ¨è§£å‹æ–‡ä»¶å¹¶é…ç½®ç¯å¢ƒ...",-1)),e(L,{theme:"plump",percentage:te.value,label:`${te.value.toFixed(2)}%`},null,8,["percentage","label"]),o("div",{ref_key:"logContainerRef",ref:Y,class:"log-container"},[e(ke,{split:!0},{default:t(()=>[(m(!0),w(Te,null,Pe(V.value,(h,oa)=>(m(),re(be,{key:oa},{default:t(()=>[e(_e,{description:`[${h.time}] ${h.message}`},null,8,["description"])]),_:2},1024))),128))]),_:1})],512)])):b("",!0),q.value?(m(),w("div",jl,[e(U,{class:"result-success-icon",name:"check-circle"}),a[40]||(a[40]=o("div",{class:"result-success-title"},"æ•´åˆåŒ…æœåŠ¡å™¨å·²éƒ¨ç½²æˆåŠŸ",-1)),a[41]||(a[41]=o("div",{class:"result-success-describe"},"æ–‡ä»¶å·²è§£å‹ï¼Œç¯å¢ƒå·²é…ç½®å°±ç»ª",-1)),o("div",null,[e(C,{onClick:a[15]||(a[15]=()=>{x(),ye(Ue)("/instance/list")})},{default:t(()=>[...a[38]||(a[38]=[f(" è¿”å›æœåŠ¡ç«¯åˆ—è¡¨ ",-1)])]),_:1}),e(C,{theme:"default",onClick:a[16]||(a[16]=()=>{x(),ye(Ue)(`/instance/console/${E.value}`)})},{default:t(()=>[...a[39]||(a[39]=[f(" å‰å¾€æ§åˆ¶å° ",-1)])]),_:1})])])):b("",!0)])]),e(ea,{visible:ee.value,"onUpdate:visible":a[17]||(a[17]=h=>ee.value=h),onConfirm:c},null,8,["visible"])])}}}),Rl=Ee(Bl,[["__scopeId","data-v-7bca9b51"]]),Ut=Ke({__name:"index",setup(je){const z=r(1);return(G,me)=>{const u=d("t-tab-panel"),T=d("t-tabs"),P=d("t-card");return m(),w("div",null,[e(P,{direction:"vertical"},{default:t(()=>[e(T,{modelValue:z.value,"onUpdate:modelValue":me[0]||(me[0]=q=>z.value=q)},{default:t(()=>[e(u,{value:1,label:"å¿«é€Ÿæ¨¡å¼","destroy-on-hide":!1},{default:t(()=>[e(qa,{style:{margin:"10px"}})]),_:1}),e(u,{value:2,label:"ä¸Šä¼ æ•´åˆåŒ…æ¨¡å¼","destroy-on-hide":!1},{default:t(()=>[e(Rl,{style:{margin:"10px"}})]),_:1}),e(u,{value:3,label:"è‡ªå®šä¹‰æ¨¡å¼","destroy-on-hide":!1},{default:t(()=>[e(Qa,{style:{margin:"10px"}})]),_:1})]),_:1},8,["modelValue"])]),_:1})])}}});export{Ut as default};
