var Zt=Object.defineProperty;var Tt=r=>{throw TypeError(r)};var te=(r,t,e)=>t in r?Zt(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var It=(r,t,e)=>te(r,typeof t!="symbol"?t+"":t,e),gt=(r,t,e)=>t.has(r)||Tt("Cannot "+e);var s=(r,t,e)=>(gt(r,t,"read from private field"),e?e.call(r):t.get(r)),C=(r,t,e)=>t.has(r)?Tt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e),l=(r,t,e,i)=>(gt(r,t,"write to private field"),i?i.call(r,e):t.set(r,e),e),f=(r,t,e)=>(gt(r,t,"access private method"),e);import{B as ee,c as F}from"./index.jXwDIiIy.js";import{l as re}from"./luxon.BVaPVz1w.js";const ne={},ie=Object.freeze(Object.defineProperty({__proto__:null,default:ne},Symbol.toStringTag,{value:"Module"})),jt=ee(ie);var se={},H={},st={},ot={},Wt={};Object.defineProperty(Wt,"__esModule",{value:!0});var ut={},P={};Object.defineProperty(P,"__esModule",{value:!0});P.CronField=void 0;var nt,it,tt,A,at,At;const Ht=class Ht{constructor(t,e={rawValue:""}){C(this,at);C(this,nt,!1);C(this,it,!1);C(this,tt,!1);C(this,A,[]);It(this,"options",{rawValue:""});if(!Array.isArray(t))throw new Error(`${this.constructor.name} Validation error, values is not an array`);if(!(t.length>0))throw new Error(`${this.constructor.name} Validation error, values contains no values`);this.options={...e,rawValue:e.rawValue??""},l(this,A,t.sort(Ht.sorter)),l(this,tt,this.options.wildcard!==void 0?this.options.wildcard:f(this,at,At).call(this)),l(this,nt,this.options.rawValue.includes("L")||t.includes("L")),l(this,it,this.options.rawValue.includes("?")||t.includes("?"))}static get min(){throw new Error("min must be overridden")}static get max(){throw new Error("max must be overridden")}static get chars(){return Object.freeze([])}static get validChars(){return/^[?,*\dH/-]+$|^.*H\(\d+-\d+\)\/\d+.*$|^.*H\(\d+-\d+\).*$|^.*H\/\d+.*$/}static get constraints(){return{min:this.min,max:this.max,chars:this.chars,validChars:this.validChars}}get min(){return this.constructor.min}get max(){return this.constructor.max}get chars(){return this.constructor.chars}get hasLastChar(){return s(this,nt)}get hasQuestionMarkChar(){return s(this,it)}get isWildcard(){return s(this,tt)}get values(){return s(this,A)}static sorter(t,e){const i=typeof t=="number",a=typeof e=="number";return i&&a?t-e:!i&&!a?t.localeCompare(e):i?-1:1}serialize(){return{wildcard:s(this,tt),values:s(this,A)}}validate(){let t;const e=this.chars.length>0?` or chars ${this.chars.join("")}`:"",i=u=>d=>new RegExp(`^\\d{0,2}${d}$`).test(u),a=u=>(t=u,typeof u=="number"?u>=this.min&&u<=this.max:this.chars.some(i(u)));if(!s(this,A).every(a))throw new Error(`${this.constructor.name} Validation error, got value ${t} expected range ${this.min}-${this.max}${e}`);const o=s(this,A).find((u,d)=>s(this,A).indexOf(u)!==d);if(o)throw new Error(`${this.constructor.name} Validation error, duplicate values found: ${o}`)}};nt=new WeakMap,it=new WeakMap,tt=new WeakMap,A=new WeakMap,at=new WeakSet,At=function(){return this.options.rawValue.length>0?["*","?"].includes(this.options.rawValue):Array.from({length:this.max-this.min+1},(t,e)=>e+this.min).every(t=>s(this,A).includes(t))};let mt=Ht;P.CronField=mt;Object.defineProperty(ut,"__esModule",{value:!0});ut.CronDayOfMonth=void 0;const ae=P,oe=1,ue=31,he=Object.freeze(["L"]);class ce extends ae.CronField{static get min(){return oe}static get max(){return ue}static get chars(){return he}static get validChars(){return/^[?,*\dLH/-]+$|^.*H\(\d+-\d+\)\/\d+.*$|^.*H\(\d+-\d+\).*$|^.*H\/\d+.*$/}constructor(t,e){super(t,e),this.validate()}get values(){return super.values}}ut.CronDayOfMonth=ce;var ht={};Object.defineProperty(ht,"__esModule",{value:!0});ht.CronDayOfWeek=void 0;const de=P,le=0,fe=7,ye=Object.freeze(["L"]);class Oe extends de.CronField{static get min(){return le}static get max(){return fe}static get chars(){return ye}static get validChars(){return/^[?,*\dLH#/-]+$|^.*H\(\d+-\d+\)\/\d+.*$|^.*H\(\d+-\d+\).*$|^.*H\/\d+.*$/}constructor(t,e){super(t,e),this.validate()}get values(){return super.values}get nthDay(){return this.options.nthDayOfWeek??0}}ht.CronDayOfWeek=Oe;var ct={};Object.defineProperty(ct,"__esModule",{value:!0});ct.CronHour=void 0;const ge=P,me=0,ve=23,pe=Object.freeze([]);class Me extends ge.CronField{static get min(){return me}static get max(){return ve}static get chars(){return pe}constructor(t,e){super(t,e),this.validate()}get values(){return super.values}}ct.CronHour=Me;var dt={};Object.defineProperty(dt,"__esModule",{value:!0});dt.CronMinute=void 0;const Ce=P,we=0,De=59,_e=Object.freeze([]);class be extends Ce.CronField{static get min(){return we}static get max(){return De}static get chars(){return _e}constructor(t,e){super(t,e),this.validate()}get values(){return super.values}}dt.CronMinute=be;var lt={},ft={};(function(r){var n,o,u,d,h,vt,v,U;Object.defineProperty(r,"__esModule",{value:!0}),r.CronDate=r.DAYS_IN_MONTH=r.DateMathOp=r.TimeUnit=void 0;const t=re;var e;(function(N){N.Second="Second",N.Minute="Minute",N.Hour="Hour",N.Day="Day",N.Month="Month",N.Year="Year"})(e||(r.TimeUnit=e={}));var i;(function(N){N.Add="Add",N.Subtract="Subtract"})(i||(r.DateMathOp=i={})),r.DAYS_IN_MONTH=Object.freeze([31,29,31,30,31,30,31,31,30,31,30,31]);const p=class p{constructor(c,w){C(this,v);C(this,n);C(this,o,null);C(this,u,null);C(this,d,{add:{[e.Year]:this.addYear.bind(this),[e.Month]:this.addMonth.bind(this),[e.Day]:this.addDay.bind(this),[e.Hour]:this.addHour.bind(this),[e.Minute]:this.addMinute.bind(this),[e.Second]:this.addSecond.bind(this)},subtract:{[e.Year]:this.subtractYear.bind(this),[e.Month]:this.subtractMonth.bind(this),[e.Day]:this.subtractDay.bind(this),[e.Hour]:this.subtractHour.bind(this),[e.Minute]:this.subtractMinute.bind(this),[e.Second]:this.subtractSecond.bind(this)}});const b={zone:w};if(c?c instanceof p?(l(this,n,s(c,n)),l(this,o,s(c,o)),l(this,u,s(c,u))):c instanceof Date?l(this,n,t.DateTime.fromJSDate(c,b)):typeof c=="number"?l(this,n,t.DateTime.fromMillis(c,b)):(l(this,n,t.DateTime.fromISO(c,b)),s(this,n).isValid||l(this,n,t.DateTime.fromRFC2822(c,b)),s(this,n).isValid||l(this,n,t.DateTime.fromSQL(c,b)),s(this,n).isValid||l(this,n,t.DateTime.fromFormat(c,"EEE, d MMM yyyy HH:mm:ss",b))):l(this,n,t.DateTime.local()),!s(this,n).isValid)throw new Error(`CronDate: unhandled timestamp: ${c}`);w&&w!==s(this,n).zoneName&&l(this,n,s(this,n).setZone(w))}get dstStart(){return s(this,o)}set dstStart(c){l(this,o,c)}get dstEnd(){return s(this,u)}set dstEnd(c){l(this,u,c)}addYear(){l(this,n,s(this,n).plus({years:1}))}addMonth(){l(this,n,s(this,n).plus({months:1}).startOf("month"))}addDay(){l(this,n,s(this,n).plus({days:1}).startOf("day"))}addHour(){l(this,n,s(this,n).plus({hours:1}).startOf("hour"))}addMinute(){l(this,n,s(this,n).plus({minutes:1}).startOf("minute"))}addSecond(){l(this,n,s(this,n).plus({seconds:1}))}subtractYear(){l(this,n,s(this,n).minus({years:1}))}subtractMonth(){l(this,n,s(this,n).minus({months:1}).endOf("month").startOf("second"))}subtractDay(){l(this,n,s(this,n).minus({days:1}).endOf("day").startOf("second"))}subtractHour(){l(this,n,s(this,n).minus({hours:1}).endOf("hour").startOf("second"))}subtractMinute(){l(this,n,s(this,n).minus({minutes:1}).endOf("minute").startOf("second"))}subtractSecond(){l(this,n,s(this,n).minus({seconds:1}))}addUnit(c){s(this,d).add[c]()}subtractUnit(c){s(this,d).subtract[c]()}invokeDateOperation(c,w){if(c===i.Add){this.addUnit(w);return}if(c===i.Subtract){this.subtractUnit(w);return}throw new Error(`Invalid verb: ${c}`)}getDate(){return s(this,n).day}getFullYear(){return s(this,n).year}getDay(){const c=s(this,n).weekday;return c===7?0:c}getMonth(){return s(this,n).month-1}getHours(){return s(this,n).hour}getMinutes(){return s(this,n).minute}getSeconds(){return s(this,n).second}getMilliseconds(){return s(this,n).millisecond}getTime(){return s(this,n).valueOf()}getUTCDate(){return f(this,v,U).call(this).day}getUTCFullYear(){return f(this,v,U).call(this).year}getUTCDay(){const c=f(this,v,U).call(this).weekday;return c===7?0:c}getUTCMonth(){return f(this,v,U).call(this).month-1}getUTCHours(){return f(this,v,U).call(this).hour}getUTCMinutes(){return f(this,v,U).call(this).minute}getUTCSeconds(){return f(this,v,U).call(this).second}toISOString(){return s(this,n).toUTC().toISO()}toJSON(){return s(this,n).toJSON()}setDate(c){l(this,n,s(this,n).set({day:c}))}setFullYear(c){l(this,n,s(this,n).set({year:c}))}setDay(c){l(this,n,s(this,n).set({weekday:c}))}setMonth(c){l(this,n,s(this,n).set({month:c+1}))}setHours(c){l(this,n,s(this,n).set({hour:c}))}setMinutes(c){l(this,n,s(this,n).set({minute:c}))}setSeconds(c){l(this,n,s(this,n).set({second:c}))}setMilliseconds(c){l(this,n,s(this,n).set({millisecond:c}))}toString(){return this.toDate().toString()}toDate(){return s(this,n).toJSDate()}isLastDayOfMonth(){var b;const{day:c,month:w}=s(this,n);if(w===2){const D=f(b=p,h,vt).call(b,s(this,n).year);return c===r.DAYS_IN_MONTH[w-1]-(D?0:1)}return c===r.DAYS_IN_MONTH[w-1]}isLastWeekdayOfMonth(){var D;const{day:c,month:w}=s(this,n);let b;return w===2?b=r.DAYS_IN_MONTH[w-1]-(f(D=p,h,vt).call(D,s(this,n).year)?0:1):b=r.DAYS_IN_MONTH[w-1],c>b-7}applyDateOperation(c,w,b){if(w===e.Month||w===e.Day){this.invokeDateOperation(c,w);return}const D=this.getHours();this.invokeDateOperation(c,w);const q=this.getHours(),y=q-D;y===2?b!==24&&(this.dstStart=q):y===0&&this.getMinutes()===0&&this.getSeconds()===0&&b!==24&&(this.dstEnd=q)}};n=new WeakMap,o=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakSet,vt=function(c){return c%4===0&&c%100!==0||c%400===0},v=new WeakSet,U=function(){return s(this,n).toUTC()},C(p,h);let a=p;r.CronDate=a,r.default=a})(ft);Object.defineProperty(lt,"__esModule",{value:!0});lt.CronMonth=void 0;const Se=ft,Ee=P,$e=1,Ne=12,He=Object.freeze([]);class Fe extends Ee.CronField{static get min(){return $e}static get max(){return Ne}static get chars(){return He}static get daysInMonth(){return Se.DAYS_IN_MONTH}constructor(t,e){super(t,e),this.validate()}get values(){return super.values}}lt.CronMonth=Fe;var yt={};Object.defineProperty(yt,"__esModule",{value:!0});yt.CronSecond=void 0;const Te=P,Ie=0,je=59,We=Object.freeze([]);class Ae extends Te.CronField{static get min(){return Ie}static get max(){return je}static get chars(){return We}constructor(t,e){super(t,e),this.validate()}get values(){return super.values}}yt.CronSecond=Ae;(function(r){var t=F&&F.__createBinding||(Object.create?function(i,a,n,o){o===void 0&&(o=n);var u=Object.getOwnPropertyDescriptor(a,n);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[n]}}),Object.defineProperty(i,o,u)}:function(i,a,n,o){o===void 0&&(o=n),i[o]=a[n]}),e=F&&F.__exportStar||function(i,a){for(var n in i)n!=="default"&&!Object.prototype.hasOwnProperty.call(a,n)&&t(a,i,n)};Object.defineProperty(r,"__esModule",{value:!0}),e(Wt,r),e(ut,r),e(ht,r),e(P,r),e(ct,r),e(dt,r),e(lt,r),e(yt,r)})(ot);Object.defineProperty(st,"__esModule",{value:!0});st.CronFieldCollection=void 0;const I=ot;var B,X,G,J,R,x,et,Pt,Rt;const z=class z{constructor({second:t,minute:e,hour:i,dayOfMonth:a,month:n,dayOfWeek:o}){C(this,B);C(this,X);C(this,G);C(this,J);C(this,R);C(this,x);if(!t)throw new Error("Validation error, Field second is missing");if(!e)throw new Error("Validation error, Field minute is missing");if(!i)throw new Error("Validation error, Field hour is missing");if(!a)throw new Error("Validation error, Field dayOfMonth is missing");if(!n)throw new Error("Validation error, Field month is missing");if(!o)throw new Error("Validation error, Field dayOfWeek is missing");if(n.values.length===1&&!a.hasLastChar&&!(parseInt(a.values[0],10)<=I.CronMonth.daysInMonth[n.values[0]-1]))throw new Error("Invalid explicit day of month definition");l(this,B,t),l(this,X,e),l(this,G,i),l(this,R,n),l(this,x,o),l(this,J,a)}static from(t,e){return new z({second:this.resolveField(I.CronSecond,t.second,e.second),minute:this.resolveField(I.CronMinute,t.minute,e.minute),hour:this.resolveField(I.CronHour,t.hour,e.hour),dayOfMonth:this.resolveField(I.CronDayOfMonth,t.dayOfMonth,e.dayOfMonth),month:this.resolveField(I.CronMonth,t.month,e.month),dayOfWeek:this.resolveField(I.CronDayOfWeek,t.dayOfWeek,e.dayOfWeek)})}static resolveField(t,e,i){return i?i instanceof I.CronField?i:new t(i):e}get second(){return s(this,B)}get minute(){return s(this,X)}get hour(){return s(this,G)}get dayOfMonth(){return s(this,J)}get month(){return s(this,R)}get dayOfWeek(){return s(this,x)}static compactField(t){if(t.length===0)return[];const e=[];let i;return t.forEach((a,n,o)=>{if(i===void 0){i={start:a,count:1};return}const u=o[n-1]||i.start,d=o[n+1];if(a==="L"||a==="W"){e.push(i),e.push({start:a,count:1}),i=void 0;return}if(i.step===void 0&&d!==void 0){const h=a-u,m=d-a;if(h<=m){i={...i,count:2,end:a,step:h};return}i.step=1}a-(i.end??0)===i.step?(i.count++,i.end=a):(i.count===1?e.push({start:i.start,count:1}):i.count===2?(e.push({start:i.start,count:1}),e.push({start:i.end??u,count:1})):e.push(i),i={start:a,count:1})}),i&&e.push(i),e}stringifyField(t){var n;let e=t.max,i=t.values;if(t instanceof I.CronDayOfWeek){e=6;const o=s(this,x).values;i=o[o.length-1]===7?o.slice(0,-1):o}t instanceof I.CronDayOfMonth&&(e=s(this,R).values.length===1?I.CronMonth.daysInMonth[s(this,R).values[0]-1]:t.max);const a=z.compactField(i);if(a.length===1){const o=f(n=z,et,Pt).call(n,t,a[0],e);if(o)return o}return a.map(o=>{var d;const u=o.count===1?o.start.toString():f(d=z,et,Rt).call(d,o,e);return t instanceof I.CronDayOfWeek&&t.nthDay>0?`${u}#${t.nthDay}`:u}).join(",")}stringify(t=!1){const e=[];return t&&e.push(this.stringifyField(s(this,B))),e.push(this.stringifyField(s(this,X)),this.stringifyField(s(this,G)),this.stringifyField(s(this,J)),this.stringifyField(s(this,R)),this.stringifyField(s(this,x))),e.join(" ")}serialize(){return{second:s(this,B).serialize(),minute:s(this,X).serialize(),hour:s(this,G).serialize(),dayOfMonth:s(this,J).serialize(),month:s(this,R).serialize(),dayOfWeek:s(this,x).serialize()}}};B=new WeakMap,X=new WeakMap,G=new WeakMap,J=new WeakMap,R=new WeakMap,x=new WeakMap,et=new WeakSet,Pt=function(t,e,i){const a=e.step;return a?a===1&&e.start===t.min&&e.end&&e.end>=i?t.hasQuestionMarkChar?"?":"*":a!==1&&e.start===t.min&&e.end&&e.end>=i-a+1?`*/${a}`:null:null},Rt=function(t,e){const i=t.step;if(i===1)return`${t.start}-${t.end}`;const a=t.start===0?t.count-1:t.count;if(!i)throw new Error("Unexpected range step");if(!t.end)throw new Error("Unexpected range end");if(i*a>t.end){const n=(u,d)=>{if(typeof t.start!="number")throw new Error("Unexpected range start");return d%i===0?t.start+d:null};if(typeof t.start!="number")throw new Error("Unexpected range start");const o={length:t.end-t.start+1};return Array.from(o,n).filter(u=>u!==null).join(",")}return t.end===e-i+1?`${t.start}/${i}`:`${t.start}-${t.end}/${i}`},C(z,et);let pt=z;st.CronFieldCollection=pt;var $t={};(function(r){var a,n,o,u,d,h,m,L,kt,p,Mt,Vt,Ut,K;Object.defineProperty(r,"__esModule",{value:!0}),r.CronExpression=r.LOOPS_LIMIT_EXCEEDED_ERROR_MESSAGE=r.TIME_SPAN_OUT_OF_BOUNDS_ERROR_MESSAGE=void 0;const t=ft;r.TIME_SPAN_OUT_OF_BOUNDS_ERROR_MESSAGE="Out of the time span range",r.LOOPS_LIMIT_EXCEEDED_ERROR_MESSAGE="Invalid expression, loop limit exceeded";const e=1e4,D=class D{constructor(y,g){C(this,p);C(this,a);C(this,n);C(this,o);C(this,u);C(this,d);C(this,h);l(this,a,g),l(this,n,g.tz),l(this,u,g.startDate?new t.CronDate(g.startDate,s(this,n)):null),l(this,d,g.endDate?new t.CronDate(g.endDate,s(this,n)):null);let O=g.currentDate??g.startDate;if(O){const _=new t.CronDate(O,s(this,n));s(this,u)&&_.getTime()<s(this,u).getTime()?O=s(this,u):s(this,d)&&_.getTime()>s(this,d).getTime()&&(O=s(this,d))}l(this,o,new t.CronDate(O,s(this,n))),l(this,h,y)}get fields(){return s(this,h)}static fieldsToExpression(y,g){return new D(y,g||{})}next(){return f(this,p,K).call(this)}prev(){return f(this,p,K).call(this,!0)}hasNext(){const y=s(this,o);try{return f(this,p,K).call(this),!0}catch{return!1}finally{l(this,o,y)}}hasPrev(){const y=s(this,o);try{return f(this,p,K).call(this,!0),!0}catch{return!1}finally{l(this,o,y)}}take(y){const g=[];if(y>=0)for(let O=0;O<y;O++)try{g.push(this.next())}catch{return g}else for(let O=0;O>y;O--)try{g.push(this.prev())}catch{return g}return g}reset(y){l(this,o,new t.CronDate(y||s(this,a).currentDate))}stringify(y=!1){return s(this,h).stringify(y)}includesDate(y){const{second:g,minute:O,hour:_,month:T}=s(this,h),E=new t.CronDate(y,s(this,n));return!(!g.values.includes(E.getSeconds())||!O.values.includes(E.getMinutes())||!_.values.includes(E.getHours())||!T.values.includes(E.getMonth()+1)||!f(this,p,Mt).call(this,E)||s(this,h).dayOfWeek.nthDay>0&&Math.ceil(E.getDate()/7)!==s(this,h).dayOfWeek.nthDay)}toString(){return s(this,a).expression||this.stringify(!0)}[Symbol.iterator](){return{next:()=>({value:f(this,p,K).call(this),done:!this.hasNext()})}}};a=new WeakMap,n=new WeakMap,o=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,m=new WeakSet,L=function(y,g){return g.some(O=>O===y)},kt=function(y,g){const O=g.isLastWeekdayOfMonth();return y.some(_=>{const T=parseInt(_.toString().charAt(0),10)%7;if(Number.isNaN(T))throw new Error(`Invalid last weekday of the month expression: ${_}`);return g.getDay()===T&&O})},p=new WeakSet,Mt=function(y){var V,rt,Ft;const g=s(this,h).dayOfMonth.isWildcard,O=!g,_=s(this,h).dayOfWeek.isWildcard,T=!_,E=f(V=D,m,L).call(V,y.getDate(),s(this,h).dayOfMonth.values)||s(this,h).dayOfMonth.hasLastChar&&y.isLastDayOfMonth(),k=f(rt=D,m,L).call(rt,y.getDay(),s(this,h).dayOfWeek.values)||s(this,h).dayOfWeek.hasLastChar&&f(Ft=D,m,kt).call(Ft,s(this,h).dayOfWeek.values,y);return!!(O&&T&&(E||k)||E&&!T||g&&!_&&k)},Vt=function(y,g,O){var V,rt;const _=y.getHours(),T=f(V=D,m,L).call(V,_,s(this,h).hour.values),E=y.dstStart===_,k=y.dstEnd===_;return!T&&!E?(y.dstStart=null,y.applyDateOperation(g,t.TimeUnit.Hour,s(this,h).hour.values.length),!1):E&&!f(rt=D,m,L).call(rt,_-1,s(this,h).hour.values)?(y.invokeDateOperation(g,t.TimeUnit.Hour),!1):k&&!O?(y.dstEnd=null,y.applyDateOperation(t.DateMathOp.Add,t.TimeUnit.Hour,s(this,h).hour.values.length),!1):!0},Ut=function(y){if(!s(this,u)&&!s(this,d))return;const g=y.getTime();if(s(this,u)&&g<s(this,u).getTime())throw new Error(r.TIME_SPAN_OUT_OF_BOUNDS_ERROR_MESSAGE);if(s(this,d)&&g>s(this,d).getTime())throw new Error(r.TIME_SPAN_OUT_OF_BOUNDS_ERROR_MESSAGE)},K=function(y=!1){var E,k,V;const g=y?t.DateMathOp.Subtract:t.DateMathOp.Add,O=new t.CronDate(s(this,o)),_=O.getTime();let T=0;for(;++T<e;){if(f(this,p,Ut).call(this,O),!f(this,p,Mt).call(this,O)){O.applyDateOperation(g,t.TimeUnit.Day,s(this,h).hour.values.length);continue}if(!(s(this,h).dayOfWeek.nthDay<=0||Math.ceil(O.getDate()/7)===s(this,h).dayOfWeek.nthDay)){O.applyDateOperation(g,t.TimeUnit.Day,s(this,h).hour.values.length);continue}if(!f(E=D,m,L).call(E,O.getMonth()+1,s(this,h).month.values)){O.applyDateOperation(g,t.TimeUnit.Month,s(this,h).hour.values.length);continue}if(f(this,p,Vt).call(this,O,g,y)){if(!f(k=D,m,L).call(k,O.getMinutes(),s(this,h).minute.values)){O.applyDateOperation(g,t.TimeUnit.Minute,s(this,h).hour.values.length);continue}if(!f(V=D,m,L).call(V,O.getSeconds(),s(this,h).second.values)){O.applyDateOperation(g,t.TimeUnit.Second,s(this,h).hour.values.length);continue}if(_===O.getTime()){(g==="Add"||O.getMilliseconds()===0)&&O.applyDateOperation(g,t.TimeUnit.Second,s(this,h).hour.values.length);continue}break}}if(T>e)throw new Error(r.LOOPS_LIMIT_EXCEEDED_ERROR_MESSAGE);return O.getMilliseconds()!==0&&O.setMilliseconds(0),l(this,o,O),O},C(D,m);let i=D;r.CronExpression=i,r.default=i})($t);var Nt={};Object.defineProperty(Nt,"__esModule",{value:!0});Nt.seededRandom=ke;function Pe(r){let t=2166136261;for(let e=0;e<r.length;e++)t^=r.charCodeAt(e),t=Math.imul(t,16777619);return()=>t>>>0}function Re(r){return()=>{let t=r+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}}function ke(r){const t=r?Pe(r)():Math.floor(Math.random()*1e10);return Re(t)}Object.defineProperty(H,"__esModule",{value:!0});H.CronExpressionParser=H.DayOfWeek=H.Months=H.CronUnit=H.PredefinedExpressions=void 0;const Ve=st,Ue=$t,Le=Nt,j=ot;var Ct;(function(r){r["@yearly"]="0 0 0 1 1 *",r["@annually"]="0 0 0 1 1 *",r["@monthly"]="0 0 0 1 * *",r["@weekly"]="0 0 0 * * 0",r["@daily"]="0 0 0 * * *",r["@hourly"]="0 0 * * * *",r["@minutely"]="0 * * * * *",r["@secondly"]="* * * * * *",r["@weekdays"]="0 0 0 * * 1-5",r["@weekends"]="0 0 0 * * 0,6"})(Ct||(H.PredefinedExpressions=Ct={}));var W;(function(r){r.Second="Second",r.Minute="Minute",r.Hour="Hour",r.DayOfMonth="DayOfMonth",r.Month="Month",r.DayOfWeek="DayOfWeek"})(W||(H.CronUnit=W={}));var wt;(function(r){r[r.jan=1]="jan",r[r.feb=2]="feb",r[r.mar=3]="mar",r[r.apr=4]="apr",r[r.may=5]="may",r[r.jun=6]="jun",r[r.jul=7]="jul",r[r.aug=8]="aug",r[r.sep=9]="sep",r[r.oct=10]="oct",r[r.nov=11]="nov",r[r.dec=12]="dec"})(wt||(H.Months=wt={}));var Dt;(function(r){r[r.sun=0]="sun",r[r.mon=1]="mon",r[r.tue=2]="tue",r[r.wed=3]="wed",r[r.thu=4]="thu",r[r.fri=5]="fri",r[r.sat=6]="sat"})(Dt||(H.DayOfWeek=Dt={}));var M,Lt,Y,xt,Yt,zt,Bt,Xt,Gt,Jt,bt,Qt,qt;const $=class ${static parse(t,e={}){var w,b,D,q,y,g,O,_;const{strict:i=!1,hashSeed:a}=e,n=(0,Le.seededRandom)(a);t=Ct[t]||t;const o=f(w=$,M,Lt).call(w,t,i);if(!(o.dayOfMonth==="*"||o.dayOfWeek==="*"||!i))throw new Error("Cannot use both dayOfMonth and dayOfWeek together in strict mode!");const u=f(b=$,M,Y).call(b,W.Second,o.second,j.CronSecond.constraints,n),d=f(D=$,M,Y).call(D,W.Minute,o.minute,j.CronMinute.constraints,n),h=f(q=$,M,Y).call(q,W.Hour,o.hour,j.CronHour.constraints,n),m=f(y=$,M,Y).call(y,W.Month,o.month,j.CronMonth.constraints,n),v=f(g=$,M,Y).call(g,W.DayOfMonth,o.dayOfMonth,j.CronDayOfMonth.constraints,n),{dayOfWeek:S,nthDayOfWeek:p}=f(O=$,M,Qt).call(O,o.dayOfWeek),N=f(_=$,M,Y).call(_,W.DayOfWeek,S,j.CronDayOfWeek.constraints,n),c=new Ve.CronFieldCollection({second:new j.CronSecond(u,{rawValue:o.second}),minute:new j.CronMinute(d,{rawValue:o.minute}),hour:new j.CronHour(h,{rawValue:o.hour}),dayOfMonth:new j.CronDayOfMonth(v,{rawValue:o.dayOfMonth}),month:new j.CronMonth(m,{rawValue:o.month}),dayOfWeek:new j.CronDayOfWeek(N,{rawValue:o.dayOfWeek,nthDayOfWeek:p})});return new Ue.CronExpression(c,{...e,expression:t})}};M=new WeakSet,Lt=function(t,e){if(e&&!t.length)throw new Error("Invalid cron expression");t=t||"0 * * * * *";const i=t.trim().split(/\s+/);if(e&&i.length<6)throw new Error("Invalid cron expression, expected 6 fields");if(i.length>6)throw new Error("Invalid cron expression, too many fields");const a=["*","*","*","*","*","0"];i.length<a.length&&i.unshift(...a.slice(i.length));const[n,o,u,d,h,m]=i;return{second:n,minute:o,hour:u,dayOfMonth:d,month:h,dayOfWeek:m}},Y=function(t,e,i,a){if((t===W.Month||t===W.DayOfWeek)&&(e=e.replace(/[a-z]{3}/gi,n=>{n=n.toLowerCase();const o=wt[n]||Dt[n];if(o===void 0)throw new Error(`Validation error, cannot resolve alias "${n}"`);return o.toString()})),!i.validChars.test(e))throw new Error(`Invalid characters, got value: ${e}`);return e=f(this,M,xt).call(this,e,i),e=f(this,M,Yt).call(this,e,i,a),f(this,M,zt).call(this,t,e,i)},xt=function(t,e){return t.replace(/[*?]/g,e.min+"-"+e.max)},Yt=function(t,e,i){const a=i();return t.replace(/H(?:\((\d+)-(\d+)\))?(?:\/(\d+))?/g,(n,o,u,d)=>{if(o&&u&&d){const h=parseInt(o,10),m=parseInt(u,10),v=parseInt(d,10);if(h>m)throw new Error(`Invalid range: ${h}-${m}, min > max`);if(v<=0)throw new Error(`Invalid step: ${v}, must be positive`);const S=Math.max(h,e.min),p=Math.floor(a*v),N=[];for(let c=Math.floor(S/v)*v+p;c<=m;c+=v)c>=S&&N.push(c);return N.join(",")}else if(o&&u){const h=parseInt(o,10),m=parseInt(u,10);if(h>m)throw new Error(`Invalid range: ${h}-${m}, min > max`);return String(Math.floor(a*(m-h+1))+h)}else if(d){const h=parseInt(d,10);if(h<=0)throw new Error(`Invalid step: ${h}, must be positive`);const m=Math.floor(a*h),v=[];for(let S=Math.floor(e.min/h)*h+m;S<=e.max;S+=h)S>=e.min&&v.push(S);return v.join(",")}else return String(Math.floor(a*(e.max-e.min+1)+e.min))})},zt=function(t,e,i){const a=[];function n(u,d){var h;if(Array.isArray(u))a.push(...u);else if(f(h=$,M,qt).call(h,d,u))a.push(u);else{const m=parseInt(u.toString(),10);if(!(m>=d.min&&m<=d.max))throw new Error(`Constraint error, got value ${u} expected range ${d.min}-${d.max}`);a.push(t===W.DayOfWeek?m%7:u)}}return e.split(",").forEach(u=>{var d;if(!(u.length>0))throw new Error("Invalid list value format");n(f(d=$,M,Bt).call(d,t,u,i),i)}),a},Bt=function(t,e,i){var n,o;const a=e.split("/");if(a.length>2)throw new Error(`Invalid repeat: ${e}`);return a.length===2?(isNaN(parseInt(a[0],10))||(a[0]=`${a[0]}-${i.max}`),f(n=$,M,bt).call(n,t,a[0],parseInt(a[1],10),i)):f(o=$,M,bt).call(o,t,e,1,i)},Xt=function(t,e,i){if(!(!isNaN(t)&&!isNaN(e)&&t>=i.min&&e<=i.max))throw new Error(`Constraint error, got range ${t}-${e} expected range ${i.min}-${i.max}`);if(t>e)throw new Error(`Invalid range: ${t}-${e}, min(${t}) > max(${e})`)},Gt=function(t){if(!(!isNaN(t)&&t>0))throw new Error(`Constraint error, cannot repeat at every ${t} time.`)},Jt=function(t,e,i,a){const n=[];t===W.DayOfWeek&&i%7===0&&n.push(0);for(let o=e;o<=i;o+=a)n.indexOf(o)===-1&&n.push(o);return n},bt=function(t,e,i,a){const n=e.split("-");if(n.length<=1)return isNaN(+e)?e:+e;const[o,u]=n.map(d=>parseInt(d,10));return f(this,M,Xt).call(this,o,u,a),f(this,M,Gt).call(this,i),f(this,M,Jt).call(this,t,o,u,i)},Qt=function(t){const e=t.split("#");if(e.length<=1)return{dayOfWeek:e[0]};const i=+e[e.length-1],a=t.match(/([,-/])/);if(a!==null)throw new Error(`Constraint error, invalid dayOfWeek \`#\` and \`${a==null?void 0:a[0]}\` special characters are incompatible`);if(!(e.length<=2&&!isNaN(i)&&i>=1&&i<=5))throw new Error("Constraint error, invalid dayOfWeek occurrence number (#)");return{dayOfWeek:e[0],nthDayOfWeek:i}},qt=function(t,e){return t.chars.some(i=>e.toString().includes(i))},C($,M);let _t=$;H.CronExpressionParser=_t;var Ot={},xe=F&&F.__createBinding||(Object.create?function(r,t,e,i){i===void 0&&(i=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(r,i,a)}:function(r,t,e,i){i===void 0&&(i=e),r[i]=t[e]}),Ye=F&&F.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),ze=F&&F.__importStar||function(){var r=function(t){return r=Object.getOwnPropertyNames||function(e){var i=[];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(i[i.length]=a);return i},r(t)};return function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var i=r(t),a=0;a<i.length;a++)i[a]!=="default"&&xe(e,t,i[a]);return Ye(e,t),e}}();Object.defineProperty(Ot,"__esModule",{value:!0});Ot.CronFileParser=void 0;const Be=H;var Q,Et,Kt;const Z=class Z{static async parseFile(t){var a;const{readFile:e}=await Promise.resolve().then(()=>ze(jt)),i=await e(t,"utf8");return f(a=Z,Q,Et).call(a,i)}static parseFileSync(t){var a;const{readFileSync:e}=jt,i=e(t,"utf8");return f(a=Z,Q,Et).call(a,i)}};Q=new WeakSet,Et=function(t){var a;const e=t.split(`
`),i={variables:{},expressions:[],errors:{}};for(const n of e){const o=n.trim();if(o.length===0||o.startsWith("#"))continue;const u=o.match(/^(.*)=(.*)$/);if(u){const[,d,h]=u;i.variables[d]=h.replace(/["']/g,"");continue}try{const d=f(a=Z,Q,Kt).call(a,o);i.expressions.push(d.interval)}catch(d){i.errors[o]=d}}return i},Kt=function(t){const e=t.split(" ");return{interval:Be.CronExpressionParser.parse(e.slice(0,5).join(" ")),command:e.slice(5,e.length)}},C(Z,Q);let St=Z;Ot.CronFileParser=St;(function(r){var t=F&&F.__createBinding||(Object.create?function(h,m,v,S){S===void 0&&(S=v);var p=Object.getOwnPropertyDescriptor(m,v);(!p||("get"in p?!m.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return m[v]}}),Object.defineProperty(h,S,p)}:function(h,m,v,S){S===void 0&&(S=v),h[S]=m[v]}),e=F&&F.__exportStar||function(h,m){for(var v in h)v!=="default"&&!Object.prototype.hasOwnProperty.call(m,v)&&t(m,h,v)};Object.defineProperty(r,"__esModule",{value:!0}),r.CronFileParser=r.CronExpressionParser=r.CronExpression=r.CronFieldCollection=r.CronDate=void 0;const i=H;var a=ft;Object.defineProperty(r,"CronDate",{enumerable:!0,get:function(){return a.CronDate}});var n=st;Object.defineProperty(r,"CronFieldCollection",{enumerable:!0,get:function(){return n.CronFieldCollection}});var o=$t;Object.defineProperty(r,"CronExpression",{enumerable:!0,get:function(){return o.CronExpression}});var u=H;Object.defineProperty(r,"CronExpressionParser",{enumerable:!0,get:function(){return u.CronExpressionParser}});var d=Ot;Object.defineProperty(r,"CronFileParser",{enumerable:!0,get:function(){return d.CronFileParser}}),e(ot,r),r.default=i.CronExpressionParser})(se);export{se as d,jt as r};
