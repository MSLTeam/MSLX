import{u as F,p as L}from"./instance.fE-wRt4i.js";import{d as f,B as R,e as W,_ as Y}from"./index.lGW1k3Hz.js";import{a as U,k as G,a2 as J,_ as O}from"./tdesign-icons-vue-next.pM9rkfXR.js";import{M as B}from"./tdesign-vue-next.B-7BKoqk.js";import{D as V,R as P,W as z,aX as u,a$ as t,G as n,b6 as M,b2 as i,ap as r,b0 as a,aY as d,ao as l,O as T,b3 as H,b1 as C,aZ as q,b5 as m}from"./index.jXwDIiIy.js";import"./pinia.0hRipQgY.js";import"./pinia-plugin-persistedstate.n2tMOXAx.js";import"./vue-router.D-iQ2OF3.js";import"./tvision-color.C7wwferE.js";import"./chroma-js.CkGq980d.js";import"./bezier-easing.CPMHfRa9.js";import"./lodash.iY27rsMZ.js";import"./axios.R-lXtGyY.js";import"./qs.D0saImlE.js";import"./side-channel.DWC36ANH.js";import"./es-errors.CFxpeikN.js";import"./object-inspect.B1mntT96.js";import"./cron-parser.DOnFJhWU.js";import"./luxon.BVaPVz1w.js";import"./side-channel-list.Df5Vde-x.js";import"./side-channel-map.4MBLZtF4.js";import"./get-intrinsic.CAdfHqt8.js";import"./es-object-atoms.Ditt1eQ6.js";import"./math-intrinsics.Cv-yPkyD.js";import"./gopd.fcd2-aIC.js";import"./es-define-property.bDCdrV83.js";import"./has-symbols.BaUvM3gb.js";import"./get-proto.Cbri-GHQ.js";import"./dunder-proto.q7lw_6_J.js";import"./call-bind-apply-helpers.BxcZtPLH.js";import"./function-bind.BbkWVFrm.js";import"./hasown.ckq0ukzO.js";import"./call-bound.BO70H6sD.js";import"./side-channel-weakmap.BIAXU6K3.js";import"./nprogress.Nt2Hi8cf.js";import"./core-js-pure.B3GbnEth.js";import"./crelt.C8TCjufn.js";import"./style-mod.Bc2inJdb.js";import"./w3c-keyname.Vcq4gwWv.js";import"./lodash-es.ClUTdtmA.js";import"./mitt.DJ65BbbF.js";import"./sortablejs.C83syoBY.js";const Z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAAsSAAALEgHS3X78AAADgklEQVR42u2dPWhTYRSGk2qlZKia+BMNFuJQERehuFiogoNSJ7tIi4MKFkELInapVYOIS8SlCqKoiwji5OhStLQOlUz+YUFrC2li7I26hGCwEbXrOTec5OKN93nWw/363S8PJ7w9yU0oBAAAASWsFdPXb1Q5ouZn+Oxp8XVu4XiCDQIgACAAIAAgAASQlVrU6+07aFp0bTTqq5v8WiwG/XWu0gEAAQABAAEAAQABYDkGWuPc5PiEWIttXCfWIpGIebP3L4+arjt28YpYK5VKYu3Rtaumv3f43IgnL5bzedF05nQAQABAAEAAQABAAKgxBr5781asbUl2mKKVVnOLXts6EmLt/XzWdADWWKrtRbuHeiKiNerRAQABAAEAAQABAAGgxhgY3xQXa/lc3hSt3CZ6WrwaOHlKrF0akePVhwuDttNp3WDay8NbN00RsZ6YqE0K6QCAAIAAgACAAIAAgABQy/8BtKyvoY18eyoF9dqJebn2aXrBtG4i9tN0Hz1OwbQXbTTtdv9WtFHx3Mc5OgAgACAAIAAgACAA1BID/wX97TmxVh4/L9a6OitibXW8zbSXeL4sR2RlL/3t8ppZZ4Un58Y4GBAAEAAQABAAEAB8GgPdJnPxWKUpDs6rfS7RAQABAAEAAQABAAGg+WJgy+0hc3zampoSa8XsrFj7dueIaa/flYmfxpoTD8RaNJGUL0x1q+vmlbNbGhyjAwACAAIAAgACAAJAvTGwkFts+KJaXNFizp8YqNT2HDoq1p70Nj7qhYx7eTX9XL5/p1Vdt+3MXdN+HKWmvcZ0AN4CAAEAAQABAAEgcDHQeqH2XbQf9+QfatS+w/cbbeLnfMkpV643Ry8JbXKp7UW7B7dpaEZ5rO2q46N0AEAAQABAAEAAQACok/DwcKoqFQ/07TfFQA0tIv6NieX/+sAzM/rjaryIei+nMnQAQABAAEAAQABAAFjGd08KtU7udo89E2ubk52mNRdmZ8Tai6G9dABAAEAAQABAAEAAQADg/wAuuI07sy7jYguvJ582fE3rL394Me6lAwACAAIAAgACAAJAg2Kg9slf7ZOmu7q7PIuJEo8H9vkqznqBF2dOB+AtABAAEAAQABAAiIE1smPndl/diN+mbF7gxZnTAXgLAAQABAAEAASAoBHWitrzg6B5SKdTYToAIAAgACAAIAAgAAAAAECQ+QUUBtshXi5agwAAAABJRU5ErkJggg==",j="/assets/png/150px-Anvil.BV3t5jxS.png",$="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAACWElEQVR42u3dPS8EURQG4G1RU6GWoFUqRK9Ao1BoJRJ+gEgUG4XERyJRKIQIFYVE0Gn8rPUPzolc1+zOPG/yljs7e89Tnczu9notz9zsxKBmewKAACAACAACgAAgAMjQDPBoYyns2+l+2O/DtbCAAAAAAAAAAAAAAAAAAAAAAADA3w0wG1DW99eXsDv95bDZ9TNgnQcCAAAAAAAAAAAAAAAAAAAAQKsAZB8wW6SUDvBxcz3sx/1l2M/r87DZ+3d+kQQAAAAAAAAAAAAAAAAAAAAAAL9obSAPdxdhn6/Own5vb4XtPBAAAAAAAAAAAAAAAAAAAAAAWgVgcmpqELV0wLW/2PHVXw5bOsDaD4xkzeYDAAAAAAAAAAAAAAAAAAAAAAC/yfzC4iBqdgO1D6gUSNMDzK6fnS8AAAAAAAAAAAAAAAAAAAAAAPwngJvbp7BNAyldRJX+gEXpAI+OT8ICAAAAAAAAAAAAAAAAAAAAAMB/AshusDaQ2g+clA5wd+8gbHZ+2esBAAAAAAAAAAAAAAAAAAAAAGCYFkFNA6m9iKk94JHfBAIAAAAAAAAAAAAAAAAAAADQKgClA64NpOkB2QQCAAAAAAAAAAAAAAAAAAAAMEoAhh3Iyupq2GEfcHZ+Y2PjYRv/xxAAAAAAAAAAAAAAAAAAAAAAOgWgaSAZgKYXMVmzAWfnBwAAAAAAAAAAAAAAAAAAAAAAo5RSIKWLoNYvYgAAAAAAAAAAAAAAAAAAAAAAoEVApmdmw1rEAAAAAAAAAAAAAAAAAAAAAACAiIiIiIiIiHQwP/KhHMCviKP2AAAAAElFTkSuQmCC",AA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAABi0lEQVR42u3cMWoCQRSAYW9mkzYHECGFYJXCKrWVTYpcQwIpUliICAaLEDxASiHn2GIs070njMgy+33wyhWZ91fD6mgEAAAAAAAAANAzh5euRLOdx5M974QFgAAQAAJAAAgAAXA/p7euRJMteL+I57yLJ/t8GxIAAkAACAABIAAEwO0ucrIF1T6fLXgzjed7FY8NCwABIAAEgAAQAALgX3bA2fy+x1MbQLbg7PvZsAAQAAJAAAgAASAArvd37Eo0tT8Mqb1osiEBIAAEgAAQAAJAAPTnImn+8RBO7QslNiAABIAAEAACQAAIgP54/ZmVaJyQABAAAkAACAABIADasdg8lmickAAQAAJAAAgAASAA2pG9EOKEBIAAEAACQAAIAAHQDhdBAhCAAAQgAAEIQAACEIAABCAAAQzH8mtSonFCAkAACAABIAAEgABohz+IEIAABCAAAQhAAAIQgAAEIAABCGA4nj/HJRonJAAEgAAQAAJAAAiAdjytxyUaJyQABIAAEAACQAAIYEAu6/zodBuokO4AAAAASUVORK5CYII=",tA={class:"server-list-container"},eA={class:"page-header"},oA={class:"card-header"},sA={class:"status-badge"},nA={class:"card-content"},iA={class:"server-name text-ellipsis"},aA={class:"server-info"},rA={class:"info-item"},lA={class:"info-item id-tag"},dA={class:"card-actions"},gA={key:0,class:"empty-state"},cA={class:"delete-dialog-body"},mA={class:"checkbox-area"},pA=V({__name:"index",setup(uA){const g=F();P(()=>{g.refreshInstanceList()});const Q=s=>{f(`/instance/console/${s.id}`)},E=(s,A)=>{if(s.includes("http"))return s;switch(s){case"neoforge":return Z;case"forge":return j;case"custom":return $;case"server-icon":return new URL(`${localStorage.getItem(R)}/api/instance/icon/${A}.png?x-user-token=${localStorage.getItem(W)}`,import.meta.url).href;default:return AA}},_=s=>s==="none"?"自定义模式":s.startsWith("@")?s.includes("neoforge")?"NeoForge":"Forge":s.replace(".jar",""),e=z({visible:!1,loading:!1,deleteFile:!1,item:null}),b=(s,A)=>{s.stopPropagation(),e.item=A,e.deleteFile=!1,e.loading=!1,e.visible=!0},v=async()=>{if(e.item){e.loading=!0;try{await L(e.item.id,e.deleteFile),B.success("删除成功"),e.visible=!1,await g.refreshInstanceList()}catch(s){B.error("删除失败: "+s.message)}finally{e.loading=!1}}};return(s,A)=>{const p=a("t-button"),h=a("t-space"),k=a("t-loading"),w=a("t-avatar"),I=a("t-tag"),D=a("t-card"),x=a("t-col"),K=a("t-row"),S=a("t-empty"),N=a("t-checkbox"),X=a("t-dialog");return d(),u("div",tA,[t("div",eA,[A[5]||(A[5]=t("h2",{class:"title"},"服务端列表",-1)),n(h,null,{default:i(()=>[n(p,{theme:"primary",variant:"dashed",onClick:r(g).refreshInstanceList},{default:i(()=>[...A[3]||(A[3]=[l(" 刷新列表 ",-1)])]),_:1},8,["onClick"]),n(p,{theme:"primary",onClick:A[0]||(A[0]=o=>r(f)("/instance/create"))},{default:i(()=>[...A[4]||(A[4]=[l(" 添加服务端 ",-1)])]),_:1})]),_:1})]),n(k,{loading:!1,text:"加载中...",fullscreen:""}),n(K,{gutter:[24,24]},{default:i(()=>[(d(!0),u(T,null,H(r(g).instanceList,o=>(d(),C(x,{key:o.id,xs:12,sm:6,md:4,lg:3,xl:3},{default:i(()=>[n(D,{class:"server-card",bordered:!1,onClick:c=>Q(o)},{default:i(()=>[t("div",oA,[t("div",{class:q(["icon-wrapper",{"is-running":o.status}])},[n(w,{image:E(o.icon,o.id),size:"large",shape:"round",class:"server-icon"},null,8,["image"])],2),t("div",sA,[o.status?(d(),C(I,{key:0,theme:"success",variant:"light",shape:"round"},{icon:i(()=>[n(r(U))]),default:i(()=>[A[6]||(A[6]=l(" 运行中 ",-1))]),_:1})):(d(),C(I,{key:1,theme:"default",variant:"light",shape:"round"},{icon:i(()=>[n(r(G))]),default:i(()=>[A[7]||(A[7]=l(" 未启动 ",-1))]),_:1}))])]),t("div",nA,[t("h3",iA,m(o.name),1),t("div",aA,[t("div",rA,[n(r(J),{class:"info-icon"}),t("span",null,m(_(o.core)),1)]),t("div",lA,[t("span",null,"#"+m(o.id),1)])])]),t("div",dA,[A[8]||(A[8]=t("span",{class:"action-hint"},"点击管理",-1)),n(p,{shape:"circle",theme:"danger",variant:"text",class:"delete-btn",onClick:c=>b(c,o)},{default:i(()=>[n(r(O))]),_:1},8,["onClick"])])]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}),r(g).instanceList.length===0?(d(),u("div",gA,[n(S,{description:"暂无服务端实例"})])):M("",!0),n(X,{visible:e.visible,"onUpdate:visible":A[2]||(A[2]=o=>e.visible=o),header:"确认删除",theme:"danger","confirm-btn":{content:"确认删除",loading:e.loading},onConfirm:v},{default:i(()=>{var o,c;return[t("div",cA,[t("p",null,[A[9]||(A[9]=l(" 您确定要删除服务端 ",-1)),t("strong",null,m((o=e.item)==null?void 0:o.name),1),l(" (ID: "+m((c=e.item)==null?void 0:c.id)+") 吗？ ",1)]),A[11]||(A[11]=t("p",{class:"warning-text"},"此操作不可恢复！",-1)),t("div",mA,[n(N,{modelValue:e.deleteFile,"onUpdate:modelValue":A[1]||(A[1]=y=>e.deleteFile=y)},{default:i(()=>[...A[10]||(A[10]=[l("同时删除服务端文件数据",-1)])]),_:1},8,["modelValue"])])])]}),_:1},8,["visible","confirm-btn"])])}}}),st=Y(pA,[["__scopeId","data-v-43c7dd61"]]);export{st as default};
