import{a as me}from"./vue-router.CTuarHf7.js";import{F as b,bb as Ee,be as Ae,D as ne,P as te,R as de,V as be,aa as _e,aX as B,a$ as e,b5 as L,ak as tt,bd as at,bk as st,bi as lt,bj as nt,aY as p,K as le,G as t,b0 as R,b2 as n,b6 as z,aZ as pe,b1 as W,ap as I,O as re,ao as _,b3 as ue,am as Oe,b4 as Te}from"./index.BbdIPky0.js";import{c as j}from"./ansi-colors.gpWjHU8Z.js";import{d as ot}from"./pinia.DE9DXmFR.js";import{u as De,_ as oe,r as ke,c as it}from"./index.p8IGZoMp.js";import{g as rt,b as ut,u as dt,c as ct,d as Ce}from"./instance.BZJKPd5H.js";import{S as vt,g as mt,a as pt}from"./localJava.k8AejVPh.js";import{d as ft,i as gt,u as yt,f as bt,g as _t,s as kt,a as ht,b as wt}from"./files.I3gmqbi6.js";import{M as H,N as $t,D as Ve}from"./tdesign-vue-next.EnwhK9x8.js";import{ac as xt,ad as Ct,ae as Ue,af as Me,a1 as St,U as he,y as Vt,_ as Ne,ag as Fe,ah as Rt,ai as ze,aj as Ut,z as we,g as Mt,c as It,ak as Bt,a7 as Je,a8 as je,ab as Lt,M as Ge,al as Pt,am as Et,an as Ie,ao as Se,ap as At,aq as Be,a4 as Ot,ar as Tt,as as Dt,at as Nt,au as Ft,av as zt,aw as Jt,ax as jt}from"./tdesign-icons-vue-next.DieAbZNO.js";import{F as Gt}from"./FileUploader.Do2fyRXV.js";import{d as Xt}from"./cron-parser.BqMfRICj.js";import{i as Le}from"./echarts.J8iroDPP.js";import{V as Wt}from"./zrender.B_NAtvFA.js";import"./core-js-pure.DghWRT_o.js";import"./crelt.C8TCjufn.js";import"./style-mod.Bc2inJdb.js";import"./w3c-keyname.Vcq4gwWv.js";import"./pinia-plugin-persistedstate.n2tMOXAx.js";import"./tvision-color.BU_YHHaJ.js";import"./chroma-js.Cmk4elvR.js";import"./bezier-easing.jp9ayU57.js";import"./lodash.BpjWTYO-.js";import"./axios.R-lXtGyY.js";import"./qs.CnepGyXr.js";import"./side-channel.Bf-JVZLg.js";import"./es-errors.CFxpeikN.js";import"./object-inspect.CD-SYzlK.js";import"./side-channel-list.CQN2BsdT.js";import"./side-channel-map.BJ69Knz3.js";import"./get-intrinsic.CAdfHqt8.js";import"./es-object-atoms.Ditt1eQ6.js";import"./math-intrinsics.Cv-yPkyD.js";import"./gopd.fcd2-aIC.js";import"./es-define-property.bDCdrV83.js";import"./has-symbols.BaUvM3gb.js";import"./get-proto.Cbri-GHQ.js";import"./dunder-proto.q7lw_6_J.js";import"./call-bind-apply-helpers.BxcZtPLH.js";import"./function-bind.BbkWVFrm.js";import"./hasown.ckq0ukzO.js";import"./call-bound.BO70H6sD.js";import"./side-channel-weakmap.BkoVKe_V.js";import"./nprogress.CMq2Rk2a.js";import"./lodash-es.ClUTdtmA.js";import"./mitt.DJ65BbbF.js";import"./sortablejs.C83syoBY.js";import"./luxon.BVaPVz1w.js";import"./tslib.BDyQ-Jie.js";const Xe=ot("instanceHub",()=>{const l=De(),y=b(null),h=b(!1),c=b(null),C=b(0),g=b(0);let x=Promise.resolve();const S=b({cpu:0,memBytes:0,memPercent:0}),u=new Set,o=new Set,d=f=>{g.value=f},J=f=>(x=x.then(async()=>{var V;if(C.value++,((V=y.value)==null?void 0:V.state)==="Connected"&&c.value===f)return;y.value&&await M(),c.value=f,g.value=0;const{baseUrl:E,token:$}=l,r=new URL("/api/hubs/instanceControlHub",E||window.location.origin);$&&r.searchParams.append("x-user-token",$);const m=new Ee().withUrl(r.toString(),{withCredentials:!1}).configureLogging(Ae.Warning).withAutomaticReconnect([0,2e3,5e3,1e4]).build();m.on("ReceiveLog",i=>{u.forEach(w=>w(i))}),m.on("CommandResult",(i,w)=>{o.forEach(N=>N(i,w))}),m.on("ReceiveStatus",(i,w,N)=>{if(String(i)!==String(f))return;let Z=0;if(g.value>0){const Y=g.value*1024*1024;Z=N/Y*100,Z>100&&(Z=100)}S.value={cpu:w,memBytes:N,memPercent:Z}}),m.onreconnecting(()=>u.forEach(i=>i("\x1B[1;31m[System] 连接中断，尝试重连...\x1B[0m"))),m.onreconnected(async()=>{u.forEach(i=>i("\x1B[1;32m[System] 网络恢复，重新加入会话...\x1B[0m"));try{await m.invoke("JoinGroup",f)}catch(i){console.error(i)}});try{await m.start(),await m.invoke("JoinGroup",f),y.value=m,h.value=!0,u.forEach(i=>i("\x1B[1;32m[System] 已连接到实例控制服务\x1B[0m"))}catch(i){h.value=!1,u.forEach(w=>w(`\x1B[1;31m[Error] 连接失败: ${i.message}\x1B[0m`)),c.value=null,y.value=null}}),x),G=()=>(x=x.then(async()=>{C.value>0&&C.value--,C.value===0&&await M()}),x),M=async()=>{if(y.value)try{y.value.state==="Connected"&&c.value&&await y.value.invoke("LeaveGroup",c.value),await y.value.stop()}catch(f){console.warn(f)}y.value=null,h.value=!1,c.value=null,g.value=0,S.value={cpu:0,memBytes:0,memPercent:0}};return{isConnected:h,stats:S,currentServerId:c,connect:J,disconnect:G,setMaxMemory:d,sendCommand:async f=>{if(!y.value||y.value.state!=="Connected"||!c.value)throw new Error("未连接到服务");await y.value.invoke("SendCommand",c.value,f)},onLog:f=>(u.add(f),()=>u.delete(f)),onCommandResult:f=>(o.add(f),()=>o.delete(f))}});j.enabled=!0;const Kt=l=>l?(l.includes("Done")&&l.includes("!")&&(l=l.replace(/Done \((.*?)\)!/g,(y,h)=>`${j.green.bold("Done")} (${j.blue(h)})!`)),l.startsWith("[System]")&&(l=l.replace(/^\[System\]/,`[${j.blue.bold("System")}]`)),l.includes("[MSLX]")&&(l=l.replace(/\[MSLX\]/g,`[${j.magenta.bold("MSLX")}]`)),l.includes("[MSLX-Backup]")&&(l=l.replace(/\[MSLX-Backup\]/g,`[${j.magenta.bold("MSLX-Backup")}]`)),l.startsWith(">>>")&&(l=l.replace(/^>>>/,j.red.bold(">>>"))),l=l.replace(/^\[(\d{2}:\d{2}:\d{2})\s+(INFO|WARN|WARNING|ERROR|FATAL|DEBUG)\]:/,(y,h,c)=>{let C=c;switch(c){case"INFO":C=j.green("INFO");break;case"WARN":case"WARNING":C=j.magenta.bold("WARN");break;case"ERROR":case"FATAL":C=j.red.bold(c);break;case"DEBUG":C=j.blue("DEBUG");break}return`[${j.gray(h)} ${C}]:`}),/^\[\d{2}:\d{2}:\d{2}\]/.test(l)&&(l=l.replace(/^\[(\d{2}:\d{2}:\d{2})\]/,(y,h)=>`[${j.gray(h)}]`)),l=l.replace(/\[([^/]+)\/(INFO|WARN|WARNING|ERROR|FATAL|DEBUG)\]/g,(y,h,c)=>{const C=j.blue(h);let g=c;switch(c){case"INFO":g=j.green("INFO");break;case"WARN":g=j.magenta("WARN");break;case"ERROR":g=j.red.bold("ERROR");break}return`[${C}/${g}]`}),l=l.replace(new RegExp("(?<=:\\s|^)\\s*\\[([a-zA-Z0-9_\\-.\\s]+)\\](?=\\s)","g"),(y,h)=>h==="System"||h.includes("MSLX")?y:` [${j.bold.black(h)}]`),l=l.replace(/(https?:\/\/[^\s]+)/g,y=>j.blue.underline(y)),l=l.replace(/\b\d+\.\d+(\.\d+)?(-[a-zA-Z0-9]+)?\b/g,y=>j.magenta(y)),l=l.replace(/\b\d+(\.\d+)?\s?(ms|s|%|MB|GB|KB)\b/gi,y=>j.blue(y)),l=l.replace(new RegExp("(\\u001b\\[[\\d;]*m)|((?<!\\d:\\d)\\b\\d+\\b(?!\\s*:\\s*\\d))","g"),(y,h,c)=>{if(h)return y;if(c){if(c.length>=4&&c.length<=6)return j.blue(c);if(c.length<=3)return j.blue(c)}return y}),l=l.replace(/(\*:\d{1,5})/,y=>j.blue.bold(y)),l=l.replace(/\b(Loaded|Saved|Starting|Started|Connected)\b/g,y=>j.green(y)),l=l.replace(/\bDone\b(?!\u001b)/g,j.green.bold("Done")),l=l.replace(/\b(Failed|Exception|Error|Caused by|Stopping|Closed)\b/g,y=>j.red.bold(y)),l=l.replace(/\b(Loading|Preparing|Generating|Saving|Using|Running)\b/g,y=>j.magenta(y)),l=l.replace(/\b(Minecraft|Paper|Velocity|Java)\b/gi,y=>j.bold.black(y)),l=l.replace(/'minecraft:[a-z_]+'/g,y=>j.magenta(y)),l=l.replace(/\n/g,`\r
`),l):"",qt={class:"terminal-header"},Ht={class:"tab-title"},Yt={class:"terminal-footer"},Zt=ne({__name:"ServerTerminal",props:{serverId:{}},emits:["update"],setup(l,{expose:y,emit:h}){const c=l,C=h,g=Xe(),x=b(null),S=b(null);let u=null,o=null,d=null,J=null,G=null,M=null,k="";const s=b(""),v={dark:{background:"#181818",foreground:"#cccccc",cursor:"#cccccc",selectionBackground:"#264f78",black:"#000000",red:"#cd3131",green:"#0dbc79",yellow:"#e5e510",blue:"#2472c8",magenta:"#bc3fbc",cyan:"#11a8cd",white:"#e5e5e5",brightBlack:"#666666",brightRed:"#f14c4c",brightGreen:"#23d18b",brightYellow:"#f5f543",brightBlue:"#3b8eea",brightMagenta:"#d670d6",brightCyan:"#29b8db",brightWhite:"#e5e5e5"},light:{background:"#ffffff",foreground:"#333333",cursor:"#333333",selectionBackground:"#add6ff",black:"#000000",red:"#cd3131",green:"#00bc79",yellow:"#9d9d10",blue:"#2472c8",magenta:"#bc3fbc",cyan:"#11a8cd",white:"#e5e5e5",brightBlack:"#666666",brightRed:"#f14c4c",brightGreen:"#23d18b",brightYellow:"#f5f543",brightBlue:"#3b8eea",brightMagenta:"#d670d6",brightCyan:"#29b8db",brightWhite:"#e5e5e5"}};j.enabled=!0;const f=O=>Kt(O),E=()=>{if(!S.value||!x.value)return;if(u){u.clear(),i();return}const O=document.documentElement.getAttribute("theme-mode")==="dark";u=new lt.Terminal({cursorBlink:!0,cursorStyle:"block",fontSize:13,fontFamily:'Menlo, Monaco, "Courier New", monospace',lineHeight:1.4,theme:O?v.dark:v.light,disableStdin:!1,convertEol:!0}),o=new nt.FitAddon,u.loadAddon(o),u.open(S.value),u.onData(q=>$(q));const F=()=>{if(S.value&&S.value.clientWidth>0&&S.value.clientHeight>0)try{o==null||o.fit()}catch(q){console.warn(q)}};d=new ResizeObserver(()=>window.requestAnimationFrame(F)),d.observe(x.value),setTimeout(F,100),i()},$=async O=>{!u||!c.serverId||(O==="\r"?(u.write(`\r
`),k.trim()&&await m(k),k=""):O===""?k.length>0&&(k=k.slice(0,-1),u.write("\b \b")):O>=" "&&(k+=O,u.write(O)))},r=async()=>{if(!s.value)return;const O=s.value;u==null||u.writeln(O),await m(O),s.value=""},m=async O=>{try{await g.sendCommand(O)}catch(F){u==null||u.writeln(`\x1B[1;31m[Error] ${F.message}\x1B[0m`)}},V=()=>{if(!u)return;const O=document.documentElement.getAttribute("theme-mode")==="dark";u.options.theme=O?v.dark:v.light},i=()=>{u==null||u.writeln("\x1B[1;34m[System]\x1B[0m 正在连接服务器控制台 ..."),u==null||u.writeln(`\x1B[1;34m[System]\x1B[0m 实例 ID: ${c.serverId}`),u==null||u.writeln("")},w=async()=>{c.serverId&&(G&&G(),G=g.onLog(O=>{u&&u.writeln(f(O)),O.startsWith("[MSLX]")&&C("update")}),M&&M(),M=g.onCommandResult((O,F)=>{O||u==null||u.writeln(`\x1B[1;31m[System] 指令执行反馈: ${F}\x1B[0m`)}),await g.connect(c.serverId))},N=async()=>{G&&G(),M&&M(),await g.disconnect()};return y({writeln:O=>u==null?void 0:u.writeln(O),clear:()=>{u==null||u.clear(),i()}}),te(()=>c.serverId,async(O,F)=>{O!==F&&(await N(),E(),await w())}),de(async()=>{await be(),E(),J=new MutationObserver(V),J.observe(document.documentElement,{attributes:!0,attributeFilter:["theme-mode"]}),await w()}),_e(async()=>{J==null||J.disconnect(),d==null||d.disconnect(),u==null||u.dispose(),await N()}),(O,F)=>(p(),B("div",{ref_key:"terminalWrapper",ref:x,class:"terminal-wrapper"},[e("div",qt,[F[1]||(F[1]=e("div",{class:"dots"},[e("span",{class:"dot red"}),e("span",{class:"dot yellow"}),e("span",{class:"dot green"})],-1)),e("div",Ht,"MSLX 服务端控制台 | #"+L(l.serverId),1)]),e("div",{ref_key:"terminalBody",ref:S,class:"terminal-body"},null,512),e("div",Yt,[tt(e("input",{"onUpdate:modelValue":F[0]||(F[0]=q=>s.value=q),class:"cmd-input",placeholder:"发送控制台指令...",onKeyup:st(r,["enter"])},null,544),[[at,s.value]]),e("button",{class:"send-btn",onClick:r},"发送")])],512))}}),Qt=oe(Zt,[["__scopeId","data-v-b532051e"]]),ea={class:"settings-container"},ta={class:"setting-item"},aa={class:"setting-control"},sa={class:"setting-item"},la={class:"setting-info"},na={class:"desc"},oa={class:"setting-control"},ia={class:"setting-item"},ra={class:"setting-control"},ua={key:0,style:{"margin-top":"8px"}},da={class:"setting-item"},ca={class:"setting-info"},va={class:"title"},ma={class:"desc"},pa={class:"setting-control"},fa={class:"setting-item"},ga={class:"setting-control"},ya={key:0,class:"core-tools-panel"},ba={key:0,class:"upload-progress"},_a={class:"setting-item"},ka={class:"setting-control flex-row"},ha={class:"setting-item"},wa={class:"setting-control flex-row"},$a={class:"setting-info-desc-only"},xa={style:{"font-size":"12px",color:"var(--td-text-color-placeholder)",cursor:"help"}},Ca={class:"setting-item"},Sa={class:"setting-control"},Va={key:0,style:{"margin-top":"8px"}},Ra={key:2,class:"setting-group-title"},Ua={key:3,class:"setting-item"},Ma={class:"setting-control"},Ia={key:0,style:{"margin-top":"8px"}},Ba={class:"setting-item"},La={class:"setting-control"},Pa={key:4,class:"setting-item"},Ea={class:"setting-control"},Aa={class:"setting-item"},Oa={class:"setting-control"},Ta={class:"setting-item"},Da={class:"setting-control flex-row"},Na={class:"setting-item"},Fa={class:"setting-control flex-row"},za={class:"form-actions"},Ja={class:"progress-body"},ja={id:"update-log-box",class:"log-box"},Ga={class:"time"},Xa={key:0,class:"dialog-actions"},Wa=ne({__name:"GeneralSettings",setup(l){const y=me(),h=De(),c=parseInt(y.params.id),C=b(null),g=b(!1),x=b(!1),S=b(!1),u=[{label:"UTF-8",value:"utf-8"},{label:"GBK",value:"gbk"}],o=b({id:c,name:"",base:"",java:"",core:"",minM:1024,maxM:4096,args:"",yggdrasilApiAddr:"",backupMaxCount:20,backupDelay:10,backupPath:"MSLX://Backup/Instance",autoRestart:!1,forceAutoRestart:!0,runOnStartup:!1,inputEncoding:"utf-8",outputEncoding:"utf-8",fileEncoding:"utf-8",coreUrl:"",coreSha256:"",coreFileKey:""}),d=b("custom"),J=b([]),G=b([]),M=b(""),k=b(""),s=async(P=!1)=>{try{P&&H.info("正在扫描 Java 环境...");const a=await mt(h.userInfo.systemInfo.osType.toLowerCase().replace("os",""),h.userInfo.systemInfo.osArchitecture.toLowerCase());a&&Array.isArray(a)&&(J.value=a.map(X=>({label:`Java ${X} (在线)`,value:X})));const K=await pt(P);G.value=K.map(X=>({label:`Java ${X.version} (${X.path})`,value:X.path})),P&&H.success("刷新成功")}catch(a){console.error(a)}};te([d,M,k],([P,a,K])=>{P==="none"?o.value.java="none":P==="env"?o.value.java="java":P==="custom"||P==="local"?o.value.java=K:P==="online"&&(o.value.java=a?`MSLX://Java/${a}`:"")});const v=b("MSLX://Backup/Instance"),f=b("");te([v,f],([P,a])=>{P==="custom"?o.value.backupPath=a:o.value.backupPath=P});const E=b(""),$=b(""),r=[{label:"官方/离线模式 (无)",value:"none"},{label:"MSL 统一身份验证 (MSL Skin)",value:"https://skin.mslmc.net/api/yggdrasil"},{label:"LittleSkin",value:"https://littleskin.cn/api/yggdrasil"},{label:"自定义服务器",value:"custom"}];te([E,$],([P,a])=>{P==="none"?o.value.yggdrasilApiAddr="":P==="custom"?o.value.yggdrasilApiAddr=a:o.value.yggdrasilApiAddr=P});const m=b(!1),V=b(!1),i=b(null),w=b(!1),N=b(0),Z=b(""),Y=P=>{o.value.core=P.filename,o.value.coreUrl=P.url,o.value.coreSha256=P.sha256,o.value.coreFileKey="",m.value=!1,H.success(`已选择核心: ${P.filename}，保存后将自动下载`)},O=()=>{var P;return(P=i.value)==null?void 0:P.click()},F=async P=>{var X;const a=P.target;if(!((X=a.files)!=null&&X.length))return;const K=a.files[0];if(o.value.coreFileKey)try{await ft(o.value.coreFileKey)}catch{console.error("删除上传失败")}Z.value=K.name,w.value=!0,N.value=0;try{const ee=(await gt()).uploadId,se=5*1024*1024,ce=Math.ceil(K.size/se);for(let ie=0;ie<ce;ie++){const $e=K.slice(ie*se,Math.min(K.size,(ie+1)*se));await yt(ee,ie,$e),N.value=Math.floor((ie+1)/ce*100)}const ve=await bt(ee,ce);o.value.coreFileKey=ve.uploadId,o.value.core=K.name,o.value.coreUrl="",H.success("文件上传就绪，保存后生效"),m.value=!1}catch(ae){H.error(`上传失败: ${ae.message}`)}finally{w.value=!1,a.value=""}},q=()=>{S.value||$t.warning({title:"风险操作",content:"修改实例路径会导致面板无法找到原有文件。请确保您已手动移动了文件，或您明确知道自己在做什么。",duration:5e3}),S.value=!S.value},T=b(!1),D=b(0),A=b([]),Q=b(null),We=le(()=>d.value==="none"?{name:[{required:!0,message:"服务器名称不能为空",trigger:"blur"}],base:[{required:!0,message:"基础路径不能为空",trigger:"blur"}],args:[{required:!0,message:"自定义模式必须填写启动命令",trigger:"blur"}]}:{name:[{required:!0,message:"服务器名称不能为空",trigger:"blur"}],base:[{required:!0,message:"基础路径不能为空",trigger:"blur"}],java:[{required:!0,message:"Java 环境不能为空",trigger:"change"}],core:[{required:!0,message:"核心文件名不能为空",trigger:"change"}],minM:[{required:!0,message:"必填",trigger:"blur"}],maxM:[{required:!0,message:"必填",trigger:"blur"}]}),fe=async()=>{g.value=!0;try{await s();const P=await rt(c);if(o.value={...o.value,...P,coreUrl:"",coreFileKey:"",coreSha256:""},S.value=!1,P.java==="none")d.value="none";else if(P.java==="java")d.value="env";else if(P.java.startsWith("MSLX://Java/"))d.value="online",M.value=P.java.replace("MSLX://Java/","");else{const X=G.value.find(ae=>ae.value===P.java);d.value=X?"local":"custom",k.value=P.java}const a=P.backupPath;a==="MSLX://Backup/Instance"||a==="MSLX://Backup/Data"?v.value=a:(v.value="custom",f.value=a);const K=P.yggdrasilApiAddr;K?K==="https://skin.mslmc.net/api/yggdrasil"?E.value="https://skin.mslmc.net/api/yggdrasil":K==="https://littleskin.cn/api/yggdrasil"?E.value="https://littleskin.cn/api/yggdrasil":(E.value="custom",$.value=K):E.value="none"}catch(P){H.error("获取配置失败: "+P.message)}finally{g.value=!1}};de(fe);const Ke=async()=>{var a,K;if(await((a=C.value)==null?void 0:a.validate())===!0&&!(d.value!=="none"&&(o.value.coreUrl||o.value.coreFileKey)&&!await new Promise(ee=>{const se=Ve.confirm({header:"确认变更核心文件?",body:"检测到您上传或选择了新的核心文件，这将覆盖服务器现有的部署。",theme:"warning",onConfirm:()=>{se.hide(),ee(!0)},onClose:()=>{se.hide(),ee(!1)}})}))){d.value==="none"&&(o.value.core="none",o.value.minM=1027,o.value.maxM=1102,o.value.java="none",o.value.coreUrl="",o.value.coreFileKey="",o.value.coreSha256=""),x.value=!0;try{const X=await ut(o.value);((K=X.data)==null?void 0:K.needListen)??X.needListen?qe():(H.success("配置已保存"),x.value=!1,fe())}catch(X){H.error(X.message||"保存失败"),x.value=!1}}},qe=async()=>{T.value=!0,D.value=0,A.value=[];const{baseUrl:P,token:a}=h,K=new URL("/api/hubs/updateProgressHub",P||window.location.origin);K.searchParams.append("x-user-token",a),Q.value=new Ee().withUrl(K.toString(),{withCredentials:!1}).configureLogging(Ae.None).build(),Q.value.on("UpdateStatus",(X,ae,ee)=>{A.value.push({time:new Date().toLocaleTimeString(),msg:ee?`[错误] ${X}`:X}),be(()=>{const se=document.getElementById("update-log-box");se&&(se.scrollTop=se.scrollHeight)}),ae>=0&&(D.value=Number(ae.toFixed(1))),ae===100&&(H.success("更新完成"),He(!0))});try{await Q.value.start(),await Q.value.invoke("JoinGroup",c.toString())}catch{A.value.push({time:"-",msg:"连接失败"})}},He=(P=!1)=>{var a;(a=Q.value)==null||a.stop(),setTimeout(()=>{T.value=!1,x.value=!1,P&&fe()},1e3)};return _e(()=>{var P;(P=Q.value)==null||P.stop()}),(P,a)=>{const K=R("t-input"),X=R("t-button"),ae=R("t-tooltip"),ee=R("t-select"),se=R("t-textarea"),ce=R("t-alert"),ve=R("t-icon"),ie=R("t-col"),$e=R("t-row"),Re=R("t-progress"),Ye=R("t-space"),ge=R("t-input-number"),xe=R("t-switch"),Ze=R("t-form"),Qe=R("t-dialog");return p(),B("div",ea,[t(Ze,{ref_key:"formRef",ref:C,data:o.value,rules:We.value,"label-width":"0",onSubmit:Ke},{default:n(()=>[a[49]||(a[49]=e("div",{class:"setting-group-title"},"基础设置",-1)),e("div",ta,[a[27]||(a[27]=e("div",{class:"setting-info"},[e("div",{class:"title"},"服务器名称"),e("div",{class:"desc"},"在面板列表中显示的别名，支持中文")],-1)),e("div",aa,[t(K,{modelValue:o.value.name,"onUpdate:modelValue":a[0]||(a[0]=U=>o.value.name=U),placeholder:"请输入名称"},null,8,["modelValue"])])]),e("div",sa,[e("div",la,[a[28]||(a[28]=e("div",{class:"title"},"实例路径",-1)),e("div",na,[e("span",{class:pe({"text-warning":S.value})},L(S.value?"警告：修改路径可能导致无法找到原文件":"服务器文件的物理存储路径，非必要请勿修改"),3)])]),e("div",oa,[t(K,{modelValue:o.value.base,"onUpdate:modelValue":a[1]||(a[1]=U=>o.value.base=U),disabled:!S.value},{suffix:n(()=>[t(ae,{content:S.value?"点击锁定":"点击解锁编辑 (慎重)"},{default:n(()=>[t(X,{variant:"text",shape:"square",onClick:q},{icon:n(()=>[S.value?(p(),W(I(xt),{key:0,style:{color:"var(--td-warning-color)"}})):(p(),W(I(Ct),{key:1}))]),_:1})]),_:1},8,["content"])]),_:1},8,["modelValue","disabled"])])]),a[50]||(a[50]=e("div",{class:"setting-group-title"},"运行模式",-1)),e("div",ia,[a[29]||(a[29]=e("div",{class:"setting-info"},[e("div",{class:"title"},"启动方式"),e("div",{class:"desc"},"选择使用 Java 启动 Minecraft，或使用自定义命令启动其他程序 (如 Bedrock, Python 等)")],-1)),e("div",ra,[t(ee,{modelValue:d.value,"onUpdate:modelValue":a[2]||(a[2]=U=>d.value=U),options:[{label:"MSLX 在线下载 (Java)",value:"online"},{label:"使用本地版本 (Java)",value:"local"},{label:"自定义路径 (Java)",value:"custom"},{label:"环境变量 (Java)",value:"env"},{label:"自定义命令 (无Java)",value:"none"}]},null,8,["modelValue"]),d.value!=="none"?(p(),B("div",ua,[d.value==="online"?(p(),W(ee,{key:0,modelValue:M.value,"onUpdate:modelValue":a[3]||(a[3]=U=>M.value=U),options:J.value,placeholder:"请选择版本",filterable:""},null,8,["modelValue","options"])):z("",!0),d.value==="local"?(p(),W(ee,{key:1,modelValue:k.value,"onUpdate:modelValue":a[4]||(a[4]=U=>k.value=U),options:G.value,placeholder:"选择已识别的 Java"},null,8,["modelValue","options"])):z("",!0),d.value==="custom"?(p(),W(K,{key:2,modelValue:k.value,"onUpdate:modelValue":a[5]||(a[5]=U=>k.value=U),placeholder:"输入 java 可执行文件完整路径"},null,8,["modelValue"])):z("",!0)])):z("",!0)])]),e("div",da,[e("div",ca,[e("div",va,L(d.value==="none"?"启动命令 (Command)":"启动参数 (JVM Args)"),1),e("div",ma,L(d.value==="none"?"完全自定义的启动命令。程序将直接执行此段内容，不依赖 Java 环境。":"传递给 Java 的启动参数，如 GC 策略 (例如 -XX:+UseG1GC)"),1)]),e("div",pa,[t(se,{modelValue:o.value.args,"onUpdate:modelValue":a[6]||(a[6]=U=>o.value.args=U),autosize:{minRows:2,maxRows:4},placeholder:d.value==="none"?"例如: ./bedrock_server_x64":"无特殊需求请留空"},null,8,["modelValue","placeholder"])])]),d.value!=="none"?(p(),B(re,{key:0},[a[33]||(a[33]=e("div",{class:"setting-group-title"},"核心管理",-1)),e("div",fa,[a[32]||(a[32]=e("div",{class:"setting-info"},[e("div",{class:"title"},"服务端核心文件"),e("div",{class:"desc"},[_(" 指定启动的 Jar 文件名。如果文件已存在于目录中，直接输入文件名即可。 "),e("br"),_("需要更新核心？点击下方“文件工具” ")])],-1)),e("div",ga,[t(K,{modelValue:o.value.core,"onUpdate:modelValue":a[8]||(a[8]=U=>o.value.core=U),placeholder:"例如 server.jar"},{suffix:n(()=>[t(X,{variant:"text",theme:"primary",size:"small",onClick:a[7]||(a[7]=U=>m.value=!m.value)},{default:n(()=>[_(L(m.value?"收起工具":"文件工具"),1)]),_:1})]),_:1},8,["modelValue"]),m.value?(p(),B("div",ya,[t(Ye,{direction:"vertical",style:{width:"100%"}},{default:n(()=>[t(ce,{theme:"info",message:"在此处操作会自动下载/上传文件，并填入上方的文件名。"}),t($e,{gutter:12},{default:n(()=>[t(ie,{span:6},{default:n(()=>[t(X,{block:"",variant:"outline",onClick:a[9]||(a[9]=U=>V.value=!0)},{icon:n(()=>[t(ve,{name:"cloud-download"})]),default:n(()=>[a[30]||(a[30]=_(" 从版本库下载 ",-1))]),_:1})]),_:1}),t(ie,{span:6},{default:n(()=>[t(X,{block:"",variant:"outline",loading:w.value,onClick:O},{icon:n(()=>[t(ve,{name:"upload"})]),default:n(()=>[a[31]||(a[31]=_(" 上传本地文件 ",-1))]),_:1},8,["loading"])]),_:1})]),_:1}),e("input",{ref_key:"uploadInputRef",ref:i,type:"file",accept:".jar",hidden:"",onChange:F},null,544),w.value?(p(),B("div",ba,[e("span",null,"正在上传: "+L(Z.value),1),t(Re,{theme:"line",percentage:N.value},null,8,["percentage"])])):z("",!0)]),_:1})])):z("",!0)])])],64)):z("",!0),d.value!=="none"?(p(),B(re,{key:1},[a[36]||(a[36]=e("div",{class:"setting-group-title"},"资源限制",-1)),e("div",_a,[a[35]||(a[35]=e("div",{class:"setting-info"},[e("div",{class:"title"},"内存分配 (MB)"),e("div",{class:"desc"},"设置 Java 堆内存大小 (Xms / Xmx)")],-1)),e("div",ka,[t(ge,{modelValue:o.value.minM,"onUpdate:modelValue":a[10]||(a[10]=U=>o.value.minM=U),min:0,placeholder:"最小(Xms)",theme:"column",style:{width:"140px"},suffix:"MB"},null,8,["modelValue"]),a[34]||(a[34]=e("span",{class:"separator"},"-",-1)),t(ge,{modelValue:o.value.maxM,"onUpdate:modelValue":a[11]||(a[11]=U=>o.value.maxM=U),min:0,placeholder:"最大(Xmx)",theme:"column",style:{width:"140px"},suffix:"MB"},null,8,["modelValue"])])])],64)):z("",!0),a[51]||(a[51]=e("div",{class:"setting-group-title"},"备份设置",-1)),e("div",ha,[a[39]||(a[39]=e("div",{class:"setting-info"},[e("div",{class:"title"},"备份策略"),e("div",{class:"desc"},"设置自动备份保留的最大数量，以及触发备份的延迟时间")],-1)),e("div",wa,[t(ge,{modelValue:o.value.backupMaxCount,"onUpdate:modelValue":a[12]||(a[12]=U=>o.value.backupMaxCount=U),min:1,max:100,placeholder:"保留份数",theme:"column",style:{width:"140px"},suffix:"份"},null,8,["modelValue"]),a[37]||(a[37]=e("span",{class:"separator"},"/",-1)),t(ge,{modelValue:o.value.backupDelay,"onUpdate:modelValue":a[13]||(a[13]=U=>o.value.backupDelay=U),min:0,placeholder:"延迟时间",theme:"column",style:{width:"140px"},suffix:"秒"},null,8,["modelValue"])]),e("div",$a,[t(ae,{content:"MSLX 向服务器发送 save-all 指令后，会等待指定的秒数，确保数据完全写入硬盘后再开始打包备份。"},{default:n(()=>[e("span",xa,[t(ve,{name:"help-circle"}),a[38]||(a[38]=_(" 什么是延迟时间？ ",-1))])]),_:1})])]),e("div",Ca,[a[40]||(a[40]=e("div",{class:"setting-info"},[e("div",{class:"title"},"备份存放路径"),e("div",{class:"desc"},"选择备份文件存储的位置。推荐存储在实例文件夹外部以免误删。")],-1)),e("div",Sa,[t(ee,{modelValue:v.value,"onUpdate:modelValue":a[14]||(a[14]=U=>v.value=U),options:[{label:"实例文件夹内 (Instance)",value:"MSLX://Backup/Instance"},{label:"全局数据目录 (Data)",value:"MSLX://Backup/Data"},{label:"自定义绝对路径",value:"custom"}]},null,8,["modelValue"]),v.value==="custom"?(p(),B("div",Va,[t(K,{modelValue:f.value,"onUpdate:modelValue":a[15]||(a[15]=U=>f.value=U),placeholder:"输入备份存放的绝对路径"},null,8,["modelValue"])])):z("",!0)])]),d.value!=="none"?(p(),B("div",Ra,"外置登录")):z("",!0),d.value!=="none"?(p(),B("div",Ua,[a[41]||(a[41]=e("div",{class:"setting-info"},[e("div",{class:"title"},"Yggdrasil API"),e("div",{class:"desc"}," 选择认证服务器。留空则表示使用官方正版登录 (或离线模式)。 ")],-1)),e("div",Ma,[t(ee,{modelValue:E.value,"onUpdate:modelValue":a[16]||(a[16]=U=>E.value=U),options:r},null,8,["modelValue"]),E.value==="custom"?(p(),B("div",Ia,[t(K,{modelValue:$.value,"onUpdate:modelValue":a[17]||(a[17]=U=>$.value=U),placeholder:"输入 Authlib-Injector API 地址"},null,8,["modelValue"])])):z("",!0)])])):z("",!0),a[52]||(a[52]=e("div",{class:"setting-group-title"},"高级设置",-1)),e("div",Ba,[a[42]||(a[42]=e("div",{class:"setting-info"},[e("div",{class:"title"},"自动重启"),e("div",{class:"desc"},"当服务器崩溃或意外停止时尝试自动重启"),e("div",{class:"desc"},"熔断机制: 若5分钟内尝试重启次数达到 5 次，则停止尝试重启")],-1)),e("div",La,[t(xe,{modelValue:o.value.autoRestart,"onUpdate:modelValue":a[18]||(a[18]=U=>o.value.autoRestart=U),label:["已开启","已关闭"]},null,8,["modelValue"])])]),o.value.autoRestart?(p(),B("div",Pa,[a[43]||(a[43]=e("div",{class:"setting-info"},[e("div",{class:"title"},"强制自动重启"),e("div",{class:"desc"},"开启此功能后，就算服务器是正常退出的也会强制重启(正常退出 => 退出代码 0)"),e("div",{class:"desc"},"不影响手动在面板关闭服务器")],-1)),e("div",Ea,[t(xe,{modelValue:o.value.forceAutoRestart,"onUpdate:modelValue":a[19]||(a[19]=U=>o.value.forceAutoRestart=U),label:["已开启","已关闭"]},null,8,["modelValue"])])])):z("",!0),e("div",Aa,[a[44]||(a[44]=e("div",{class:"setting-info"},[e("div",{class:"title"},"随守护进程启动"),e("div",{class:"desc"},"当物理机开机/面板启动时，自动启动此实例")],-1)),e("div",Oa,[t(xe,{modelValue:o.value.runOnStartup,"onUpdate:modelValue":a[20]||(a[20]=U=>o.value.runOnStartup=U),label:["已开启","已关闭"]},null,8,["modelValue"])])]),e("div",Ta,[a[45]||(a[45]=e("div",{class:"setting-info"},[e("div",{class:"title"},"控制台编码"),e("div",{class:"desc"},"设置输入输出流的字符集，乱码时请尝试切换")],-1)),e("div",Da,[t(ee,{modelValue:o.value.inputEncoding,"onUpdate:modelValue":a[21]||(a[21]=U=>o.value.inputEncoding=U),options:u,label:"输入",style:{width:"140px"}},null,8,["modelValue"]),t(ee,{modelValue:o.value.outputEncoding,"onUpdate:modelValue":a[22]||(a[22]=U=>o.value.outputEncoding=U),options:u,label:"输出",style:{width:"140px"}},null,8,["modelValue"])])]),e("div",Na,[a[46]||(a[46]=e("div",{class:"setting-info"},[e("div",{class:"title"},"文件编码"),e("div",{class:"desc"},"设置文件编辑和保存时的编码格式，乱码时请尝试切换。(一般Windows是GBK，其他是UTF-8。)")],-1)),e("div",Fa,[t(ee,{modelValue:o.value.fileEncoding,"onUpdate:modelValue":a[23]||(a[23]=U=>o.value.fileEncoding=U),options:u,style:{width:"140px"}},null,8,["modelValue"])])]),e("div",za,[t(X,{theme:"primary",type:"submit",size:"large",loading:x.value},{default:n(()=>[...a[47]||(a[47]=[_("保存设置",-1)])]),_:1},8,["loading"]),t(X,{theme:"default",variant:"base",size:"large",onClick:fe},{default:n(()=>[...a[48]||(a[48]=[_("重置更改",-1)])]),_:1})])]),_:1},8,["data","rules"]),t(vt,{visible:V.value,"onUpdate:visible":a[24]||(a[24]=U=>V.value=U),onConfirm:Y},null,8,["visible"]),t(Qe,{visible:T.value,"onUpdate:visible":a[26]||(a[26]=U=>T.value=U),header:"正在应用更新",footer:!1,"close-on-overlay-click":!1,"close-btn":!1,width:"600px"},{default:n(()=>[e("div",Ja,[t(Re,{theme:"plump",percentage:D.value,label:`${D.value}%`},null,8,["percentage","label"]),e("div",ja,[(p(!0),B(re,null,ue(A.value,(U,et)=>(p(),B("div",{key:et,class:"log-line"},[e("span",Ga,L(U.time),1),_(" "+L(U.msg),1)]))),128))]),D.value===100?(p(),B("div",Xa,[t(X,{theme:"primary",onClick:a[25]||(a[25]=U=>T.value=!1)},{default:n(()=>[...a[53]||(a[53]=[_("关闭并刷新",-1)])]),_:1})])):z("",!0)])]),_:1},8,["visible"])])}}}),Ka=oe(Wa,[["__scopeId","data-v-e671245e"]]),qa={class:"pm-container"},Ha={class:"header-section"},Ya={class:"mode-switcher"},Za={key:0,class:"error-alert-bar"},Qa={class:"toolbar"},es={class:"left-actions"},ts={key:0,class:"bulk-actions"},as={class:"selected-count"},ss={class:"right-search"},ls={class:"table-wrapper"},ns={class:"empty-state"},os={class:"tips-footer"},is=ne({__name:"ModsPluginsManager",setup(l){const y=me(),h=parseInt(y.params.id),c=b("mods"),C=b(!1),g=b([]),x=b(""),S=b([]),u=b(""),o=le(()=>[{colKey:"row-select",type:"multiple",width:50,fixed:"left"},{title:"文件名",colKey:"name",sorter:($,r)=>$.name.localeCompare(r.name),ellipsis:!0},{title:"状态",colKey:"status",width:100},{title:"操作",colKey:"op",width:180,fixed:"right",align:"right"}]),d=le(()=>{if(!x.value)return g.value;const $=x.value.toLowerCase();return g.value.filter(r=>r.name.toLowerCase().includes($))}),J=async()=>{C.value=!0,S.value=[],u.value="";try{const $=await _t(h,c.value),r=($.jarFiles||[]).map(V=>({name:V,status:"enabled"})),m=($.disableJarFiles||[]).map(V=>({name:V,status:"disabled"}));g.value=[...r,...m]}catch($){const r=$.message||"获取列表失败";u.value=r,g.value=[]}finally{C.value=!1}},G=async($,r)=>{if(r.length===0)return;const m={enable:"启用",disable:"禁用",delete:"删除"},V=async()=>{try{C.value=!0;const i=await kt(h,c.value,$,r),{successCount:w,failCount:N}=i||{};N>0?H.warning(`操作完成：成功 ${w} 个，失败 ${N} 个`):H.success(`成功${m[$]} ${w} 个文件`),await J()}catch(i){H.error(i.message||"操作失败"),C.value=!1}};if($==="delete"){const i=Ve.confirm({header:`确认删除 ${r.length} 个文件?`,body:"此操作不可逆，文件将被永久删除。",theme:"danger",onConfirm:()=>{i.hide(),V()}})}else await V()},M=$=>{c.value=$,J()},k=$=>{const r=$.status==="enabled"?"disable":"enable";G(r,[$.name])},s=$=>{const r=S.value;G($,r)},v=b(!1),f=()=>{v.value=!0},E=()=>{v.value=!1,J()};return de(()=>{J()}),te(()=>y.params.id,$=>{$&&location.reload()}),($,r)=>{const m=R("t-radio-button"),V=R("t-radio-group"),i=R("t-alert"),w=R("t-button"),N=R("t-input"),Z=R("t-tag"),Y=R("t-switch"),O=R("t-popconfirm"),F=R("t-space"),q=R("t-table");return p(),B("div",qa,[e("div",Ha,[r[10]||(r[10]=e("div",{class:"setting-group-title"}," 资源管理 ",-1)),e("div",Ya,[t(V,{modelValue:c.value,"onUpdate:modelValue":r[0]||(r[0]=T=>c.value=T),variant:"default-filled",onChange:M},{default:n(()=>[t(m,{value:"mods"},{icon:n(()=>[t(I(Ue))]),default:n(()=>[r[8]||(r[8]=_(" 模组 (Mods) ",-1))]),_:1}),t(m,{value:"plugins"},{icon:n(()=>[t(I(Me))]),default:n(()=>[r[9]||(r[9]=_(" 插件 (Plugins) ",-1))]),_:1})]),_:1},8,["modelValue"])])]),u.value?(p(),B("div",Za,[t(i,{theme:"error",message:u.value,closeable:"",onClose:r[1]||(r[1]=T=>u.value="")},{operation:n(()=>[e("span",{style:{cursor:"pointer","margin-left":"8px"},onClick:J},"重试")]),_:1},8,["message"])])):z("",!0),e("div",Qa,[e("div",es,[t(w,{theme:"primary",disabled:u.value!=="",onClick:f},{icon:n(()=>[t(I(St))]),default:n(()=>[r[11]||(r[11]=_(" 上传文件 ",-1))]),_:1},8,["disabled"]),t(w,{variant:"outline",loading:C.value,onClick:J},{icon:n(()=>[t(I(he))]),_:1},8,["loading"]),t(Oe,{name:"fade"},{default:n(()=>[S.value.length>0?(p(),B("div",ts,[r[15]||(r[15]=e("div",{class:"divider"},null,-1)),e("span",as,"已选 "+L(S.value.length)+" 项",1),t(w,{size:"small",variant:"text",theme:"success",onClick:r[2]||(r[2]=T=>s("enable"))},{default:n(()=>[...r[12]||(r[12]=[_("启用",-1)])]),_:1}),t(w,{size:"small",variant:"text",theme:"warning",onClick:r[3]||(r[3]=T=>s("disable"))},{default:n(()=>[...r[13]||(r[13]=[_("禁用",-1)])]),_:1}),t(w,{size:"small",variant:"text",theme:"danger",onClick:r[4]||(r[4]=T=>s("delete"))},{default:n(()=>[...r[14]||(r[14]=[_("删除",-1)])]),_:1})])):z("",!0)]),_:1})]),e("div",ss,[t(N,{modelValue:x.value,"onUpdate:modelValue":r[5]||(r[5]=T=>x.value=T),placeholder:"搜索文件名...",clearable:""},{"prefix-icon":n(()=>[t(I(Vt))]),_:1},8,["modelValue"])])]),e("div",ls,[t(q,{"selected-row-keys":S.value,"onUpdate:selectedRowKeys":r[6]||(r[6]=T=>S.value=T),data:d.value,columns:o.value,"row-key":"name",loading:C.value,pagination:{defaultPageSize:20,total:d.value.length,showJumper:!0},hover:"",stripe:"",class:"custom-table"},{status:n(({row:T})=>[T.status==="enabled"?(p(),W(Z,{key:0,theme:"success",variant:"light"},{icon:n(()=>[t(I(Fe))]),default:n(()=>[r[16]||(r[16]=_(" 已启用 ",-1))]),_:1})):(p(),W(Z,{key:1,theme:"default",variant:"light",style:{color:"var(--td-text-color-placeholder)"}},{icon:n(()=>[t(I(Rt))]),default:n(()=>[r[17]||(r[17]=_(" 已禁用 ",-1))]),_:1}))]),op:n(({row:T})=>[t(F,{size:"small"},{default:n(()=>[t(Y,{"model-value":T.status==="enabled",loading:C.value,size:"medium",onChange:D=>k(T)},{label:n(D=>[_(L(D.value?"开":"关"),1)]),_:1},8,["model-value","loading","onChange"]),t(O,{content:"确定要删除此文件吗？",theme:"danger",onConfirm:D=>G("delete",[T.name])},{default:n(()=>[t(w,{variant:"text",theme:"danger",shape:"square"},{default:n(()=>[t(I(Ne))]),_:1})]),_:1},8,["onConfirm"])]),_:2},1024)]),empty:n(()=>[e("div",ns,[c.value==="mods"?(p(),W(I(Ue),{key:0,size:"48px",style:{color:"var(--td-gray-color-4)"}})):(p(),W(I(Me),{key:1,size:"48px",style:{color:"var(--td-gray-color-4)"}})),e("p",null,L(`暂无${c.value==="mods"?"模组":"插件"}文件`),1)])]),_:1},8,["selected-row-keys","data","columns","loading","pagination"])]),e("div",os,[e("p",null,"提示："+L(c.value==="mods"?"模组":"插件")+"文件存放于服务器根目录的 /"+L(c.value)+" 文件夹下。",1),r[18]||(r[18]=e("p",null,"禁用文件后，会在文件名后添加 .disabled 后缀，服务器将忽略该文件。",-1))]),t(Gt,{visible:v.value,"onUpdate:visible":r[7]||(r[7]=T=>v.value=T),"instance-id":I(h),"current-path":c.value,"allow-folder":!1,onSuccess:E},null,8,["visible","instance-id","current-path"])])}}}),rs=oe(is,[["__scopeId","data-v-336551da"]]),Pe=[{key:"motd",label:"服务器标语",desc:"显示在多人游戏列表中的服务器介绍信息，支持颜色代码，不支持中文。",type:"string"},{key:"server-port",label:"服务器端口",desc:"默认为 25565。如果要在一台机器运行多个服务器，必须修改此端口。",type:"number"},{key:"max-players",label:"最大玩家数",desc:"服务器同时允许在线的最大玩家数量。",type:"number"},{key:"online-mode",label:"正版验证",desc:"开启后将验证玩家的正版账号。如果使用离线/皮肤站，请关闭此项。",type:"boolean"},{key:"white-list",label:"启用白名单",desc:"开启后只有在白名单内的玩家才能进入服务器。",type:"boolean"},{key:"enforce-whitelist",label:"强制白名单",desc:"开启后，当玩家不在白名单时，即使已在线也会被踢出（通常用于维护时重新加载白名单）。",type:"boolean"},{key:"level-name",label:"存档文件夹名称",desc:"服务器读取的世界存档文件夹名称（默认为 world）。",type:"string"},{key:"gamemode",label:"默认游戏模式",desc:"新玩家进入服务器时的默认模式。",type:"select",options:[{label:"生存 (Survival)",value:"survival"},{label:"创造 (Creative)",value:"creative"},{label:"冒险 (Adventure)",value:"adventure"},{label:"旁观 (Spectator)",value:"spectator"}]},{key:"force-gamemode",label:"强制游戏模式",desc:"开启后，玩家每次加入服务器都会被重置为默认游戏模式。",type:"boolean"},{key:"difficulty",label:"难度",desc:"世界的游戏难度设置。",type:"select",options:[{label:"和平 (Peaceful)",value:"peaceful"},{label:"简单 (Easy)",value:"easy"},{label:"普通 (Normal)",value:"normal"},{label:"困难 (Hard)",value:"hard"}]},{key:"hardcore",label:"极限模式",desc:"开启后，玩家死亡将被封禁。",type:"boolean"},{key:"allow-flight",label:"允许飞行",desc:"允许生存模式下的玩家飞行（防止被服务端反作弊踢出）。",type:"boolean"},{key:"spawn-protection",label:"出生点保护半径",desc:"出生点周围多少格内禁止非 OP 破坏。设为 0 可禁用。",type:"number"},{key:"player-idle-timeout",label:"挂机踢出时间",desc:"玩家闲置多少分钟后被自动踢出。0 为不限制。",type:"number"},{key:"level-seed",label:"世界种子",desc:"生成世界使用的种子，留空则随机生成。",type:"string"},{key:"level-type",label:"世界类型",desc:"例如 minecraft:normal, minecraft:flat, minecraft:amplified。",type:"string"},{key:"generate-structures",label:"生成结构",desc:"是否生成村庄、地牢等结构。",type:"boolean"},{key:"generator-settings",label:"生成器设置",desc:"用于自定义超平坦或特定生成器的 JSON 参数。",type:"string"},{key:"max-world-size",label:"世界边界半径",desc:"设置世界边界（World Border）的最大半径。",type:"number"},{key:"simulation-distance",label:"模拟距离",desc:"服务器实际运算实体/作物生长的区块半径（3-32）。",type:"number"},{key:"view-distance",label:"视距",desc:"客户端可以看见的区块半径。数值过大显著增加内存和带宽消耗。",type:"number"},{key:"entity-broadcast-range-percentage",label:"实体广播范围百分比",desc:"控制客户端能看到实体的距离系数（100表示默认）。",type:"number"},{key:"max-tick-time",label:"最大刻耗时 (Watchdog)",desc:"一刻的最长处理毫秒数。超过此数值服务器将强制关闭以防卡死。设为 -1 可禁用。",type:"number"},{key:"network-compression-threshold",label:"网络压缩阈值",desc:"数据包超过此字节数时进行压缩。设为 -1 禁用压缩。推荐保持默认 256。",type:"number"},{key:"rate-limit",label:"数据包限制",desc:"如果玩家发送数据包过快，将被踢出。0 为禁用。",type:"number"},{key:"use-native-transport",label:"使用原生传输优化",desc:"Linux 环境下是否启用 Epoll 优化网络性能。",type:"boolean"},{key:"prevent-proxy-connections",label:"防止代理连接",desc:"是否尝试阻止通过 VPN 或代理的连接（ISP/AS 号判断）。",type:"boolean"},{key:"sync-chunk-writes",label:"同步区块写入",desc:"开启后区块写入完成后才继续逻辑，数据更安全但可能掉帧；关闭可能提升性能。",type:"boolean"},{key:"region-file-compression",label:"区块文件压缩格式",desc:"用于保存区块的压缩算法。",type:"select",options:[{label:"Deflate (默认)",value:"deflate"},{label:"LZ4 (更快)",value:"lz4"},{label:"不压缩 (None)",value:"none"}]},{key:"max-chained-neighbor-updates",label:"最大连锁更新数",desc:"限制红石/方块连锁更新的数量以防止崩服。",type:"number"},{key:"log-ips",label:"控制台记录 IP",desc:"是否在控制台日志中显示玩家连接的 IP 地址。",type:"boolean"},{key:"hide-online-players",label:"隐藏在线玩家列表",desc:"开启后，服务器列表中将不显示具体的玩家名单。",type:"boolean"},{key:"enable-status",label:"启用状态查询",desc:"是否允许外部（如服务器列表网站）查询服务器状态。",type:"boolean"},{key:"accepts-transfers",label:"接受服务器传送",desc:"是否允许玩家从其他服务器无缝传送到此服务器。",type:"boolean"},{key:"pause-when-empty-seconds",label:"空载暂停时间",desc:"服务器内无玩家多少秒后暂停游戏循环（省资源）。-1 为不暂停。",type:"number"},{key:"op-permission-level",label:"OP 权限等级",desc:"设置 OP 的默认权限级别。",type:"select",options:[{label:"1 - 无视出生点保护",value:1},{label:"2 - 使用单机指令 (gamemode等)",value:2},{label:"3 - 多人管理 (kick/ban/op)",value:3},{label:"4 - 系统管理 (stop/save)",value:4}]},{key:"function-permission-level",label:"函数权限等级",desc:"数据包(Datapack)中函数的默认执行权限等级。",type:"number"},{key:"enforce-secure-profile",label:"强制安全配置 (签名)",desc:"强制玩家拥有官方签名的公钥（聊天报告相关）。离线服建议关闭。",type:"boolean"},{key:"enable-code-of-conduct",label:"启用行为准则提示",desc:"是否向玩家展示行为准则链接（遥测相关）。",type:"boolean"},{key:"bug-report-link",label:"Bug 反馈链接",desc:"自定义玩家遇到错误时显示的反馈网址。",type:"string"},{key:"resource-pack",label:"资源包下载地址",desc:"玩家进入服务器时提示下载的资源包直链 URL。",type:"string"},{key:"require-resource-pack",label:"强制资源包",desc:"开启后，拒绝下载资源包的玩家将被踢出。",type:"boolean"},{key:"resource-pack-sha1",label:"资源包 SHA1",desc:"资源包文件的 SHA-1 校验码，用于验证完整性和缓存。",type:"string"},{key:"resource-pack-prompt",label:"资源包提示语",desc:"下载资源包时向玩家显示的自定义消息（Json 格式）。",type:"string"},{key:"initial-enabled-packs",label:"初始启用数据包",desc:"世界生成时默认启用的数据包列表（逗号分隔）。",type:"string"},{key:"initial-disabled-packs",label:"初始禁用数据包",desc:"世界生成时默认禁用的数据包列表。",type:"string"},{key:"enable-rcon",label:"启用 RCON",desc:"开启远程控制台协议，允许外部工具发送指令。",type:"boolean"},{key:"rcon.port",label:"RCON 端口",desc:"RCON 监听端口（默认为 25575）。",type:"number"},{key:"rcon.password",label:"RCON 密码",desc:"连接 RCON 必须的密码。请设置复杂的密码。",type:"string"},{key:"broadcast-rcon-to-ops",label:"向 OP 广播 RCON",desc:"当 RCON 执行指令时，是否通知在线的 OP。",type:"boolean"},{key:"enable-query",label:"启用 Query",desc:"开启 GameSpy4 协议，用于获取服务器详细信息。",type:"boolean"},{key:"query.port",label:"Query 端口",desc:"Query 协议监听端口（默认为 25565）。",type:"number"},{key:"broadcast-console-to-ops",label:"向 OP 广播控制台",desc:"控制台执行的指令输出是否发给在线 OP。",type:"boolean"},{key:"enable-jmx-monitoring",label:"启用 JMX 监控",desc:"开启 Java JMX 性能监控（通常用于开发调试）。",type:"boolean"},{key:"management-server-enabled",label:"启用管理后台",desc:"是否启用 Minecraft 官方定义的管理服务器接口。",type:"boolean"},{key:"management-server-port",label:"管理后台端口",desc:"管理接口监听的端口。",type:"number"},{key:"management-server-host",label:"管理后台主机",desc:"管理接口绑定的主机名/IP。",type:"string"},{key:"management-server-allowed-origins",label:"管理后台允许源",desc:"允许访问管理接口的 Origin 列表。",type:"string"},{key:"server-ip",label:"服务器绑定 IP",desc:"指定服务器绑定的本地网卡 IP。留空表示监听所有网卡（0.0.0.0）。",type:"string"},{key:"debug",label:"调试模式",desc:"开启后控制台将输出更多调试信息。",type:"boolean"},{key:"text-filtering-config",label:"文本过滤配置",desc:"用于文本过滤服务的 API 配置。",type:"string"},{key:"status-heartbeat-interval",label:"状态心跳间隔",desc:"服务器向客户端发送状态心跳的间隔（0 为默认）。",type:"number"}],us={class:"settings-container"},ds={class:"page-header"},cs={class:"config-list"},vs={key:0,class:"empty-tip"},ms={class:"setting-info"},ps={class:"title"},fs={class:"key-name-row"},gs={key:0,class:"key-name"},ys={key:0,class:"desc"},bs={class:"setting-control"},_s={class:"form-actions"},ks=ne({__name:"ServerProperties",setup(l){const y=me(),h=b(0),c=b(!1),C=b(!1),g=b({}),x=b(""),S=s=>{const v={};return s.split(`
`).forEach(E=>{const $=E.trim();if(!$||$.startsWith("#"))return;const r=$.indexOf("=");if(r!==-1){const m=$.substring(0,r).trim(),V=$.substring(r+1).trim();v[m]=V}}),v},u=s=>{let v=`#Minecraft server properties
#${new Date().toString()}
`;const f=Pe.map($=>$.key),E=Object.keys(s);return f.forEach($=>{Object.prototype.hasOwnProperty.call(s,$)&&(v+=`${$}=${s[$]}
`)}),E.forEach($=>{f.includes($)||(v+=`${$}=${s[$]}
`)}),v},o=async()=>{if(h.value){c.value=!0;try{const s=await ht(h.value,"server.properties");s&&(x.value=s,g.value=S(s))}catch(s){H.error(`读取配置文件失败: ${s.message}`)}finally{c.value=!1}}},d=async()=>{C.value=!0;try{const s=u(g.value);await wt(h.value,"server.properties",s),H.success("配置文件已保存"),o()}catch(s){H.error(`保存失败: ${s.message}`)}finally{C.value=!1}},J=le(()=>{const s=[],v=g.value,f=new Set(Object.keys(v));return Pe.forEach(E=>{f.has(E.key)&&(s.push(E),f.delete(E.key))}),f.forEach(E=>{s.push({key:E,label:E,desc:"未收录的配置项",type:G(v[E]),isUnknown:!0})}),s}),G=s=>s==="true"||s==="false"?"boolean":!isNaN(Number(s))&&s!==""?"number":"string",M=(s,v)=>{const f=g.value[s];return f===void 0?v==="boolean"?!1:"":v==="boolean"?f==="true":v==="number"?Number(f):f},k=(s,v,f)=>{g.value[s]=String(v)};return te(()=>y.params.id,s=>{s&&(h.value=parseInt(s),o())},{immediate:!0}),(s,v)=>{const f=R("t-button"),E=R("t-space"),$=R("t-switch"),r=R("t-select"),m=R("t-input-number"),V=R("t-input"),i=R("t-loading");return p(),B("div",us,[e("div",ds,[v[1]||(v[1]=e("div",{class:"section-title"},"Server.properties 配置编辑器",-1)),t(E,null,{default:n(()=>[t(f,{variant:"text",shape:"square",loading:c.value,onClick:o},{icon:n(()=>[t(I(he))]),_:1},8,["loading"]),t(f,{theme:"primary",loading:C.value,onClick:d},{icon:n(()=>[t(I(ze))]),default:n(()=>[v[0]||(v[0]=_(" 保存配置 ",-1))]),_:1},8,["loading"])]),_:1})]),t(i,{loading:c.value,text:"正在读取配置文件..."},{default:n(()=>[e("div",cs,[!c.value&&J.value.length===0?(p(),B("div",vs," 无法找到配置项或文件为空 ")):z("",!0),(p(!0),B(re,null,ue(J.value,w=>(p(),B("div",{key:w.key,class:pe(["setting-item",{"unknown-item":w.isUnknown}])},[e("div",ms,[e("div",ps,L(w.label),1),e("div",fs,[w.isUnknown?z("",!0):(p(),B("span",gs,L(w.key),1))]),w.isUnknown?z("",!0):(p(),B("div",ys,L(w.desc||"暂无描述"),1))]),e("div",bs,[w.type==="boolean"?(p(),W($,{key:0,"model-value":M(w.key,"boolean"),"onUpdate:modelValue":N=>k(w.key,N,"boolean")},null,8,["model-value","onUpdate:modelValue"])):w.type==="select"?(p(),W(r,{key:1,"model-value":M(w.key,"string"),options:w.options,placeholder:"请选择","onUpdate:modelValue":N=>k(w.key,N,"string")},null,8,["model-value","options","onUpdate:modelValue"])):w.type==="number"?(p(),W(m,{key:2,"model-value":M(w.key,"number"),theme:"column",style:{width:"100%"},"onUpdate:modelValue":N=>k(w.key,N,"number")},null,8,["model-value","onUpdate:modelValue"])):(p(),W(V,{key:3,"model-value":M(w.key,"string"),placeholder:"未设置","onUpdate:modelValue":N=>k(w.key,N,"string")},null,8,["model-value","onUpdate:modelValue"]))])],2))),128))])]),_:1},8,["loading"]),e("div",_s,[t(f,{theme:"primary",size:"large",loading:C.value,onClick:d},{default:n(()=>[...v[2]||(v[2]=[_("保存设置",-1)])]),_:1},8,["loading"]),t(f,{theme:"default",variant:"base",size:"large",onClick:o},{default:n(()=>[...v[3]||(v[3]=[_("重置更改",-1)])]),_:1})])])}}}),hs=oe(ks,[["__scopeId","data-v-fe4f8014"]]);async function ws(l){return await ke.get({url:`/api/instance/tasks/list/${l}`})}async function $s(l,y,h,c,C,g){return await ke.post({url:"/api/instance/tasks/create",data:{instanceId:l,name:y,cron:h,payload:c,type:C,enable:g}})}async function xs(l,y,h,c,C,g,x){return await ke.post({url:"/api/instance/tasks/update",data:{instanceId:l,id:y,name:h,cron:c,payload:C,type:g,enable:x}})}async function Cs(l){return await ke.post({url:`/api/instance/tasks/delete${l}`})}const Ss={class:"cron-gen-container"},Vs={class:"mode-switch"},Rs={key:0,class:"mode-content novice-panel"},Us={class:"novice-input-group"},Ms={key:1,class:"mode-content pro-panel"},Is={class:"tab-scroll-area"},Bs={key:0,class:"specific-box"},Ls={class:"result-area"},Ps={class:"cron-display"},Es={class:"code-box"},As={class:"next-runs"},Os={class:"runs-title"},Ts={key:0,class:"error-msg"},Ds={key:1,class:"runs-list"},Ns={class:"index"},Fs=ne({__name:"CronGenerator",props:{visible:{type:Boolean,default:!1},initialValue:{type:String,default:""}},emits:["update:visible","confirm"],setup(l,{emit:y}){const h=l,c=y,C=b("novice"),g=b(10),x=b("minute"),S=[{label:"秒",value:"second"},{label:"分钟",value:"minute"},{label:"小时",value:"hour"},{label:"天",value:"day"}],u=b("second"),o=[{label:"秒",value:"second",min:0,max:59},{label:"分",value:"minute",min:0,max:59},{label:"时",value:"hour",min:0,max:23},{label:"日",value:"day",min:1,max:31},{label:"月",value:"month",min:1,max:12},{label:"周",value:"week",min:1,max:7}],d=b({second:{type:"every",start:0,step:1,specifics:[]},minute:{type:"every",start:0,step:1,specifics:[]},hour:{type:"every",start:0,step:1,specifics:[]},day:{type:"every",start:1,step:1,specifics:[]},month:{type:"every",start:1,step:1,specifics:[]},week:{type:"any",start:1,step:1,specifics:[]}}),J=[{label:"周日",value:1},{label:"周一",value:2},{label:"周二",value:3},{label:"周三",value:4},{label:"周四",value:5},{label:"周五",value:6},{label:"周六",value:7}],G=le(()=>{const r=(Y,O="*")=>{const F=d.value[Y];return Y==="week"&&F.type==="any"||Y==="week"&&d.value.day.type!=="every"||Y==="day"&&d.value.week.type!=="any"?"?":F.type==="every"?"*":F.type==="interval"?`${F.start}/${F.step}`:F.type==="specific"?F.specifics.length===0?Y==="day"||Y==="month"?"1":"0":F.specifics.sort((q,T)=>q-T).join(","):O},m=r("second"),V=r("minute"),i=r("hour"),w=r("day"),N=r("month"),Z=r("week","?");return`${m} ${V} ${i} ${w} ${N} ${Z}`}),M=le(()=>{const r=g.value;switch(x.value){case"second":return`*/${r} * * * * *`;case"minute":return`0 */${r} * * * *`;case"hour":return`0 0 */${r} * * ?`;case"day":return`0 0 0 */${r} * ?`;default:return"* * * * * *"}}),k=le(()=>C.value==="novice"?M.value:G.value),s=b([]),v=b(""),f=()=>{try{const r=Xt.CronExpressionParser.parse(k.value,{currentDate:new Date});s.value=r.take(5).map(m=>new Date(m.toString()).toLocaleString()),v.value=""}catch{v.value="无法解析当前 Cron 表达式，请检查规则是否冲突",s.value=[]}};te(k,()=>{f()},{immediate:!0}),te(()=>h.visible,r=>{r&&h.initialValue&&(C.value="pro",f())});const E=()=>{if(v.value){H.warning("当前表达式无效，无法保存");return}c("confirm",k.value),c("update:visible",!1)},$=r=>{const m=o.find(i=>i.value===r);if(!m)return[];const V=[];for(let i=m.min;i<=m.max;i++)V.push({label:i.toString(),value:i});return V};return(r,m)=>{const V=R("t-radio-button"),i=R("t-radio-group"),w=R("t-input-number"),N=R("t-select"),Z=R("t-alert"),Y=R("t-radio"),O=R("t-checkbox-group"),F=R("t-tab-panel"),q=R("t-tabs"),T=R("t-tag"),D=R("t-dialog");return p(),W(D,{visible:l.visible,header:"Cron 表达式生成器",width:"700px",top:"5vh",onClose:m[4]||(m[4]=A=>c("update:visible",!1)),onConfirm:E},{default:n(()=>[e("div",Ss,[e("div",Vs,[t(i,{modelValue:C.value,"onUpdate:modelValue":m[0]||(m[0]=A=>C.value=A),variant:"default-filled"},{default:n(()=>[t(V,{value:"novice"},{default:n(()=>[...m[5]||(m[5]=[_("🚀 新手模式",-1)])]),_:1}),t(V,{value:"pro"},{default:n(()=>[...m[6]||(m[6]=[_("🛠️ 专业模式",-1)])]),_:1})]),_:1},8,["modelValue"])]),C.value==="novice"?(p(),B("div",Rs,[e("div",Us,[m[7]||(m[7]=e("span",null,"每隔",-1)),t(w,{modelValue:g.value,"onUpdate:modelValue":m[1]||(m[1]=A=>g.value=A),min:1,theme:"column",style:{width:"100px"}},null,8,["modelValue"]),t(N,{modelValue:x.value,"onUpdate:modelValue":m[2]||(m[2]=A=>x.value=A),options:S,style:{width:"100px"}},null,8,["modelValue"]),m[8]||(m[8]=e("span",null,"执行一次",-1))]),t(Z,{theme:"info",style:{"margin-top":"16px"}},{message:n(()=>[...m[9]||(m[9]=[_(" 此模式适用于简单的周期性任务。如果需要“每周五上午10点”等复杂规则，请切换到",-1),e("b",null,"专业模式",-1),_("。 ",-1)])]),_:1})])):(p(),B("div",Ms,[t(q,{modelValue:u.value,"onUpdate:modelValue":m[3]||(m[3]=A=>u.value=A)},{default:n(()=>[(p(),B(re,null,ue(o,A=>t(F,{key:A.value,value:A.value,label:A.label},{default:n(()=>[e("div",Is,[t(i,{modelValue:d.value[A.value].type,"onUpdate:modelValue":Q=>d.value[A.value].type=Q,direction:"vertical"},{default:n(()=>[t(Y,{value:"every"},{default:n(()=>[_(L(A.value==="week"?"不指定 (?)":`每${A.label} (*)`),1)]),_:2},1024),A.value!=="week"?(p(),W(Y,{key:0,value:"interval"},{default:n(()=>[m[10]||(m[10]=_(" 周期: 从 ",-1)),t(w,{modelValue:d.value[A.value].start,"onUpdate:modelValue":Q=>d.value[A.value].start=Q,min:A.min,max:A.max,size:"small",theme:"column",style:{width:"60px"}},null,8,["modelValue","onUpdate:modelValue","min","max"]),_(" "+L(A.label)+"开始，每 ",1),t(w,{modelValue:d.value[A.value].step,"onUpdate:modelValue":Q=>d.value[A.value].step=Q,min:1,max:A.max,size:"small",theme:"column",style:{width:"60px"}},null,8,["modelValue","onUpdate:modelValue","max"]),_(" "+L(A.label)+"执行一次 ",1)]),_:2},1024)):z("",!0),A.value!=="week"?(p(),W(Y,{key:1,value:"specific"},{default:n(()=>[_("指定: 选择具体的"+L(A.label),1)]),_:2},1024)):z("",!0),A.value==="week"?(p(),W(Y,{key:2,value:"specific"},{default:n(()=>[...m[11]||(m[11]=[_("指定周几",-1)])]),_:1})):z("",!0)]),_:2},1032,["modelValue","onUpdate:modelValue"]),d.value[A.value].type==="specific"?(p(),B("div",Bs,[t(O,{modelValue:d.value[A.value].specifics,"onUpdate:modelValue":Q=>d.value[A.value].specifics=Q,options:A.value==="week"?J:$(A.value),class:"grid-checkbox"},null,8,["modelValue","onUpdate:modelValue","options"])])):z("",!0)])]),_:2},1032,["value","label"])),64))]),_:1},8,["modelValue"])])),e("div",Ls,[e("div",Ps,[m[14]||(m[14]=e("span",{class:"label"},"当前表达式:",-1)),e("div",Es,[_(L(k.value)+" ",1),v.value?(p(),W(T,{key:1,theme:"danger",variant:"light",size:"small"},{default:n(()=>[t(I(Ut)),m[13]||(m[13]=_(" 无效",-1))]),_:1})):(p(),W(T,{key:0,theme:"success",variant:"light",size:"small"},{default:n(()=>[t(I(Fe)),m[12]||(m[12]=_(" 有效",-1))]),_:1}))])]),e("div",As,[e("div",Os,[t(I(we)),m[15]||(m[15]=_(" 最近 5 次运行时间预测:",-1))]),v.value?(p(),B("div",Ts,L(v.value),1)):(p(),B("ul",Ds,[(p(!0),B(re,null,ue(s.value,(A,Q)=>(p(),B("li",{key:Q},[e("span",Ns,"#"+L(Q+1),1),_(" "+L(A),1)]))),128))]))])])])]),_:1},8,["visible"])}}}),zs=oe(Fs,[["__scopeId","data-v-135dd699"]]),Js={class:"page-container"},js={class:"page-header"},Gs={key:0,class:"create-container"},Xs={class:"container-header"},Ws={class:"title"},Ks={class:"setting-item"},qs={class:"setting-control"},Hs={class:"setting-item"},Ys={class:"setting-control"},Zs={class:"setting-item"},Qs={class:"setting-control"},el={key:0,class:"setting-item"},tl={class:"setting-info"},al={class:"title"},sl={class:"desc"},ll={class:"setting-control"},nl={class:"setting-item"},ol={class:"setting-control"},il={class:"form-actions"},rl={class:"task-list"},ul={key:0,class:"empty-state"},dl={class:"card-left"},cl={class:"task-header-row"},vl={class:"task-name"},ml={class:"task-meta-row"},pl={class:"cron-display"},fl=["title"],gl={class:"card-right"},yl=ne({__name:"CronTasks",setup(l){const y=me(),h=le(()=>parseInt(y.params.id)),c=b([]),C=b(!1),g=b(!1),x=b(null),S=b(!1),u=b(null),o=b(!1),d=b({id:"",name:"",cron:"",type:"command",payload:"",enable:!0}),J=[{label:"发送命令 (Command)",value:"command"},{label:"备份存档 (Backup)",value:"backup"},{label:"开启服务器 (Start)",value:"start"},{label:"停止服务器 (Stop)",value:"stop"},{label:"重启服务器 (Restart)",value:"restart"}],G={name:[{required:!0,message:"必填",trigger:"blur"}],cron:[{required:!0,message:"必填",trigger:"blur"}],type:[{required:!0,message:"必选",trigger:"change"}],payload:[{validator:V=>d.value.type==="command"&&!V?{result:!1,message:"命令内容不能为空",type:"error"}:!0,trigger:"blur"}]},M=async()=>{if(h.value){C.value=!0;try{const V=await ws(h.value);c.value=V||[]}catch(V){H.error(V.message||"获取列表失败")}finally{C.value=!1}}},k=()=>{g.value||(d.value={id:"",name:"",cron:"",type:"command",payload:"",enable:!0},x.value=null,g.value=!0)},s=V=>{d.value={id:V.id,name:V.name,cron:V.cron,type:V.type.toLowerCase(),payload:V.payload,enable:V.enable},x.value=V.id,g.value=!0,window.scrollTo({top:0,behavior:"smooth"})},v=()=>{g.value=!1,x.value=null},f=async()=>{var i;if(await((i=u.value)==null?void 0:i.validate())===!0){S.value=!0;try{x.value?(await xs(h.value,d.value.id,d.value.name,d.value.cron,d.value.payload,d.value.type,d.value.enable),H.success("更新成功")):(await $s(h.value,d.value.name,d.value.cron,d.value.payload,d.value.type,d.value.enable),H.success("创建成功")),v(),M()}catch(w){H.error(w.message||"操作失败")}finally{S.value=!1}}},E=V=>{const i=Ve.confirm({header:"确认删除?",body:`确定删除任务 "${V.name}" 吗？`,theme:"danger",onConfirm:async()=>{try{await Cs(V.id),H.success("已删除"),M(),i.hide()}catch(w){H.error(w.message)}},onClose:()=>i.hide()})},$=V=>{d.value.cron=V},r=V=>{const i=V.toLowerCase();return i==="start"?Je:i==="stop"?je:i==="restart"?he:Lt},m=V=>{const i=V.toLowerCase();return i==="start"?"success":i==="stop"?"danger":i==="restart"?"warning":"primary"};return te(()=>h.value,M),de(M),(V,i)=>{const w=R("t-button"),N=R("t-input"),Z=R("t-select"),Y=R("t-textarea"),O=R("t-switch"),F=R("t-form"),q=R("t-tag"),T=R("t-loading");return p(),B("div",Js,[e("div",js,[i[8]||(i[8]=e("div",{class:"section-title"},"定时计划任务",-1)),g.value?z("",!0):(p(),W(w,{key:0,theme:"primary",onClick:k},{icon:n(()=>[t(I(Mt))]),default:n(()=>[i[7]||(i[7]=_(" 创建新任务 ",-1))]),_:1}))]),t(Oe,{name:"slide-fade"},{default:n(()=>[g.value?(p(),B("div",Gs,[e("div",Xs,[e("span",Ws,L(x.value?"编辑任务":"创建新任务"),1),t(w,{size:"small",variant:"text",onClick:v},{default:n(()=>[t(I(It))]),_:1})]),t(F,{ref_key:"formRef",ref:u,data:d.value,rules:G,"label-width":"0"},{default:n(()=>[e("div",Ks,[i[9]||(i[9]=e("div",{class:"setting-info"},[e("div",{class:"title"},"任务名称"),e("div",{class:"desc"},"给这个计划任务起个容易识别的名字，例如“每日自动重启”")],-1)),e("div",qs,[t(N,{modelValue:d.value.name,"onUpdate:modelValue":i[0]||(i[0]=D=>d.value.name=D),placeholder:"请输入任务名称"},null,8,["modelValue"])])]),e("div",Hs,[i[11]||(i[11]=e("div",{class:"setting-info"},[e("div",{class:"title"},"触发规则 (Cron)"),e("div",{class:"desc"},"使用 Cron 表达式定义执行时间。支持秒级精度 (秒 分 时 日 月 周)")],-1)),e("div",Ys,[t(N,{modelValue:d.value.cron,"onUpdate:modelValue":i[1]||(i[1]=D=>d.value.cron=D),placeholder:"例如: 0 0 12 * * ?"},null,8,["modelValue"]),t(w,{variant:"outline",theme:"default",onClick:i[2]||(i[2]=D=>o.value=!0)},{default:n(()=>[...i[10]||(i[10]=[_(" 表达式生成器 ",-1)])]),_:1})])]),e("div",Zs,[i[12]||(i[12]=e("div",{class:"setting-info"},[e("div",{class:"title"},"执行操作"),e("div",{class:"desc"},"选择触发时要执行的动作类型")],-1)),e("div",Qs,[t(Z,{modelValue:d.value.type,"onUpdate:modelValue":i[3]||(i[3]=D=>d.value.type=D),options:J},null,8,["modelValue"])])]),d.value.type==="command"||d.value.type==="restart"?(p(),B("div",el,[e("div",tl,[e("div",al,L(d.value.type==="restart"?"重启提示语":"控制台命令"),1),e("div",sl,L(d.value.type==="restart"?"重启前发送给全服玩家的倒计时提示消息":"不需要加 /，直接输入命令内容"),1)]),e("div",ll,[t(Y,{modelValue:d.value.payload,"onUpdate:modelValue":i[4]||(i[4]=D=>d.value.payload=D),autosize:{minRows:2,maxRows:5},placeholder:"请输入内容..."},null,8,["modelValue"])])])):z("",!0),e("div",nl,[i[13]||(i[13]=e("div",{class:"setting-info"},[e("div",{class:"title"},"启用状态"),e("div",{class:"desc"},"暂时禁用此任务而不删除它")],-1)),e("div",ol,[t(O,{modelValue:d.value.enable,"onUpdate:modelValue":i[5]||(i[5]=D=>d.value.enable=D)},null,8,["modelValue"])])]),e("div",il,[t(w,{theme:"primary",loading:S.value,onClick:f},{icon:n(()=>[t(I(ze))]),default:n(()=>[_(" "+L(x.value?"保存修改":"立即创建"),1)]),_:1},8,["loading"]),t(w,{theme:"default",variant:"base",onClick:v},{default:n(()=>[...i[14]||(i[14]=[_("取消",-1)])]),_:1})])]),_:1},8,["data"])])):z("",!0)]),_:1}),t(T,{loading:C.value,"show-overlay":""},{default:n(()=>[e("div",rl,[c.value.length===0&&!C.value?(p(),B("div",ul," 暂无任务，请点击上方创建 ")):z("",!0),(p(!0),B(re,null,ue(c.value,D=>(p(),B("div",{key:D.id,class:"task-card"},[e("div",dl,[e("div",cl,[t(q,{size:"small",theme:D.enable?"success":"warning",variant:"light",class:"status-tag"},{default:n(()=>[_(L(D.enable?"运行中":"已暂停"),1)]),_:2},1032,["theme"]),e("span",vl,L(D.name),1)]),e("div",ml,[t(q,{size:"small",variant:"outline",theme:m(D.type),style:{"margin-right":"8px"}},{icon:n(()=>[(p(),W(Te(r(D.type))))]),default:n(()=>[_(" "+L(D.type.toUpperCase()),1)]),_:2},1032,["theme"]),e("span",pl,[t(I(we)),_(" "+L(D.cron),1)])]),D.payload?(p(),B("div",{key:0,class:"task-payload",title:D.payload},L(D.payload),9,fl)):z("",!0)]),e("div",gl,[t(w,{variant:"text",theme:"primary",onClick:A=>s(D)},{icon:n(()=>[t(I(Bt))]),default:n(()=>[i[15]||(i[15]=_(" 编辑 ",-1))]),_:1},8,["onClick"]),t(w,{variant:"text",theme:"danger",onClick:A=>E(D)},{icon:n(()=>[t(I(Ne))]),default:n(()=>[i[16]||(i[16]=_(" 删除 ",-1))]),_:1},8,["onClick"])])]))),128))])]),_:1},8,["loading"]),t(zs,{visible:o.value,"onUpdate:visible":i[6]||(i[6]=D=>o.value=D),"initial-value":d.value.cron,onConfirm:$},null,8,["visible","initial-value"])])}}}),bl=oe(yl,[["__scopeId","data-v-6f30eb13"]]),_l={class:"layout-container"},kl={class:"sidebar"},hl=["onClick"],wl={class:"nav-text"},$l={class:"main-content"},xl={key:0,class:"panel-wrapper"},Cl={key:1,class:"panel-wrapper"},Sl={key:2,class:"panel-wrapper"},Vl={key:3,class:"panel-wrapper"},Rl=ne({__name:"InstanceSettings",setup(l,{expose:y}){const h=b(!1),c=b(0),C=[{label:"实例设置",icon:Ge},{label:"插件/模组",icon:Pt},{label:"服务器属性",icon:Et},{label:"定时任务",icon:we}];return y({open:()=>{h.value=!0}}),(x,S)=>{const u=R("t-dialog");return p(),W(u,{visible:h.value,"onUpdate:visible":S[0]||(S[0]=o=>h.value=o),header:"实例配置",width:"90%",top:"3vh",attach:"body",footer:!1,"destroy-on-close":"",class:"settings-dialog"},{default:n(()=>[e("div",_l,[e("div",kl,[(p(),B(re,null,ue(C,(o,d)=>e("div",{key:d,class:pe(["nav-item",{active:c.value===d}]),onClick:J=>c.value=d},[(p(),W(Te(o.icon),{class:"nav-icon"})),e("span",wl,L(o.label),1)],10,hl)),64))]),e("div",$l,[c.value===0?(p(),B("div",xl,[t(Ka)])):z("",!0),c.value===1?(p(),B("div",Cl,[t(rs)])):z("",!0),c.value===2?(p(),B("div",Sl,[t(hs,{"instance-id":21})])):z("",!0),c.value===3?(p(),B("div",Vl,[t(bl)])):z("",!0)])])]),_:1},8,["visible"])}}}),Ul=oe(Rl,[["__scopeId","data-v-5ef5512d"]]),Ml={class:"monitor-container"},Il={class:"status-header"},Bl={class:"status-text"},Ll={class:"monitor-content"},Pl={class:"monitor-block"},El={class:"info-item"},Al={class:"label"},Ol={class:"value"},Tl={class:"monitor-block"},Dl={class:"info-item"},Nl={class:"label"},Fl={class:"value"},zl={key:0,class:"sub-val"},ye=20,Jl=ne({__name:"InstanceMonitor",props:{serverId:{},maxMemory:{},isRunning:{type:Boolean}},setup(l){const y=l,h=Xe(),c=b(null),C=b(null);let g=null,x=null;const S=b(new Array(ye).fill(0)),u=b(new Array(ye).fill(0)),o=le(()=>y.maxMemory>0),d=(v,f,E=100)=>({grid:{top:4,right:0,bottom:4,left:0},xAxis:{type:"category",show:!1,boundaryGap:!1},yAxis:{type:"value",min:0,max:E===null?void 0:E,show:!1},series:[{type:"line",data:f,smooth:!0,showSymbol:!1,lineStyle:{width:2,color:v},areaStyle:{color:new Wt(0,0,0,1,[{offset:0,color:v.replace(")",", 0.2)").replace("rgb","rgba")},{offset:1,color:"transparent"}])}}]}),J=()=>{const v=getComputedStyle(document.documentElement),f=v.getPropertyValue("--td-brand-color").trim()||"#0052d9",E=v.getPropertyValue("--td-warning-color").trim()||"#e37318";if(c.value&&(g=Le(c.value),g.setOption(d(f,S.value,100))),C.value){x=Le(C.value);const $=o.value?100:null;x.setOption(d(E,u.value,$))}window.addEventListener("resize",G)},G=()=>{g==null||g.resize(),x==null||x.resize()},M=le(()=>{const v=h.stats.memBytes/1024/1024;return v>1024?`${(v/1024).toFixed(2)} GB`:`${v.toFixed(0)} MB`}),k=async()=>{y.isRunning&&y.serverId&&(h.setMaxMemory(y.maxMemory),await h.connect(y.serverId))},s=async()=>{await h.disconnect()};return te(()=>y.maxMemory,v=>{if(h.setMaxMemory(v),x){const f=v>0?100:null;x.setOption({yAxis:{max:f===null?void 0:f}})}},{immediate:!0}),te(()=>h.stats,v=>{if(!(!y.isRunning||h.currentServerId!==y.serverId)){if(S.value.push(v.cpu),S.value.length>ye&&S.value.shift(),o.value)u.value.push(v.memPercent);else{const f=v.memBytes/1024/1024;u.value.push(f)}u.value.length>ye&&u.value.shift(),g==null||g.setOption({series:[{data:S.value}]}),x==null||x.setOption({series:[{data:u.value}]})}},{deep:!0}),te(()=>y.isRunning,async v=>{v?be(()=>{G(),k()}):(S.value.fill(0),u.value.fill(0),g==null||g.setOption({series:[{data:S.value}]}),x==null||x.setOption({series:[{data:u.value}]}),await s())}),te(()=>y.serverId,async(v,f)=>{v!==f&&(await s(),y.isRunning&&await k())}),de(async()=>{await be(),J(),y.isRunning&&await k()}),_e(async()=>{window.removeEventListener("resize",G),await s(),g==null||g.dispose(),x==null||x.dispose()}),(v,f)=>(p(),B("div",Ml,[e("div",Il,[e("span",Bl,[I(h).isConnected?(p(),W(I(Ie),{key:0,style:{color:"var(--td-success-color)"}})):(p(),W(I(Ie),{key:1,style:{color:"var(--td-text-color-disabled)"}})),_(" "+L(I(h).isConnected?"连接正常":"正在连接数据流..."),1)]),e("div",{class:pe(["monitor-dot",{active:I(h).isConnected&&l.isRunning}])},null,2)]),e("div",Ll,[e("div",Pl,[e("div",El,[e("div",Al,[t(I(Se)),f[0]||(f[0]=_(" CPU 使用率",-1))]),e("div",Ol,L(I(h).stats.cpu.toFixed(1))+" %",1)]),e("div",{ref_key:"cpuChartRef",ref:c,class:"chart-wrapper"},null,512)]),f[2]||(f[2]=e("div",{class:"divider"},null,-1)),e("div",Tl,[e("div",Dl,[e("div",Nl,[t(I(At)),f[1]||(f[1]=_(" 内存使用",-1))]),e("div",Fl,[_(L(M.value)+" ",1),o.value?(p(),B("span",zl," ("+L(I(h).stats.memPercent.toFixed(1))+"%) ",1)):z("",!0)])]),e("div",{ref_key:"memChartRef",ref:C,class:"chart-wrapper"},null,512)])])]))}}),jl=oe(Jl,[["__scopeId","data-v-128d3837"]]),Gl={class:"sidebar-content"},Xl={class:"control-header"},Wl={class:"control-actions"},Kl={class:"action-row"},ql={class:"action-row"},Hl={class:"info-tabs-container"},Yl={class:"tab-content-wrapper"},Zl={class:"info-list"},Ql={class:"info-item"},en={class:"label"},tn={class:"value"},an={class:"info-item"},sn={class:"label"},ln={class:"value"},nn={class:"info-item"},on={class:"label"},rn={class:"value"},un={class:"info-item"},dn={class:"label"},cn={class:"value"},vn={class:"info-item"},mn={class:"label"},pn={class:"value"},fn={class:"info-item"},gn={class:"label"},yn={class:"value"},bn={class:"info-item"},_n={class:"label"},kn={class:"value"},hn={key:1,class:"info-item"},wn={class:"label"},$n={class:"info-item"},xn={class:"label"},Cn={class:"value"},Sn={class:"tab-content-wrapper"},Vn={key:1,class:"monitor-placeholder"},Rn=ne({__name:"ServerControlPanel",props:{serverId:{},isRunning:{type:Boolean},loading:{type:Boolean},serverInfo:{}},emits:["start","stop","clear-log","refresh-info","backup"],setup(l,{emit:y}){const h=l,c=y,C=b(null),g=b("info"),x=()=>{C.value&&C.value.open()},S=()=>{c("refresh-info")},u=b(0);let o=null;const d=k=>{if(!k)return 0;const s=k.match(/^(?:(\d+)\.)?(\d{1,2}):(\d{2}):(\d{2})(?:\.\d+)?$/);return s?parseInt(s[1]||"0",10)*86400+parseInt(s[2])*3600+parseInt(s[3])*60+parseInt(s[4]):0},J=le(()=>{if(u.value<=0)return"00:00:00";const k=Math.floor(u.value/86400),s=Math.floor(u.value%86400/3600),v=Math.floor(u.value%3600/60),f=Math.floor(u.value%60),E=r=>r.toString().padStart(2,"0"),$=`${E(s)}:${E(v)}:${E(f)}`;return k>0?`${k}天 ${$}`:$}),G=()=>{o&&clearInterval(o),o=window.setInterval(()=>u.value++,1e3)},M=()=>{o&&(clearInterval(o),o=null)};return te(()=>{var k;return(k=h.serverInfo)==null?void 0:k.uptime},k=>k&&(u.value=d(k)),{immediate:!0}),te(()=>h.isRunning,k=>{k?o||G():M()},{immediate:!0}),_e(()=>M()),(k,s)=>{const v=R("t-tag"),f=R("t-button"),E=R("t-card"),$=R("t-tab-panel"),r=R("t-tabs");return p(),B("div",Gl,[t(E,{class:"control-card",bordered:!1},{default:n(()=>[e("div",Xl,[e("div",{class:pe(["status-indicator",{running:l.isRunning}])},[s[6]||(s[6]=e("span",{class:"pulse"},null,-1)),_(L(l.isRunning?"Running":"Stopped"),1)],2),t(v,{theme:l.isRunning?"success":"default",variant:"light",shape:"round"},{default:n(()=>[_(L(l.isRunning?"运行中":"已停止"),1)]),_:1},8,["theme"])]),e("div",Wl,[l.isRunning?(p(),W(f,{key:1,theme:"danger",size:"large",block:"",loading:l.loading,onClick:s[1]||(s[1]=m=>k.$emit("stop"))},{icon:n(()=>[t(I(je))]),default:n(()=>[s[8]||(s[8]=_("停止实例 ",-1))]),_:1},8,["loading"])):(p(),W(f,{key:0,theme:"primary",size:"large",block:"",loading:l.loading,onClick:s[0]||(s[0]=m=>{k.$emit("clear-log"),k.$emit("start")})},{icon:n(()=>[t(I(Je))]),default:n(()=>[s[7]||(s[7]=_("启动实例 ",-1))]),_:1},8,["loading"])),e("div",Kl,[t(f,{variant:"outline",block:"",onClick:s[2]||(s[2]=m=>I(it)(`/instance/files/${l.serverId}`))},{icon:n(()=>[t(I(Be))]),default:n(()=>[s[9]||(s[9]=_("文件管理 ",-1))]),_:1}),t(f,{variant:"outline",block:"",disabled:!l.isRunning,loading:l.loading,onClick:s[3]||(s[3]=m=>k.$emit("backup"))},{icon:n(()=>[t(I(Ot))]),default:n(()=>[s[10]||(s[10]=_("备份存档 ",-1))]),_:1},8,["disabled","loading"])]),e("div",ql,[t(f,{variant:"outline",theme:"warning",block:"",onClick:s[4]||(s[4]=m=>k.$emit("clear-log"))},{icon:n(()=>[t(I(he))]),default:n(()=>[s[11]||(s[11]=_("清空 ",-1))]),_:1}),t(f,{variant:"outline",theme:"primary",block:"",onClick:x},{icon:n(()=>[t(I(Ge))]),default:n(()=>[s[12]||(s[12]=_("设置 ",-1))]),_:1})])])]),_:1}),e("div",Hl,[t(r,{modelValue:g.value,"onUpdate:modelValue":s[5]||(s[5]=m=>g.value=m),theme:"card"},{default:n(()=>[t($,{value:"info"},{label:n(()=>[t(I(Jt),{style:{"margin-right":"4px"}}),s[13]||(s[13]=_(" 详情 ",-1))]),default:n(()=>{var m,V,i,w,N,Z,Y,O,F;return[e("div",Yl,[e("div",Zl,[e("div",Ql,[e("div",en,[t(I(Tt)),s[14]||(s[14]=_(" 实例名称",-1))]),e("div",tn,L(((m=l.serverInfo)==null?void 0:m.name)||"Minecraft Server"),1)]),((V=l.serverInfo)==null?void 0:V.java)!=="none"?(p(),B(re,{key:0},[e("div",an,[e("div",sn,[t(I(Se)),s[15]||(s[15]=_(" 内存限制",-1))]),e("div",ln,L(((i=l.serverInfo)==null?void 0:i.maxM)||"?")+" MB",1)]),s[21]||(s[21]=e("div",{class:"proxy-group"},null,-1)),e("div",nn,[e("div",on,[t(I(Dt)),s[16]||(s[16]=_(" 运行端口",-1))]),e("div",rn,L(((N=(w=l.serverInfo)==null?void 0:w.mcConfig)==null?void 0:N.serverPort)||"?"),1)]),e("div",un,[e("div",dn,[t(I(Nt)),s[17]||(s[17]=_(" 游戏难度",-1))]),e("div",cn,[t(v,{theme:"primary"},{default:n(()=>{var q,T;return[_(L(((T=(q=l.serverInfo)==null?void 0:q.mcConfig)==null?void 0:T.difficulty)||"?"),1)]}),_:1})])]),e("div",vn,[e("div",mn,[t(I(Ft)),s[18]||(s[18]=_(" 游戏模式",-1))]),e("div",pn,[t(v,null,{default:n(()=>{var q,T;return[_(L(((T=(q=l.serverInfo)==null?void 0:q.mcConfig)==null?void 0:T.gamemode)||"?"),1)]}),_:1})])]),e("div",fn,[e("div",gn,[t(I(Be)),s[19]||(s[19]=_(" 游戏地图",-1))]),e("div",yn,L(((Y=(Z=l.serverInfo)==null?void 0:Z.mcConfig)==null?void 0:Y.levelName)||"?"),1)]),e("div",bn,[e("div",_n,[t(I(zt)),s[20]||(s[20]=_(" 正版验证",-1))]),e("div",kn,[t(v,{theme:((F=(O=l.serverInfo)==null?void 0:O.mcConfig)==null?void 0:F.onlineMode)==="true"?"success":"warning"},{default:n(()=>{var q,T;return[_(L(((T=(q=l.serverInfo)==null?void 0:q.mcConfig)==null?void 0:T.onlineMode)==="true"?"已开启":"已关闭"),1)]}),_:1},8,["theme"])])])],64)):(p(),B("div",hn,[e("div",wn,[t(I(Se)),s[22]||(s[22]=_(" 模式",-1))]),s[23]||(s[23]=e("div",{class:"value"},"自定义模式",-1))])),s[25]||(s[25]=e("div",{class:"proxy-group"},null,-1)),e("div",$n,[e("div",xn,[t(I(we)),s[24]||(s[24]=_(" 运行时长",-1))]),e("div",Cn,L(l.isRunning?J.value:"--:--:--"),1)])])])]}),_:1}),t($,{value:"monitor",disabled:!l.isRunning},{label:n(()=>[t(I(jt),{style:{"margin-right":"4px"}}),s[26]||(s[26]=_(" 监控 ",-1))]),default:n(()=>[e("div",Sn,[l.serverInfo&&l.isRunning?(p(),W(jl,{key:0,"server-id":l.serverId,"is-running":l.isRunning,"max-memory":l.serverInfo.java==="none"?0:l.serverInfo.maxM||4096},null,8,["server-id","is-running","max-memory"])):(p(),B("div",Vn," 实例未运行，暂无监控数据 "))])]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),t(Ul,{ref_key:"settingsRef",ref:C,"server-id":l.serverId,onSuccess:S},null,8,["server-id"])])}}}),Un=oe(Rn,[["__scopeId","data-v-28f587e4"]]),Mn={class:"console-page"},In={class:"layout-container"},Bn={class:"main-terminal-area"},Ln={class:"sidebar-area"},Pn=ne({__name:"index",setup(l){const y=me(),h=dt(),c=b(parseInt(y.params.id)||0),C=b(!1),g=b(!1),x=b(null),S=b(null);async function u(){var M;if(c.value)try{g.value=!0;const k=await ct(c.value);await h.refreshInstanceList(),C.value=k.status,x.value=k,g.value=!1}catch(k){(M=S.value)==null||M.writeln(`\x1B[1;31m[Error] 获取实例信息失败: ${k.message}\x1B[0m`),g.value=!1}}const o=async()=>{var M,k;g.value=!0;try{(M=S.value)==null||M.writeln("\x1B[1;32m[System] 正在发送启动指令...\x1B[0m"),await Ce(c.value,"start"),H.success("实例启动指令已发送"),g.value=!1}catch(s){(k=S.value)==null||k.writeln(`\x1B[1;31m[Error] 启动失败: ${s.message}\x1B[0m`),g.value=!1}},d=async()=>{var M,k;g.value=!0;try{(M=S.value)==null||M.writeln("\x1B[1;32m[System] 正在发送停止指令...\x1B[0m"),await Ce(c.value,"stop"),H.warning("实例停止指令已发送"),g.value=!1}catch(s){(k=S.value)==null||k.writeln(`\x1B[1;31m[Error] 停止失败: ${s.message}\x1B[0m`),g.value=!1}},J=async()=>{var M,k;try{(M=S.value)==null||M.writeln("\x1B[1;32m[System] 正在发送备份任务...\x1B[0m"),await Ce(c.value,"backup"),H.success("备份任务启动中···"),g.value=!1}catch(s){(k=S.value)==null||k.writeln(`\x1B[1;31m[Error] 备份任务启动失败: ${s.message}\x1B[0m`)}},G=()=>{var M;(M=S.value)==null||M.clear()};return te(()=>y.params.id,async M=>{M&&(c.value=parseInt(M),await u())}),de(()=>{c.value&&u()}),(M,k)=>(p(),B("div",Mn,[e("div",In,[e("div",Bn,[t(Qt,{ref_key:"terminalRef",ref:S,"server-id":c.value,onUpdate:k[0]||(k[0]=s=>u())},null,8,["server-id"])]),e("div",Ln,[t(Un,{"server-id":c.value,"is-running":C.value,loading:g.value,"server-info":x.value,onStart:o,onStop:d,onBackup:J,onClearLog:G},null,8,["server-id","is-running","loading","server-info"])])])]))}}),Io=oe(Pn,[["__scopeId","data-v-8f4ecd39"]]);export{Io as default};
