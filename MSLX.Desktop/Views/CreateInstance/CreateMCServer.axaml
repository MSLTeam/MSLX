<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:suki="clr-namespace:SukiUI.Controls;assembly=SukiUI"
             xmlns:sukitheme="clr-namespace:SukiUI.Theme;assembly=SukiUI"
             xmlns:micon="clr-namespace:Material.Icons.Avalonia;assembly=Material.Icons.Avalonia"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="MSLX.Desktop.Views.CreateInstance.CreateMCServer">
    <suki:GlassCard Margin="10">
        <Grid RowDefinitions="auto,*,auto">
			<TextBlock Text="åˆ›å»ºæœåŠ¡å™¨å®žä¾‹" Classes="h3"/>
            <!-- æ­¥éª¤å†…å®¹ -->
    <ScrollViewer Grid.Row="1">
      <StackPanel Spacing="10">
        
        <!-- æ­¥éª¤1: åŸºç¡€é…ç½® -->
        <suki:GlassCard x:Name="Step1Panel">
          <StackPanel Spacing="10">
            <TextBlock Text="æ­¥éª¤ 1: åŸºç¡€é…ç½®" FontSize="18" FontWeight="SemiBold"/>
            
            <!-- æœåŠ¡å™¨åç§° -->
            <StackPanel Spacing="5">
              <TextBlock Text="æœåŠ¡å™¨åç§° *" />
              <TextBox x:Name="TxtServerName" 
                       Watermark="è¾“å…¥æœåŠ¡å™¨åç§°"
                       MaxLength="50"/>
            </StackPanel>
            
            <!-- å­˜å‚¨è·¯å¾„ -->
            <StackPanel Spacing="5">
              <TextBlock Text="å­˜å‚¨è·¯å¾„" />
              <Grid ColumnDefinitions="*,Auto">
                <TextBox x:Name="TxtStoragePath" 
                         Watermark="ç•™ç©ºå°†ä½¿ç”¨é»˜è®¤è·¯å¾„"
                         Grid.Column="0"/>
                <Button x:Name="BtnBrowsePath"
                        Content="æµè§ˆ"
                        Grid.Column="1"
                        Margin="5,0,0,0"
                        Click="BtnBrowsePath_Click"/>
              </Grid>
            </StackPanel>
            
            <!-- Javaè·¯å¾„ -->
            <StackPanel Spacing="5">
              <TextBlock Text="Javaè·¯å¾„" />
              <Grid ColumnDefinitions="*,Auto">
                <TextBox x:Name="TxtJavaPath" 
                         Watermark="ç•™ç©ºå°†ä½¿ç”¨ç³»ç»ŸçŽ¯å¢ƒå˜é‡Java"
                         Grid.Column="0"/>
                <Button x:Name="BtnBrowseJava"
                        Content="æµè§ˆ"
                        Grid.Column="1"
                        Margin="5,0,0,0"
                        Click="BtnBrowseJava_Click"/>
              </Grid>
            </StackPanel>
          </StackPanel>
        </suki:GlassCard>
        
        <!-- æ­¥éª¤2: æ ¸å¿ƒæ–‡ä»¶ -->
        <suki:GlassCard x:Name="Step2Panel" IsVisible="False">
          <StackPanel Spacing="10">
            <TextBlock Text="æ­¥éª¤ 2: æ ¸å¿ƒæ–‡ä»¶é…ç½®" FontSize="18" FontWeight="SemiBold"/>
            
            <!-- æ ¸å¿ƒæ¥æºé€‰æ‹© -->
            <StackPanel Spacing="8">
              <TextBlock Text="æ ¸å¿ƒæ¥æº" FontWeight="SemiBold"/>
              <RadioButton x:Name="RbLocalUpload" 
                           Content="ä»Žæœ¬åœ°ä¸Šä¼ æ ¸å¿ƒæ–‡ä»¶"
                           IsChecked="True"
                           GroupName="CoreSource"
                           IsCheckedChanged="CoreSourceChanged"/>
              <RadioButton x:Name="RbDownloadCore" 
                           Content="ä»ŽURLä¸‹è½½æ ¸å¿ƒæ–‡ä»¶"
                           GroupName="CoreSource"
                           IsCheckedChanged="CoreSourceChanged"/>
              <RadioButton x:Name="RbCustomCore" 
                           Content="æ‰‹åŠ¨è®¾ç½®æ–‡ä»¶å"
                           GroupName="CoreSource"
                           IsCheckedChanged="CoreSourceChanged"/>
            </StackPanel>
            
            <!-- æœ¬åœ°ä¸Šä¼ é…ç½® -->
            <StackPanel x:Name="PanelLocalUpload" Spacing="8">
              <Border CornerRadius="8" 
                      Padding="15"
                      BorderBrush="{DynamicResource SukiPrimaryColor}"
                      BorderThickness="2">
                <StackPanel Spacing="10">
                  <Grid ColumnDefinitions="*,Auto">
                    <StackPanel Grid.Column="0" Spacing="5">
                      <TextBlock Text="é€‰æ‹©æ ¸å¿ƒæ–‡ä»¶" FontWeight="SemiBold"/>
                      <TextBlock x:Name="TxtSelectedFile" 
                                 Text="æœªé€‰æ‹©æ–‡ä»¶"
                                 Opacity="0.7"
                                 TextWrapping="Wrap"/>
                      <TextBlock x:Name="TxtFileSize" 
                                 Text=""
                                 FontSize="12"
                                 Opacity="0.6"/>
                    </StackPanel>
                    <Button x:Name="BtnSelectFile"
                            Content="é€‰æ‹©æ–‡ä»¶"
                            Grid.Column="1"
                            VerticalAlignment="Center"
                            Click="BtnSelectFile_Click"/>
                  </Grid>
                  
                  <!-- ä¸Šä¼ è¿›åº¦ -->
                  <StackPanel x:Name="PanelUploadProgress" 
                              Spacing="5" 
                              IsVisible="False">
                    <Grid ColumnDefinitions="*,Auto">
                      <TextBlock x:Name="TxtUploadStatus" 
                                 Text="å‡†å¤‡ä¸Šä¼ ..."
                                 Grid.Column="0"/>
                      <TextBlock x:Name="TxtUploadPercent" 
                                 Text="0%"
                                 Grid.Column="1"/>
                    </Grid>
                    <ProgressBar x:Name="ProgressUpload" 
                                 Height="6"
                                 Minimum="0"
                                 Maximum="100"
                                 Value="0"/>
                  </StackPanel>
                  
                  <!-- ä¸Šä¼ æŒ‰é’® -->
                  <Button x:Name="BtnUpload"
                          Content="å¼€å§‹ä¸Šä¼ "
                          HorizontalAlignment="Right"
                          IsEnabled="False"
                          Click="BtnUpload_Click"/>
                  
                  <!-- ä¸Šä¼ æˆåŠŸåŽçš„ä¿¡æ¯ -->
                  <StackPanel x:Name="PanelUploadSuccess" 
                              Spacing="5" 
                              IsVisible="False">
                    <TextBlock Text="âœ“ ä¸Šä¼ å®Œæˆ" 
                               Foreground="Green"
                               FontWeight="SemiBold"/>
                    <TextBlock x:Name="TxtUploadId" 
                               Text="Upload ID: "
                               FontSize="12"
                               Opacity="0.7"/>
                  </StackPanel>
                </StackPanel>
              </Border>
            </StackPanel>
            
            <!-- ä¸‹è½½æ ¸å¿ƒé…ç½® -->
            <StackPanel x:Name="PanelDownloadCore" 
                        Spacing="5" 
                        IsVisible="False">
              <TextBlock Text="æ ¸å¿ƒä¸‹è½½URL" />
              <TextBox x:Name="TxtCoreUrl" 
                       Watermark="https://example.com/server.jar"/>
              
              <TextBlock Text="SHA256æ ¡éªŒå€¼ (å¯é€‰)" Margin="0,5,0,0"/>
              <TextBox x:Name="TxtCoreSha256" 
                       Watermark="æ ¸å¿ƒæ–‡ä»¶çš„SHA256å“ˆå¸Œå€¼"/>
            </StackPanel>
            
              <!-- æ ¸å¿ƒåç§° -->
            <StackPanel Spacing="5">
              <TextBlock Text="æ ¸å¿ƒæ–‡ä»¶åç§° *" />
              <TextBox x:Name="TxtCoreName" 
                       IsEnabled="False"
                       Watermark="ä¾‹å¦‚: server.jar"
                       MaxLength="100"/>
                <TextBlock Text="ðŸ’¡ å¼€æœå™¨å°†ä¼šè¯»å–æœåŠ¡å™¨ç›®å½•ä¸­ä»¥æ­¤ä¸ºåçš„æ ¸å¿ƒæ–‡ä»¶ä»¥å¼€æœ"
                       FontSize="12"
                       Opacity="0.7"/>
            </StackPanel>
            

          </StackPanel>
        </suki:GlassCard>
        
        <!-- æ­¥éª¤3: å†…å­˜é…ç½® -->
        <suki:GlassCard x:Name="Step3Panel" IsVisible="False">
          <StackPanel Spacing="10">
            <TextBlock Text="æ­¥éª¤ 3: å†…å­˜é…ç½®" FontSize="18" FontWeight="SemiBold"/>
            
            <Grid ColumnDefinitions="*,*" ColumnSpacing="15">
              <!-- æœ€å°å†…å­˜ -->
              <StackPanel Grid.Column="0" Spacing="5">
                <TextBlock Text="æœ€å°å†…å­˜ (MB) *" />
                <NumericUpDown x:Name="NumMinMemory"
                               Minimum="128"
                               Maximum="65536"
                               Value="1024"
                               Increment="256"
                               FormatString="0 MB"/>
              </StackPanel>
              
              <!-- æœ€å¤§å†…å­˜ -->
              <StackPanel Grid.Column="1" Spacing="5">
                <TextBlock Text="æœ€å¤§å†…å­˜ (MB) *" />
                <NumericUpDown x:Name="NumMaxMemory"
                               Minimum="128"
                               Maximum="65536"
                               Value="4096"
                               Increment="256"
                               FormatString="0 MB"/>
              </StackPanel>
            </Grid>
            
            <TextBlock Text="ðŸ’¡ å»ºè®®æœ€å¤§å†…å­˜è‡³å°‘æ˜¯æœ€å°å†…å­˜çš„2å€"
                       FontSize="12"
                       Opacity="0.7"/>
            
            <!-- é¢å¤–å‚æ•° -->
            <StackPanel Spacing="5" Margin="0,10,0,0">
              <TextBlock Text="é¢å¤–JVMå‚æ•° (å¯é€‰)" />
              <TextBox x:Name="TxtExtraArgs" 
                       Watermark="ä¾‹å¦‚: -XX:+UseG1GC -XX:+ParallelRefProcEnabled"
                       AcceptsReturn="True"
                       TextWrapping="Wrap"
                       Height="60"/>
            </StackPanel>
          </StackPanel>
        </suki:GlassCard>
        
        <!-- æ­¥éª¤4: ç¡®è®¤åˆ›å»º -->
        <suki:GlassCard x:Name="Step4Panel" IsVisible="False">
          <StackPanel Spacing="10">
            <TextBlock Text="æ­¥éª¤ 4: ç¡®è®¤é…ç½®" FontSize="18" FontWeight="SemiBold"/>
            
            <TextBlock Text="è¯·ç¡®è®¤ä»¥ä¸‹é…ç½®ä¿¡æ¯:" Opacity="0.8"/>
            
            <Border CornerRadius="8" 
                    Padding="15">
              <StackPanel Spacing="8">
                <Grid ColumnDefinitions="120,*">
                  <TextBlock Text="æœåŠ¡å™¨åç§°:" Grid.Column="0" Opacity="0.7"/>
                  <TextBlock x:Name="TxtConfirmServerName" Grid.Column="1" FontWeight="SemiBold"/>
                </Grid>
                
                <Grid ColumnDefinitions="120,*">
                  <TextBlock Text="æ ¸å¿ƒåç§°:" Grid.Column="0" Opacity="0.7"/>
                  <TextBlock x:Name="TxtConfirmCoreName" Grid.Column="1" FontWeight="SemiBold"/>
                </Grid>
                
                <Grid ColumnDefinitions="120,*">
                  <TextBlock Text="æ ¸å¿ƒæ¥æº:" Grid.Column="0" Opacity="0.7"/>
                  <TextBlock x:Name="TxtConfirmCoreSource" Grid.Column="1"/>
                </Grid>
                
                <Grid ColumnDefinitions="120,*">
                  <TextBlock Text="å†…å­˜é…ç½®:" Grid.Column="0" Opacity="0.7"/>
                  <TextBlock x:Name="TxtConfirmMemory" Grid.Column="1"/>
                </Grid>
                
                <Grid ColumnDefinitions="120,*">
                  <TextBlock Text="å­˜å‚¨è·¯å¾„:" Grid.Column="0" Opacity="0.7"/>
                  <TextBlock x:Name="TxtConfirmPath" Grid.Column="1" TextWrapping="Wrap"/>
                </Grid>
                
                <Grid ColumnDefinitions="120,*">
                  <TextBlock Text="Javaè·¯å¾„:" Grid.Column="0" Opacity="0.7"/>
                  <TextBlock x:Name="TxtConfirmJava" Grid.Column="1" TextWrapping="Wrap"/>
                </Grid>
              </StackPanel>
            </Border>
            
            <!-- åˆ›å»ºçŠ¶æ€ -->
            <Border x:Name="StatusBorder"
                    CornerRadius="8"
                    Padding="12"
                    IsVisible="False">
              <StackPanel Spacing="8">
                <TextBlock x:Name="TxtStatus" 
                           Text="æ­£åœ¨åˆ›å»ºæœåŠ¡å™¨..."
                           TextWrapping="Wrap"/>
                <ProgressBar x:Name="ProgressBar" 
                             IsIndeterminate="True"
                             Height="4"/>
              </StackPanel>
            </Border>
          </StackPanel>
        </suki:GlassCard>
        
      </StackPanel>
    </ScrollViewer>
            <!-- åº•éƒ¨æŒ‰é’® -->
    <Border Grid.Row="2" 
            BorderBrush="{DynamicResource SukiBorderBrush}"
            BorderThickness="0,1,0,0"
            Padding="10">
      <Grid ColumnDefinitions="Auto,*,Auto,Auto" ColumnSpacing="10">
        <Button x:Name="BtnCancel"
                Content="å–æ¶ˆ"
                Grid.Column="0"
                MinWidth="100"
                Click="BtnCancel_Click"/>
        
        <Button x:Name="BtnPrevious"
                Content="ä¸Šä¸€æ­¥"
                Grid.Column="2"
                MinWidth="100"
                IsVisible="False"
                Click="BtnPrevious_Click"/>
        
        <Button x:Name="BtnNext"
                Content="ä¸‹ä¸€æ­¥"
                Grid.Column="3"
                MinWidth="100"
                Classes="Flat"
                Click="BtnNext_Click"/>
      </Grid>
    </Border>
        </Grid>
    </suki:GlassCard>
</UserControl>
